{"version":3,"sources":["views/Ifos/components/Hero.tsx","views/Ifos/hooks/helpers.ts","views/Ifos/hooks/v2/useGetPublicIfoData.ts","views/Ifos/hooks/useIfoAllowance.ts","views/Ifos/hooks/v3/useGetWalletIfoData.ts","views/Ifos/hooks/useIfoApprove.ts","views/Ifos/components/IfoFoldableCard/Achievement.tsx","views/Pools/hooks/useWithdrawalFeeTimer.ts","utils/timeHelper.ts","../node_modules/date-fns/esm/constants/index.js","views/Ifos/components/IfoFoldableCard/types.ts","views/Pools/components/CakeVaultCard/WithdrawalFeeTimer.tsx","views/Pools/components/CakeVaultCard/UnstakingFeeCountdownRow.tsx","../node_modules/date-fns/esm/secondsToHours/index.js","views/Pools/components/CakeVaultCard/FeeSummary.tsx","views/Pools/components/CakeVaultCard/VaultStakeModal.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/PercentageOfTotal.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/Skeletons.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/IfoCardTokens.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/GetTokenModal.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/ContributeModal.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/ContributeButton.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/ClaimButton.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/IfoCardActions.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/IfoCardDetails.tsx","views/Ifos/components/IfoFoldableCard/IfoPoolCard/index.tsx","views/Ifos/components/IfoFoldableCard/Timer.tsx","views/Ifos/components/IfoFoldableCard/IfoRibbon.tsx","views/Ifos/components/IfoFoldableCard/index.tsx","views/Ifos/components/IfoLayout.tsx","views/Pools/components/PoolCard/AprRow.tsx","views/Pools/components/PoolCard/StyledCard.tsx","views/Pools/components/PoolCard/CardFooter/ExpandedFooter.tsx","views/Pools/components/PoolCard/CardFooter/index.tsx","views/Pools/components/PoolCard/PoolCardHeader.tsx","views/Pools/hooks/useApprove.tsx","views/Pools/components/CakeVaultCard/VaultCardActions/VaultApprovalAction.tsx","views/Pools/components/PoolCard/Modals/NotEnoughTokensModal.tsx","views/Pools/components/CakeVaultCard/VaultCardActions/HasSharesActions.tsx","views/Pools/components/CakeVaultCard/VaultCardActions/VaultStakeActions.tsx","views/Pools/components/CakeVaultCard/VaultCardActions/index.tsx","views/Pools/components/CakeVaultCard/RecentCakeProfitBalance.tsx","views/Pools/components/CakeVaultCard/RecentCakeProfitRow.tsx","views/Pools/components/CakeVaultCard/index.tsx","views/Pools/components/PoolsTable/ActionPanel/styles.ts","views/Pools/components/PoolCard/Modals/PercentageButton.tsx","views/Pools/hooks/useStakePool.ts","views/Pools/hooks/useUnstakePool.ts","views/Pools/components/PoolCard/Modals/StakeModal.tsx","views/Pools/components/PoolsTable/ActionPanel/Stake.tsx","views/Ifos/components/IfoPoolVaultCard.tsx","views/Ifos/components/IfoQuestions/config.ts","views/Ifos/components/IfoQuestions/index.tsx","views/Ifos/components/IfoSteps.tsx","views/Ifos/CurrentIfo.tsx","views/Ifos/hooks/v1/useGetPublicIfoData.ts","views/Ifos/hooks/v1/useGetWalletIfoData.ts","views/Ifos/components/IfoCardV1Data.tsx","views/Ifos/hooks/v2/useGetWalletIfoData.ts","views/Ifos/components/IfoCardV2Data.tsx","views/Ifos/components/IfoCardV3Data.tsx","views/Ifos/PastIfo.tsx","views/Ifos/index.tsx","state/pools/hooks.ts","hooks/useApproveConfirmTransaction.ts","utils/getTimePeriods.ts","components/ApproveConfirmButtons.tsx","components/FoldableSection/FoldableText.tsx"],"names":["StyledHero","styled","Box","theme","isDark","StyledHeading","Heading","mediaQueries","md","StyledButton","Button","colors","tertiary","primary","shadows","inset","DesktopButton","StyledSubTitle","Text","Hero","t","useTranslation","isMobile","useMatchBreakpoints","handleClick","document","getElementById","scrollIntoView","mb","py","minHeight","Container","justifyContent","flexDirection","style","gap","as","bold","onClick","variant","getStatus","currentBlock","startBlock","endBlock","TAX_PRECISION","ethers","FixedNumber","from","formatPool","pool","raisingAmountPool","BigNumber","toString","BIG_ZERO","offeringAmountPool","limitPerUserInLP","hasTax","totalAmountPool","sumTaxesOverflow","useGetPublicIfoData","ifo","address","releaseBlockNumber","cakePriceUsd","usePriceCakeBusd","lpTokenPriceInUsd","useLpTokenPrice","currency","symbol","currencyPriceInUSD","tokens","cake","useState","isInitialized","status","blocksRemaining","secondsUntilStart","progress","secondsUntilEnd","poolBasic","taxRate","poolUnlimited","thresholdPoints","undefined","startBlockNum","endBlockNum","numberPoints","state","setState","fetchIfoData","useCallback","a","multicallv2","ifoV2Abi","name","params","poolBasicFormatted","poolUnlimitedFormatted","toNumber","taxRateNum","divUnsafe","toUnsafeFloat","totalBlocks","prev","BSC_BLOCK_TIME","useIfoAllowance","tokenContract","spenderAddress","dependency","account","useWeb3React","allowance","setAllowance","useEffect","res","console","error","fetch","initialState","amountTokenCommittedInLP","offeringAmountInToken","refundingAmountInLP","taxAmountInLP","hasClaimed","isPendingTx","useGetWalletIfoData","dispatch","useAppDispatch","credit","useIfoPoolCredit","contract","useIfoV2Contract","currencyContract","useERC20","ifoCalls","map","method","fetchIfoPoolUserAndCredit","userInfo","amounts","prevState","resetIfoData","ifoCredit","creditLeft","minus","setPendingTx","poolId","setIsClaimed","useIfoApprove","callWithGasPrice","useCallWithGasPrice","constants","MaxUint256","tx","wait","SmartContractIcon","props","viewBox","fill","xmlns","d","fillRule","clipRule","FIXED_MIN_DOLLAR_FOR_ACHIEVEMENT","BIG_TEN","Flex","AchievementFlex","isFinished","InlinePrize","IfoAchievement","publicIfoData","tokenName","token","toLowerCase","campaignTitle","minLpForAchievement","formatBigNumber","div","toFixed","p","pb","alignItems","flex","src","width","height","mr","ml","color","fontSize","lineHeight","title","gt","amount","pt","pl","external","href","articleUrl","getBscScanLink","twitterUrl","telegramUrl","description","useWithdrawalFeeTimer","lastDepositedTime","userShares","withdrawalFeePeriod","secondsRemaining","setSecondsRemaining","hasUnstakingFee","setHasUnstakingFee","Math","floor","Date","now","currentSeconds","setCurrentSeconds","secondsRemainingCalc","doesUnstakingFeeApply","timerInterval","setInterval","prevSeconds","clearInterval","secondsToDay","s","pow","EnableStatus","WithdrawalFeeTimer","getTimePeriods","days","hours","minutes","day","hour","minute","UnstakingFeeCountdownRow","isTableVariant","vaultKey","useVaultPoolByKey","userData","fees","withdrawalFee","feeAsDecimal","withdrawalDayPeriod","useTooltip","fee","num","placement","targetRef","tooltip","tooltipVisible","parseInt","noFeeToPay","shouldShowTimer","withdrawalFeePeriodHour","seconds","requiredArgs","arguments","secondsToHours","ref","small","textTransform","FeeSummary","stakingTokenSymbol","stakeAmount","feeInCake","parseFloat","hasFeeToPay","feeEndTime","getHasWithdrawFee","mt","AnnualRoiContainer","AnnualRoiDisplay","VaultStakeModal","stakingMax","performanceFee","isRemovingStake","onDismiss","stakingToken","earningToken","apr","rawApr","stakingTokenPrice","earningTokenPrice","vaultPoolContract","useVaultPoolContract","pricePerFullShare","useTheme","useToast","toastSuccess","toastError","pendingTx","setStakeAmount","percent","setPercent","showRoiCalculator","setShowRoiCalculator","cakePriceBusd","usdValueStaked","times","formattedUsdValueStaked","formatNumber","callOptions","gasLimit","vaultPoolConfig","cakeAsBigNumber","convertSharesToCake","annualRoi","getInterestBreakdown","principalInUSD","isNaN","formattedAnnualRoi","getTokenLink","handleChangePercent","sliderPercent","percentageOfStakingMax","dividedBy","multipliedBy","amountToStake","getFullDisplayBalance","decimals","handleWithdrawal","convertedStakeAmount","shareStakeToWithdraw","convertCakeToShares","triggerWithdrawAllThreshold","sharesRemaining","sharesAsBigNumber","lte","receipt","Toast","txHash","transactionHash","fetchCakeVaultUserData","handleDeposit","handleConfirmClick","getDecimalAmount","RoiCalculatorModal","linkLabel","linkHref","stakingTokenBalance","plus","earningTokenSymbol","onBack","initialValue","headerBackground","gradients","cardHeader","minWidth","alt","value","onUserInput","input","convertedInput","percentage","currencyValue","balance","min","max","onValueChanged","valueLabel","step","scale","mx","Number","isFinite","isLoading","endIcon","spin","disabled","PercentageOfTotal","userAmount","totalAmount","percentOfUserDisplay","isGreaterThan","toLocaleString","maximumFractionDigits","SkeletonCardActions","SkeletonCardTokens","SkeletonCardDetails","TokenSection","primaryToken","secondaryToken","children","TokenImage","CommitTokenSection","commitToken","equals","cakeBnbLpToken","wbnb","Label","Value","wordBreak","OnSaleInfo","saleAmount","distributionRatio","toUpperCase","ratio","MessageText","$isLink","IfoCardTokens","walletIfoData","hasProfile","onApprove","enableStatus","publicPoolCharacteristics","userPoolCharacteristics","ifoPoolVault","useIfoPoolVault","useIfoWithApr","useModal","performanceFeeAsDecimal","onPresentStake","message","my","version","getBalanceNumber","fontWeight","ENABLED","IS_ENABLING","isEqualTo","textAlign","display","marginLeft","renderTokenSection","GetTokenModal","maxWidth","margin","Link","multiplierValues","gasPrice","parseUnits","ContributeModal","userCurrencyBalance","onSuccess","setValue","raisingTokenContract","valueWithTokenDecimals","DEFAULT_TOKEN_DECIMAL","label","useApproveConfirmTransaction","onRequiresApproval","response","currentAllowance","onConfirm","PoolIds","isApproving","isApproved","isConfirmed","isConfirming","handleApprove","handleConfirm","maximumTokenEntry","useMemo","isLessThanOrEqualTo","maximumTokenCommittable","isWarning","getBalanceAmount","flexGrow","split","toLocaleLowerCase","onBlur","multiplierValue","index","length","ApproveConfirmButtons","isApproveDisabled","isConfirmDisabled","eq","ContributeButton","useBlock","useTokenBalance","handleContributeSuccess","Promise","all","onPresentContributeModal","onPresentGetTokenModal","isDisabled","isGreaterThanOrEqualTo","ClaimButton","ifoVersion","isPending","handleClaim","harvest","harvestPool","IfoCardActions","to","nftsBaseUrl","ConnectWalletButton","FooterEntry","MaxTokenEntry","maxToken","isCurrencyCake","isV3","tooltipContent","price","useBUSDPrice","dollarValueOfToken","multiplyPriceByAmount","IfoCardDetails","poolCharacteristic","version3MaxTokens","maxLpTokens","totalCommittedPercent","totalLPCommitted","totalLPCommittedInUSD","totalCommitted","pricePerTokenWithFeeToOriginalRatio","pricePerTokenWithFee","tokenOfferingPrice","tokenEntry","paddingTop","raiseAmount","cakeToBurn","StyledCard","Card","SmallCard","config","cardConfig","useProfile","isProfileLoading","GradientText","FlexGap","SoonTimer","timeUntil","position","animation","EndInHeading","LiveNowHeading","LiveTimer","BigCurve","$status","IfoRibbon","Component","$useDark","$background","overflow","IfoRibbonEnd","IfoRibbonSoon","IfoRibbonLive","$isCurrent","bubblegum","dropdown","sm","Header","CardHeader","ifoId","CardsWrapper","xxl","singleCard","StyledCardBody","CardBody","StyledCardFooter","CardFooter","backgroundAlt","StyledNoHatBunny","$isLive","lg","NoHatBunny","isLive","isCurrent","isXs","isSm","isMd","isSmallerThanTablet","IfoCurrentCard","isExpanded","setIsExpanded","shouldShowBunny","className","bottom","zIndex","id","expanded","FoldableContent","isVisible","IfoCard","fetchPublicIfoData","isPublicIfoDataInitialized","fetchWalletIfoData","resetWalletIfoData","isWalletDataInitialized","DISABLED","setEnableStatus","isRecentlyActive","isActive","fastRefresh","useRefresh","isWindowVisible","useIsWindowVisible","checkAllowance","IfoPoolCard","IfoFoldableCard","isDesktop","borderRadius","IfoLayout","IfoLayoutWrapper","ApyLabelContainer","AprRow","stakedBalance","apyModalLink","autoCompoundFrequency","onPresentApyModal","Balance","unit","ExpandedWrapper","ExpandedFooter","totalStaked","stakingLimit","contractAddress","sousId","totalCakeInVault","vaultPools","useVaultPools","cakeInVaults","Object","values","reduce","total","vault","tokenAddress","poolContractAddress","getAddress","cakeVaultContractAddress","getVaultPoolAddress","isMetaMaskInScope","window","ethereum","isMetaMask","isManualCakePool","getPoolBlockInfo","shouldShowBlockCountdown","blocksUntilStart","hasPoolStarted","blocksToDisplay","totalStakedTargetRef","totalStakedTooltip","totalStakedTooltipVisible","gte","manualCakeTotalMinusAutoVault","getTotalStakedBalance","projectLink","BASE_BSC_SCAN_URL","registerToken","React","memo","ExpandableButtonWrapper","Footer","defaultExpanded","manualTooltipText","autoTooltipText","Wrapper","background","backgroundDisabled","radii","card","PoolCardHeaderTitle","subTitle","PoolCardHeader","isStaking","useVaultApprove","setLastUpdated","requestedApproval","setRequestedApproval","cakeContract","useCake","useCheckVaultApprovalStatus","isVaultApproved","setIsVaultApproved","useLastUpdated","lastUpdated","checkApprovalStatus","VaultApprovalAction","StyledLink","NotEnoughTokensModal","tokenSymbol","HasSharesActions","totalShares","cakeAsNumberBalance","stakedDollarValue","onPresentTokenRequired","onPresentUnstake","totalSharesPercentage","decimalPlaces","flexWrap","prefix","VaultKey","IfoPool","VaultStakeActions","accountHasSharesStaked","InlineText","IfoVaultCardAvgBalance","QuestionHelper","size","text","CakeVaultCardActions","RecentCakeProfitBalance","cakeToDisplay","dollarValueToDisplay","dateStringToDisplay","RecentCakeProfitCountdownRow","cakeAtLastUserAction","lastUserActionTime","getCakeVaultEarnings","hasAutoEarnings","autoCakeToDisplay","autoUsdToDisplay","lastActionInMs","CakeVaultCard","showStakedOnly","defaultFooterExpanded","isVaultUserDataLoading","creditStartBlock","useIfoPooStartBlock","tokenImage","RecentCakeProfitRow","VaultCardActions","ActionContainer","isAutoVault","xl","ActionTitles","ActionContent","PercentageButton","options","DEFAULT_GAS_LIMIT","sousStake","sousChefContract","getGasPrice","deposit","sousStakeBnb","useStakePool","isUsingBnb","masterChefContract","useMasterchef","useSousChef","handleStake","stakeFarm","updateUserStakedBalance","updateUserBalance","onStake","sousUnstake","units","withdraw","sousEmergencyUnstake","emergencyWithdraw","useUnstakePool","enableEmergencyWithdraw","handleUnstake","unstakeFarm","updateUserPendingReward","onUnstake","StakeModal","isBnbPool","hasReachedStakeLimit","setHasReachedStakedLimit","getCalculatedStakingLimit","fullDecimalStakeAmount","userNotEnoughToken","lt","IconButtonWrapper","Staked","userDataLoaded","poolCategory","lpContract","updateUserAllowance","useApprovePool","handlePoolApprove","requestedPoolApproval","handleVaultApprove","requestedVaultApproval","PoolCategory","BINANCE","isNotVaultAndHasStake","stakedTokenBalance","stakedTokenDollarBalance","hasSharesStaked","isVaultWithShares","stakedAutoDollarValue","needsApproval","onPresentVaultStake","onPresentVaultUnstake","reachStakingLimit","alignSelf","marginTop","StyledCardMobile","StyledTokenContent","invertedContrast","IfoPoolVaultCardMobile","useActiveWeb3React","startBlockTooltip","startBlockTooltipVisible","startBlockTargetRef","Stake","IfoPoolVaultCard","m","ImageWrapper","DetailsWrapper","IfoQuestions","i","FoldableText","desc","InlineLink","SmallStakePoolCard","cardBorder","Step1","Step2","isCommitted","IfoSteps","stepsValidationStatus","getStatusProp","arePreviousValid","every","slice","Boolean","renderCardBody","isStepValid","RouterLink","_","statusFirstPart","statusSecondPart","activeIfo","ifosConfig","find","Ifo","useGetPublicIfoV2Data","useGetWalletIfoV3Data","ifoV1Abi","raisingAmount","useIfoV1Contract","offeringAmount","userInfoResponse","refundingAmount","parsedUserInfo","claimed","IfoCardV1Data","useGetPublicIfoV1Data","useGetWalletIfoV1Data","IfoCardV2Data","useGetWalletIfoV2Data","IfoCardV3Data","inactiveIfo","filter","PastIfo","Ifos","useRouteMatch","path","isExact","useFetchIfoPool","useFetchPublicPoolsData","useFetchUserPools","items","activeItem","exact","CurrentIfo","slowRefresh","simpleRpcProvider","getBlockNumber","blockNumber","fetchPoolsPublicDataAsync","fetchPoolsPublicData","fetchPoolsStakingLimitsAsync","fetchPoolsUserDataAsync","usePools","useSelector","pools","data","transformPool","fetchIfoPoolPublicData","fetchIfoPoolFees","useCakeVault","CakeVault","key","initialPoolVaultState","totalSharesAsString","pricePerFullShareAsString","totalCakeInVaultAsString","estimatedCakeBountyRewardAsString","estimatedCakeBountyReward","totalPendingCakeHarvestAsString","totalPendingCakeHarvest","callFee","userSharesAsString","cakeAtLastUserActionAsString","ifoPool","creditAsString","usePool","poolZero","getAprData","approvalState","confirmState","reducer","actions","type","noop","onApproveSuccess","useReducer","handlePreApprove","useRef","current","then","result","hasApproveFailed","hasConfirmFailed","HOUR_IN_SECONDS","DAY_IN_SECONDS","MONTH_IN_SECONDS","YEAR_IN_SECONDS","delta","abs","timeLeft","years","months","ButtonArrangement","StyledApproveConfirmButtonRow","UIKitButton","iconAttrs","ChevronRight","ChevronRightIcon","attrs","ChevronBottom","ChevronDownIcon","spinnerIcon","buttonArrangement","ROW","confirmLabel","confirmId","confirmButtonText","StyledExpandableLabelWrapper","StyledChildrenFlex","inputSecondary"],"mappings":"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","file":"static/js/24.d10c6b55.chunk.js","sourcesContent":["import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Box, Heading, Text, Button, Flex, useMatchBreakpoints } from '@pancakeswap/uikit'\r\nimport Container from 'components/Layout/Container'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nconst StyledHero = styled(Box)`\r\n  background-image: url('/images/ifos/assets/ifo-banner-${({ theme }) => (theme.isDark ? 'dark' : 'light')}.png');\r\n  background-position: top, center;\r\n  background-repeat: no-repeat;\r\n  background-size: auto 100%;\r\n`\r\n\r\nconst StyledHeading = styled(Heading)`\r\n  font-size: 40px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    font-size: 64px;\r\n  }\r\n`\r\n\r\nconst StyledButton = styled(Button)`\r\n  background-color: ${({ theme }) => theme.colors.tertiary};\r\n  color: ${({ theme }) => theme.colors.primary};\r\n  padding: 4px 13px;\r\n  height: auto;\r\n  text-transform: uppercase;\r\n  align-self: flex-start;\r\n  font-size: 12px;\r\n  box-shadow: ${({ theme }) => theme.shadows.inset};\r\n  border-radius: 8px;\r\n  margin-left: 8px;\r\n`\r\n\r\nconst DesktopButton = styled(Button)`\r\n  align-self: flex-end;\r\n`\r\n\r\nconst StyledSubTitle = styled(Text)`\r\n  font-size: 16px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    font-size: 20px;\r\n  }\r\n`\r\n\r\nconst Hero = () => {\r\n  const { t } = useTranslation()\r\n\r\n  const { isMobile } = useMatchBreakpoints()\r\n\r\n  const handleClick = () => {\r\n    document.getElementById('ifo-how-to')?.scrollIntoView()\r\n  }\r\n\r\n  return (\r\n    <Box mb=\"8px\">\r\n      <StyledHero py={['16px', '16px', '32px']} minHeight={['212px', '212px', '197px']}>\r\n        <Container>\r\n          <Flex\r\n            justifyContent=\"space-between\"\r\n            flexDirection={['column', 'column', 'column', 'row']}\r\n            style={{ gap: '4px' }}\r\n          >\r\n            <Box>\r\n              <StyledHeading as=\"h1\" mb={['12px', '12px', '16px']}>\r\n                {t('IFO: Initial Farm Offerings')}\r\n              </StyledHeading>\r\n              <StyledSubTitle bold>\r\n                {t('Buy new tokens launching on Binance Smart Chain')}\r\n                {isMobile && <StyledButton onClick={handleClick}>{t('How does it work?')}</StyledButton>}\r\n              </StyledSubTitle>\r\n            </Box>\r\n            {!isMobile && (\r\n              <DesktopButton onClick={handleClick} variant=\"subtle\">\r\n                {t('How does it work?')}\r\n              </DesktopButton>\r\n            )}\r\n          </Flex>\r\n        </Container>\r\n      </StyledHero>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default Hero\r\n","import { IfoStatus } from 'config/constants/types'\r\n\r\nexport const getStatus = (currentBlock: number, startBlock: number, endBlock: number): IfoStatus => {\r\n  // Add an extra check to currentBlock because it takes awhile to fetch so the initial value is 0\r\n  // making the UI change to an inaccurate status\r\n  if (currentBlock === 0) {\r\n    return 'idle'\r\n  }\r\n\r\n  if (currentBlock < startBlock) {\r\n    return 'coming_soon'\r\n  }\r\n\r\n  if (currentBlock >= startBlock && currentBlock <= endBlock) {\r\n    return 'live'\r\n  }\r\n\r\n  if (currentBlock > endBlock) {\r\n    return 'finished'\r\n  }\r\n\r\n  return 'idle'\r\n}\r\n\r\nexport default null\r\n","import BigNumber from 'bignumber.js'\r\nimport { useState, useCallback } from 'react'\r\nimport { BSC_BLOCK_TIME } from 'config'\r\nimport ifoV2Abi from 'config/abi/ifoV2.json'\r\nimport tokens from 'config/constants/tokens'\r\nimport { Ifo, IfoStatus } from 'config/constants/types'\r\nimport { ethers } from 'ethers'\r\nimport { useLpTokenPrice, usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport { PublicIfoData } from '../../types'\r\nimport { getStatus } from '../helpers'\r\n\r\n// https://github.com/pancakeswap/pancake-contracts/blob/master/projects/ifo/contracts/IFOV2.sol#L431\r\n// 1,000,000,000 / 100\r\nconst TAX_PRECISION = ethers.FixedNumber.from(10000000000)\r\n\r\nconst formatPool = (pool) => ({\r\n  raisingAmountPool: pool ? new BigNumber(pool[0].toString()) : BIG_ZERO,\r\n  offeringAmountPool: pool ? new BigNumber(pool[1].toString()) : BIG_ZERO,\r\n  limitPerUserInLP: pool ? new BigNumber(pool[2].toString()) : BIG_ZERO,\r\n  hasTax: pool ? pool[3] : false,\r\n  totalAmountPool: pool ? new BigNumber(pool[4].toString()) : BIG_ZERO,\r\n  sumTaxesOverflow: pool ? new BigNumber(pool[5].toString()) : BIG_ZERO,\r\n})\r\n\r\n/**\r\n * Gets all public data of an IFO\r\n */\r\nconst useGetPublicIfoData = (ifo: Ifo): PublicIfoData => {\r\n  const { address, releaseBlockNumber } = ifo\r\n  const cakePriceUsd = usePriceCakeBusd()\r\n  const lpTokenPriceInUsd = useLpTokenPrice(ifo.currency.symbol)\r\n  const currencyPriceInUSD = ifo.currency === tokens.cake ? cakePriceUsd : lpTokenPriceInUsd\r\n\r\n  const [state, setState] = useState({\r\n    isInitialized: false,\r\n    status: 'idle' as IfoStatus,\r\n    blocksRemaining: 0,\r\n    secondsUntilStart: 0,\r\n    progress: 5,\r\n    secondsUntilEnd: 0,\r\n    poolBasic: {\r\n      raisingAmountPool: BIG_ZERO,\r\n      offeringAmountPool: BIG_ZERO,\r\n      limitPerUserInLP: BIG_ZERO,\r\n      taxRate: 0,\r\n      totalAmountPool: BIG_ZERO,\r\n      sumTaxesOverflow: BIG_ZERO,\r\n    },\r\n    poolUnlimited: {\r\n      raisingAmountPool: BIG_ZERO,\r\n      offeringAmountPool: BIG_ZERO,\r\n      limitPerUserInLP: BIG_ZERO,\r\n      taxRate: 0,\r\n      totalAmountPool: BIG_ZERO,\r\n      sumTaxesOverflow: BIG_ZERO,\r\n    },\r\n    thresholdPoints: undefined,\r\n    startBlockNum: 0,\r\n    endBlockNum: 0,\r\n    numberPoints: 0,\r\n  })\r\n\r\n  const fetchIfoData = useCallback(\r\n    async (currentBlock: number) => {\r\n      const [startBlock, endBlock, poolBasic, poolUnlimited, taxRate, numberPoints, thresholdPoints] =\r\n        await multicallv2(ifoV2Abi, [\r\n          {\r\n            address,\r\n            name: 'startBlock',\r\n          },\r\n          {\r\n            address,\r\n            name: 'endBlock',\r\n          },\r\n          {\r\n            address,\r\n            name: 'viewPoolInformation',\r\n            params: [0],\r\n          },\r\n          {\r\n            address,\r\n            name: 'viewPoolInformation',\r\n            params: [1],\r\n          },\r\n          {\r\n            address,\r\n            name: 'viewPoolTaxRateOverflow',\r\n            params: [1],\r\n          },\r\n          {\r\n            address,\r\n            name: 'numberPoints',\r\n          },\r\n          {\r\n            address,\r\n            name: 'thresholdPoints',\r\n          },\r\n        ])\r\n\r\n      const poolBasicFormatted = formatPool(poolBasic)\r\n      const poolUnlimitedFormatted = formatPool(poolUnlimited)\r\n\r\n      const startBlockNum = startBlock ? startBlock[0].toNumber() : 0\r\n      const endBlockNum = endBlock ? endBlock[0].toNumber() : 0\r\n      const taxRateNum = taxRate ? ethers.FixedNumber.from(taxRate[0]).divUnsafe(TAX_PRECISION).toUnsafeFloat() : 0\r\n\r\n      const status = getStatus(currentBlock, startBlockNum, endBlockNum)\r\n      const totalBlocks = endBlockNum - startBlockNum\r\n      const blocksRemaining = endBlockNum - currentBlock\r\n\r\n      // Calculate the total progress until finished or until start\r\n      const progress =\r\n        currentBlock > startBlockNum\r\n          ? ((currentBlock - startBlockNum) / totalBlocks) * 100\r\n          : ((currentBlock - releaseBlockNumber) / (startBlockNum - releaseBlockNumber)) * 100\r\n\r\n      setState((prev) => ({\r\n        ...prev,\r\n        isInitialized: true,\r\n        secondsUntilEnd: blocksRemaining * BSC_BLOCK_TIME,\r\n        secondsUntilStart: (startBlockNum - currentBlock) * BSC_BLOCK_TIME,\r\n        poolBasic: { ...poolBasicFormatted, taxRate: 0 },\r\n        poolUnlimited: { ...poolUnlimitedFormatted, taxRate: taxRateNum },\r\n        status,\r\n        progress,\r\n        blocksRemaining,\r\n        startBlockNum,\r\n        endBlockNum,\r\n        thresholdPoints: thresholdPoints && thresholdPoints[0],\r\n        numberPoints: numberPoints ? numberPoints[0].toNumber() : 0,\r\n      }))\r\n    },\r\n    [releaseBlockNumber, address],\r\n  )\r\n\r\n  return { ...state, currencyPriceInUSD, fetchIfoData }\r\n}\r\n\r\nexport default useGetPublicIfoData\r\n","import { useEffect, useState } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Contract } from 'ethers'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\n\r\n// Retrieve IFO allowance\r\nconst useIfoAllowance = (tokenContract: Contract, spenderAddress: string, dependency?: any): BigNumber => {\r\n  const { account } = useWeb3React()\r\n  const [allowance, setAllowance] = useState(BIG_ZERO)\r\n\r\n  useEffect(() => {\r\n    const fetch = async () => {\r\n      try {\r\n        const res = await tokenContract.allowance(account, spenderAddress)\r\n        setAllowance(new BigNumber(res.toString()))\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      fetch()\r\n    }\r\n  }, [account, spenderAddress, tokenContract, dependency])\r\n\r\n  return allowance\r\n}\r\n\r\nexport default useIfoAllowance\r\n","import { useState, useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { useERC20, useIfoV2Contract } from 'hooks/useContract'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport ifoV2Abi from 'config/abi/ifoV2.json'\r\nimport { useIfoPoolCredit } from 'state/pools/hooks'\r\nimport { fetchIfoPoolUserAndCredit } from 'state/pools'\r\nimport { useAppDispatch } from 'state'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport useIfoAllowance from '../useIfoAllowance'\r\nimport { WalletIfoState, WalletIfoData } from '../../types'\r\n\r\nconst initialState = {\r\n  isInitialized: false,\r\n  poolBasic: {\r\n    amountTokenCommittedInLP: BIG_ZERO,\r\n    offeringAmountInToken: BIG_ZERO,\r\n    refundingAmountInLP: BIG_ZERO,\r\n    taxAmountInLP: BIG_ZERO,\r\n    hasClaimed: false,\r\n    isPendingTx: false,\r\n  },\r\n  poolUnlimited: {\r\n    amountTokenCommittedInLP: BIG_ZERO,\r\n    offeringAmountInToken: BIG_ZERO,\r\n    refundingAmountInLP: BIG_ZERO,\r\n    taxAmountInLP: BIG_ZERO,\r\n    hasClaimed: false,\r\n    isPendingTx: false,\r\n  },\r\n}\r\n\r\n/**\r\n * Gets all data from an IFO related to a wallet\r\n */\r\nconst useGetWalletIfoData = (ifo: Ifo): WalletIfoData => {\r\n  const [state, setState] = useState<WalletIfoState>(initialState)\r\n  const dispatch = useAppDispatch()\r\n  const credit = useIfoPoolCredit()\r\n\r\n  const { address, currency } = ifo\r\n\r\n  const { account } = useWeb3React()\r\n  const contract = useIfoV2Contract(address)\r\n  const currencyContract = useERC20(currency.address)\r\n  const allowance = useIfoAllowance(currencyContract, address)\r\n\r\n  const setPendingTx = (status: boolean, poolId: PoolIds) =>\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [poolId]: {\r\n        ...prevState[poolId],\r\n        isPendingTx: status,\r\n      },\r\n    }))\r\n\r\n  const setIsClaimed = (poolId: PoolIds) => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [poolId]: {\r\n        ...prevState[poolId],\r\n        hasClaimed: true,\r\n      },\r\n    }))\r\n  }\r\n\r\n  const fetchIfoData = useCallback(async () => {\r\n    const ifoCalls = ['viewUserInfo', 'viewUserOfferingAndRefundingAmountsForPools'].map((method) => ({\r\n      address,\r\n      name: method,\r\n      params: [account, [0, 1]],\r\n    }))\r\n\r\n    dispatch(fetchIfoPoolUserAndCredit({ account }))\r\n\r\n    const [userInfo, amounts] = await multicallv2(ifoV2Abi, ifoCalls)\r\n\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      isInitialized: true,\r\n      poolBasic: {\r\n        ...prevState.poolBasic,\r\n        amountTokenCommittedInLP: new BigNumber(userInfo[0][0].toString()),\r\n        offeringAmountInToken: new BigNumber(amounts[0][0][0].toString()),\r\n        refundingAmountInLP: new BigNumber(amounts[0][0][1].toString()),\r\n        taxAmountInLP: new BigNumber(amounts[0][0][2].toString()),\r\n        hasClaimed: userInfo[1][0],\r\n      },\r\n      poolUnlimited: {\r\n        ...prevState.poolUnlimited,\r\n        amountTokenCommittedInLP: new BigNumber(userInfo[0][1].toString()),\r\n        offeringAmountInToken: new BigNumber(amounts[0][1][0].toString()),\r\n        refundingAmountInLP: new BigNumber(amounts[0][1][1].toString()),\r\n        taxAmountInLP: new BigNumber(amounts[0][1][2].toString()),\r\n        hasClaimed: userInfo[1][1],\r\n      },\r\n    }))\r\n  }, [account, address, dispatch])\r\n\r\n  const resetIfoData = useCallback(() => {\r\n    setState({ ...initialState })\r\n  }, [])\r\n\r\n  const ifoCredit = {\r\n    credit,\r\n    creditLeft: credit\r\n      .minus(state.poolBasic.amountTokenCommittedInLP)\r\n      .minus(state.poolUnlimited.amountTokenCommittedInLP),\r\n  }\r\n\r\n  return { ...state, allowance, contract, setPendingTx, setIsClaimed, fetchIfoData, resetIfoData, ifoCredit }\r\n}\r\n\r\nexport default useGetWalletIfoData\r\n","import { useCallback } from 'react'\r\nimport { ethers, Contract } from 'ethers'\r\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\r\n\r\nconst useIfoApprove = (tokenContract: Contract, spenderAddress: string) => {\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const onApprove = useCallback(async (): Promise<ethers.providers.TransactionReceipt> => {\r\n    const tx = await callWithGasPrice(tokenContract, 'approve', [spenderAddress, ethers.constants.MaxUint256])\r\n    return tx.wait()\r\n  }, [spenderAddress, tokenContract, callWithGasPrice])\r\n\r\n  return onApprove\r\n}\r\n\r\nexport default useIfoApprove\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  Flex,\r\n  Image,\r\n  Text,\r\n  PrizeIcon,\r\n  Skeleton,\r\n  LanguageIcon,\r\n  SvgProps,\r\n  Svg,\r\n  TwitterIcon,\r\n  Link,\r\n  TelegramIcon,\r\n} from '@pancakeswap/uikit'\r\nimport tokens from 'config/constants/tokens'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { PublicIfoData } from 'views/Ifos/types'\r\nimport { Ifo } from 'config/constants/types'\r\nimport { BIG_TEN } from 'utils/bigNumber'\r\nimport { getBscScanLink } from 'utils'\r\nimport { formatBigNumber } from 'utils/formatBalance'\r\nimport { FlexGap } from 'components/Layout/Flex'\r\n\r\nconst SmartContractIcon: React.FC<SvgProps> = (props) => {\r\n  return (\r\n    <Svg viewBox=\"0 0 25 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" {...props}>\r\n      <path d=\"M10.037 6a.75.75 0 000 1.5h7.5a.75.75 0 000-1.5h-7.5zM9.287 9.75a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM10.037 12a.75.75 0 000 1.5h7.5a.75.75 0 000-1.5h-7.5z\" />\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        clipRule=\"evenodd\"\r\n        d=\"M5.287 4a2 2 0 012-2h13a2 2 0 012 2v15c0 1.66-1.34 3-3 3h-14c-1.66 0-3-1.34-3-3v-2c0-.55.45-1 1-1h2V4zm0 16h11v-2h-12v1c0 .55.45 1 1 1zm14 0c.55 0 1-.45 1-1V4h-13v12h10c.55 0 1 .45 1 1v2c0 .55.45 1 1 1z\"\r\n      />\r\n    </Svg>\r\n  )\r\n}\r\n\r\nconst FIXED_MIN_DOLLAR_FOR_ACHIEVEMENT = BIG_TEN\r\n\r\ninterface Props {\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n}\r\n\r\nconst Container = styled(Flex)`\r\n  justify-content: space-between;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  text-align: left;\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    flex-direction: row;\r\n    align-items: initial;\r\n  }\r\n`\r\n\r\nconst AchievementFlex = styled(Flex)<{ isFinished: boolean }>`\r\n  ${({ isFinished }) => (isFinished ? 'filter: grayscale(100%)' : '')};\r\n  text-align: left;\r\n`\r\n\r\nconst InlinePrize = styled(Flex)`\r\n  display: inline-flex;\r\n  vertical-align: top;\r\n`\r\n\r\nconst IfoAchievement: React.FC<Props> = ({ ifo, publicIfoData }) => {\r\n  const { t } = useTranslation()\r\n  const tokenName = ifo.token.symbol?.toLowerCase()\r\n  const campaignTitle = ifo.name\r\n  const minLpForAchievement = publicIfoData.thresholdPoints\r\n    ? formatBigNumber(publicIfoData.thresholdPoints, 3)\r\n    : FIXED_MIN_DOLLAR_FOR_ACHIEVEMENT.div(publicIfoData.currencyPriceInUSD).toNumber().toFixed(3)\r\n\r\n  return (\r\n    <Container p=\"16px\" pb=\"32px\">\r\n      <AchievementFlex isFinished={publicIfoData.status === 'finished'} alignItems=\"flex-start\" flex={1}>\r\n        <Image src={`/images/achievements/ifo-${tokenName}.svg`} width={56} height={56} mr=\"8px\" />\r\n        <Flex flexDirection=\"column\" ml=\"8px\">\r\n          <Text color=\"secondary\" fontSize=\"12px\">\r\n            {`${t('Achievement')}:`}\r\n          </Text>\r\n          <Flex>\r\n            <Text bold mr=\"8px\" lineHeight={1.2}>\r\n              {t('IFO Shopper: %title%', { title: campaignTitle })}\r\n              <InlinePrize alignItems=\"center\" ml=\"8px\">\r\n                <PrizeIcon color=\"textSubtle\" width=\"16px\" mr=\"4px\" />\r\n                <Text lineHeight={1.2} color=\"textSubtle\">\r\n                  {publicIfoData.numberPoints}\r\n                </Text>\r\n              </InlinePrize>\r\n            </Text>\r\n          </Flex>\r\n          {publicIfoData.currencyPriceInUSD.gt(0) ? (\r\n            <Text color=\"textSubtle\" fontSize=\"12px\">\r\n              {t('Commit ~%amount% %symbol% in total to earn!', {\r\n                amount: minLpForAchievement,\r\n                symbol: ifo.currency === tokens.cake ? 'CAKE' : 'LP',\r\n              })}\r\n            </Text>\r\n          ) : (\r\n            <Skeleton minHeight={18} width={80} />\r\n          )}\r\n          <FlexGap gap=\"16px\" pt=\"24px\" pl=\"4px\">\r\n            <Link external href={ifo.articleUrl}>\r\n              <LanguageIcon color=\"textSubtle\" />\r\n            </Link>\r\n            <Link external href={getBscScanLink(ifo.address, 'address')}>\r\n              <SmartContractIcon color=\"textSubtle\" />\r\n            </Link>\r\n            {ifo.twitterUrl && (\r\n              <Link external href={ifo.twitterUrl}>\r\n                <TwitterIcon color=\"textSubtle\" />\r\n              </Link>\r\n            )}\r\n            {ifo.telegramUrl && (\r\n              <Link external href={ifo.telegramUrl}>\r\n                <TelegramIcon color=\"textSubtle\" />\r\n              </Link>\r\n            )}\r\n          </FlexGap>\r\n        </Flex>\r\n      </AchievementFlex>\r\n      {ifo.description && (\r\n        <Flex alignItems=\"flex-end\" flexDirection=\"column\" flex={1} pl=\"16px\">\r\n          <Text fontSize=\"14px\" lineHeight={1.2}>\r\n            {ifo.description}\r\n          </Text>\r\n        </Flex>\r\n      )}\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default IfoAchievement\r\n","import BigNumber from 'bignumber.js'\r\nimport { useEffect, useState } from 'react'\r\n\r\nexport const getHasWithdrawFee = (lastDepositedTime: number, withdrawalFeePeriod = 259200) => {\r\n  const feeEndTime = lastDepositedTime + withdrawalFeePeriod\r\n  const currentSeconds = Math.floor(Date.now() / 1000)\r\n  const secondsRemainingCalc = feeEndTime - currentSeconds\r\n  return secondsRemainingCalc > 0\r\n}\r\n\r\nconst useWithdrawalFeeTimer = (lastDepositedTime: number, userShares: BigNumber, withdrawalFeePeriod = 259200) => {\r\n  const [secondsRemaining, setSecondsRemaining] = useState(null)\r\n  const [hasUnstakingFee, setHasUnstakingFee] = useState(false)\r\n  const [currentSeconds, setCurrentSeconds] = useState(Math.floor(Date.now() / 1000))\r\n\r\n  useEffect(() => {\r\n    const feeEndTime = lastDepositedTime + withdrawalFeePeriod\r\n    const secondsRemainingCalc = feeEndTime - currentSeconds\r\n    const doesUnstakingFeeApply = userShares.gt(0) && secondsRemainingCalc > 0\r\n\r\n    const tick = () => {\r\n      setCurrentSeconds((prevSeconds) => prevSeconds + 1)\r\n    }\r\n    const timerInterval = setInterval(() => tick(), 1000)\r\n    if (doesUnstakingFeeApply) {\r\n      setSecondsRemaining(secondsRemainingCalc)\r\n      setHasUnstakingFee(true)\r\n    } else {\r\n      setHasUnstakingFee(false)\r\n      clearInterval(timerInterval)\r\n    }\r\n\r\n    return () => clearInterval(timerInterval)\r\n  }, [lastDepositedTime, withdrawalFeePeriod, setSecondsRemaining, currentSeconds, userShares])\r\n\r\n  return { hasUnstakingFee, secondsRemaining }\r\n}\r\n\r\nexport default useWithdrawalFeeTimer\r\n","export const secondsToDay = (s: number) => Math.floor(s / (24 * 60 * 60))\r\n","/**\n * Days in 1 week.\n *\n * @name daysInWeek\n * @constant\n * @type {number}\n * @default\n */\nexport var daysInWeek = 7;\n/**\n * Maximum allowed time.\n *\n * @name maxTime\n * @constant\n * @type {number}\n * @default\n */\n\nexport var maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1000;\n/**\n * Milliseconds in 1 minute\n *\n * @name millisecondsInMinute\n * @constant\n * @type {number}\n * @default\n */\n\nexport var millisecondsInMinute = 60000;\n/**\n * Milliseconds in 1 hour\n *\n * @name millisecondsInHour\n * @constant\n * @type {number}\n * @default\n */\n\nexport var millisecondsInHour = 3600000;\n/**\n * Milliseconds in 1 second\n *\n * @name millisecondsInSecond\n * @constant\n * @type {number}\n * @default\n */\n\nexport var millisecondsInSecond = 1000;\n/**\n * Minimum allowed time.\n *\n * @name minTime\n * @constant\n * @type {number}\n * @default\n */\n\nexport var minTime = -maxTime;\n/**\n * Minutes in 1 hour\n *\n * @name minutesInHour\n * @constant\n * @type {number}\n * @default\n */\n\nexport var minutesInHour = 60;\n/**\n * Months in 1 quarter\n *\n * @name monthsInQuarter\n * @constant\n * @type {number}\n * @default\n */\n\nexport var monthsInQuarter = 3;\n/**\n * Months in 1 year\n *\n * @name monthsInYear\n * @constant\n * @type {number}\n * @default\n */\n\nexport var monthsInYear = 12;\n/**\n * Quarters in 1 year\n *\n * @name quartersInYear\n * @constant\n * @type {number}\n * @default\n */\n\nexport var quartersInYear = 4;\n/**\n * Seconds in 1 hour\n *\n * @name secondsInHour\n * @constant\n * @type {number}\n * @default\n */\n\nexport var secondsInHour = 3600;\n/**\n * Seconds in 1 minute\n *\n * @name secondsInMinute\n * @constant\n * @type {number}\n * @default\n */\n\nexport var secondsInMinute = 60;","export enum EnableStatus {\r\n  ENABLED = 'enabled',\r\n  DISABLED = 'disabled',\r\n  IS_ENABLING = 'is_enabling',\r\n}\r\n\r\nexport default EnableStatus\r\n","import React from 'react'\r\nimport { Text } from '@pancakeswap/uikit'\r\nimport getTimePeriods from 'utils/getTimePeriods'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nconst WithdrawalFeeTimer: React.FC<{ secondsRemaining: number }> = ({ secondsRemaining }) => {\r\n  const { t } = useTranslation()\r\n  const { days, hours, minutes } = getTimePeriods(secondsRemaining)\r\n\r\n  return <Text fontSize=\"14px\">{t('%day%d : %hour%h : %minute%m', { day: days, hour: hours, minute: minutes })}</Text>\r\n}\r\n\r\nexport default WithdrawalFeeTimer\r\n","import React from 'react'\r\nimport { Flex, Text, TooltipText, useTooltip } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport useWithdrawalFeeTimer from 'views/Pools/hooks/useWithdrawalFeeTimer'\r\nimport { secondsToHours } from 'date-fns'\r\nimport { useVaultPoolByKey } from 'state/pools/hooks'\r\nimport { secondsToDay } from 'utils/timeHelper'\r\nimport { VaultKey } from 'state/types'\r\nimport WithdrawalFeeTimer from './WithdrawalFeeTimer'\r\n\r\ninterface UnstakingFeeCountdownRowProps {\r\n  isTableVariant?: boolean\r\n  vaultKey: VaultKey\r\n}\r\n\r\nconst UnstakingFeeCountdownRow: React.FC<UnstakingFeeCountdownRowProps> = ({ isTableVariant, vaultKey }) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const {\r\n    userData: { lastDepositedTime, userShares },\r\n    fees: { withdrawalFee, withdrawalFeePeriod },\r\n  } = useVaultPoolByKey(vaultKey)\r\n  const feeAsDecimal = withdrawalFee / 100 || '-'\r\n  const withdrawalDayPeriod = withdrawalFeePeriod ? secondsToDay(withdrawalFeePeriod) : '-'\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <>\r\n      <Text bold mb=\"4px\">\r\n        {t('Unstaking fee: %fee%%', { fee: feeAsDecimal })}\r\n      </Text>\r\n      <Text>\r\n        {t(\r\n          'Only applies within %num% days of staking. Unstaking after %num% days will not include a fee. Timer resets every time you stake new CAKE in the pool.',\r\n          {\r\n            num: withdrawalDayPeriod,\r\n          },\r\n        )}\r\n      </Text>\r\n    </>,\r\n    { placement: 'bottom-start' },\r\n  )\r\n\r\n  const { secondsRemaining, hasUnstakingFee } = useWithdrawalFeeTimer(\r\n    parseInt(lastDepositedTime, 10),\r\n    userShares,\r\n    withdrawalFeePeriod,\r\n  )\r\n\r\n  // The user has made a deposit, but has no fee\r\n  const noFeeToPay = lastDepositedTime && !hasUnstakingFee && userShares.gt(0)\r\n\r\n  // Show the timer if a user is connected, has deposited, and has an unstaking fee\r\n  const shouldShowTimer = account && lastDepositedTime && hasUnstakingFee\r\n\r\n  const withdrawalFeePeriodHour = withdrawalFeePeriod ? secondsToHours(withdrawalFeePeriod) : '-'\r\n\r\n  const getRowText = () => {\r\n    if (noFeeToPay) {\r\n      return t('Unstaking Fee')\r\n    }\r\n    if (shouldShowTimer) {\r\n      return t('unstaking fee until')\r\n    }\r\n    return t('unstaking fee if withdrawn within %num%h', { num: withdrawalFeePeriodHour })\r\n  }\r\n\r\n  return (\r\n    <Flex\r\n      alignItems={isTableVariant ? 'flex-start' : 'center'}\r\n      justifyContent=\"space-between\"\r\n      flexDirection={isTableVariant ? 'column' : 'row'}\r\n    >\r\n      {tooltipVisible && tooltip}\r\n      <TooltipText ref={targetRef} small textTransform=\"lowercase\">\r\n        {noFeeToPay ? '0' : feeAsDecimal}% {getRowText()}\r\n      </TooltipText>\r\n      {shouldShowTimer && <WithdrawalFeeTimer secondsRemaining={secondsRemaining} />}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default UnstakingFeeCountdownRow\r\n","import requiredArgs from \"../_lib/requiredArgs/index.js\";\nimport { secondsInHour } from \"../constants/index.js\";\n/**\n * @name secondsToHours\n * @category Conversion Helpers\n * @summary Convert seconds to hours.\n *\n * @description\n * Convert a number of seconds to a full number of hours.\n *\n * @param {number} seconds - number of seconds to be converted\n *\n * @returns {number} the number of seconds converted in hours\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Convert 7200 seconds into hours\n * const result = secondsToHours(7200)\n * //=> 2\n *\n * @example\n * // It uses floor rounding:\n * const result = secondsToHours(7199)\n * //=> 1\n */\n\nexport default function secondsToHours(seconds) {\n  requiredArgs(1, arguments);\n  var hours = seconds / secondsInHour;\n  return Math.floor(hours);\n}","import React from 'react'\r\nimport { Text, Flex, useTooltip, TooltipText } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { VaultKey } from 'state/types'\r\nimport { useVaultPoolByKey } from 'state/pools/hooks'\r\nimport { secondsToDay } from 'utils/timeHelper'\r\nimport { getHasWithdrawFee } from '../../hooks/useWithdrawalFeeTimer'\r\nimport UnstakingFeeCountdownRow from './UnstakingFeeCountdownRow'\r\n\r\ninterface FeeSummaryProps {\r\n  stakingTokenSymbol: string\r\n  stakeAmount: string\r\n  vaultKey: VaultKey\r\n}\r\n\r\nconst FeeSummary: React.FC<FeeSummaryProps> = ({ stakingTokenSymbol, stakeAmount, vaultKey }) => {\r\n  const { t } = useTranslation()\r\n  const {\r\n    fees: { withdrawalFee, withdrawalFeePeriod },\r\n    userData: { lastDepositedTime },\r\n  } = useVaultPoolByKey(vaultKey)\r\n  const feeAsDecimal = withdrawalFee / 100\r\n  const feeInCake = (parseFloat(stakeAmount) * (feeAsDecimal / 100)).toFixed(4)\r\n  const withdrawalDayPeriod = withdrawalFeePeriod ? secondsToDay(withdrawalFeePeriod) : '-'\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <>\r\n      <Text bold mb=\"4px\">\r\n        {t('Unstaking fee: %fee%%', { fee: feeAsDecimal })}\r\n      </Text>\r\n      <Text>\r\n        {t(\r\n          'Only applies within %num% days of staking. Unstaking after %num% days will not include a fee. Timer resets every time you stake new CAKE in the pool.',\r\n          {\r\n            num: withdrawalDayPeriod,\r\n          },\r\n        )}\r\n      </Text>\r\n    </>,\r\n    { placement: 'top-start' },\r\n  )\r\n\r\n  const hasFeeToPay = lastDepositedTime && getHasWithdrawFee(parseInt(lastDepositedTime, 10), withdrawalFeePeriod)\r\n\r\n  return (\r\n    <>\r\n      <Flex mt=\"24px\" alignItems=\"center\" justifyContent=\"space-between\">\r\n        {tooltipVisible && tooltip}\r\n        <TooltipText ref={targetRef} small>\r\n          {t('Unstaking Fee')}\r\n        </TooltipText>\r\n        <Text fontSize=\"14px\">\r\n          {stakeAmount && hasFeeToPay ? feeInCake : '-'} {stakingTokenSymbol}\r\n        </Text>\r\n      </Flex>\r\n      <UnstakingFeeCountdownRow vaultKey={vaultKey} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default FeeSummary\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  Modal,\r\n  Text,\r\n  Flex,\r\n  Image,\r\n  Button,\r\n  Slider,\r\n  BalanceInput,\r\n  AutoRenewIcon,\r\n  CalculateIcon,\r\n  IconButton,\r\n  Skeleton,\r\n} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useAppDispatch } from 'state'\r\nimport { BIG_TEN } from 'utils/bigNumber'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { useVaultPoolByKey } from 'state/pools/hooks'\r\nimport { useVaultPoolContract } from 'hooks/useContract'\r\nimport useTheme from 'hooks/useTheme'\r\nimport useWithdrawalFeeTimer from 'views/Pools/hooks/useWithdrawalFeeTimer'\r\nimport BigNumber from 'bignumber.js'\r\nimport { getFullDisplayBalance, formatNumber, getDecimalAmount } from 'utils/formatBalance'\r\nimport useToast from 'hooks/useToast'\r\nimport { fetchCakeVaultUserData } from 'state/pools'\r\nimport { DeserializedPool } from 'state/types'\r\nimport { getInterestBreakdown } from 'utils/compoundApyHelpers'\r\nimport RoiCalculatorModal from 'components/RoiCalculatorModal'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport { vaultPoolConfig } from 'config/constants/pools'\r\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\r\nimport { convertCakeToShares, convertSharesToCake } from '../../helpers'\r\nimport FeeSummary from './FeeSummary'\r\n\r\ninterface VaultStakeModalProps {\r\n  pool: DeserializedPool\r\n  stakingMax: BigNumber\r\n  performanceFee?: number\r\n  isRemovingStake?: boolean\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst StyledButton = styled(Button)`\r\n  flex-grow: 1;\r\n`\r\n\r\nconst AnnualRoiContainer = styled(Flex)`\r\n  cursor: pointer;\r\n`\r\n\r\nconst AnnualRoiDisplay = styled(Text)`\r\n  width: 72px;\r\n  max-width: 72px;\r\n  overflow: hidden;\r\n  text-align: right;\r\n  text-overflow: ellipsis;\r\n`\r\n\r\nconst VaultStakeModal: React.FC<VaultStakeModalProps> = ({\r\n  pool,\r\n  stakingMax,\r\n  performanceFee,\r\n  isRemovingStake = false,\r\n  onDismiss,\r\n}) => {\r\n  const dispatch = useAppDispatch()\r\n  const { stakingToken, earningToken, apr, rawApr, stakingTokenPrice, earningTokenPrice, vaultKey } = pool\r\n  const { account } = useWeb3React()\r\n  const vaultPoolContract = useVaultPoolContract(pool.vaultKey)\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const {\r\n    userData: { lastDepositedTime, userShares },\r\n    pricePerFullShare,\r\n  } = useVaultPoolByKey(pool.vaultKey)\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const { toastSuccess, toastError } = useToast()\r\n  const [pendingTx, setPendingTx] = useState(false)\r\n  const [stakeAmount, setStakeAmount] = useState('')\r\n  const [percent, setPercent] = useState(0)\r\n  const [showRoiCalculator, setShowRoiCalculator] = useState(false)\r\n  const { hasUnstakingFee } = useWithdrawalFeeTimer(parseInt(lastDepositedTime, 10), userShares)\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const usdValueStaked = new BigNumber(stakeAmount).times(cakePriceBusd)\r\n  const formattedUsdValueStaked = cakePriceBusd.gt(0) && stakeAmount ? formatNumber(usdValueStaked.toNumber()) : ''\r\n\r\n  const callOptions = {\r\n    gasLimit: vaultPoolConfig[pool.vaultKey].gasLimit,\r\n  }\r\n\r\n  const { cakeAsBigNumber } = convertSharesToCake(userShares, pricePerFullShare)\r\n\r\n  const interestBreakdown = getInterestBreakdown({\r\n    principalInUSD: !usdValueStaked.isNaN() ? usdValueStaked.toNumber() : 0,\r\n    apr: vaultKey ? rawApr : apr,\r\n    earningTokenPrice,\r\n    performanceFee,\r\n  })\r\n  const annualRoi = interestBreakdown[3] * pool.earningTokenPrice\r\n  const formattedAnnualRoi = formatNumber(annualRoi, annualRoi > 10000 ? 0 : 2, annualRoi > 10000 ? 0 : 2)\r\n\r\n  const getTokenLink = stakingToken.address ? `/swap?outputCurrency=${stakingToken.address}` : '/swap'\r\n\r\n  const handleStakeInputChange = (input: string) => {\r\n    if (input) {\r\n      const convertedInput = new BigNumber(input).multipliedBy(BIG_TEN.pow(stakingToken.decimals))\r\n      const percentage = Math.floor(convertedInput.dividedBy(stakingMax).multipliedBy(100).toNumber())\r\n      setPercent(percentage > 100 ? 100 : percentage)\r\n    } else {\r\n      setPercent(0)\r\n    }\r\n    setStakeAmount(input)\r\n  }\r\n\r\n  const handleChangePercent = (sliderPercent: number) => {\r\n    if (sliderPercent > 0) {\r\n      const percentageOfStakingMax = stakingMax.dividedBy(100).multipliedBy(sliderPercent)\r\n      const amountToStake = getFullDisplayBalance(percentageOfStakingMax, stakingToken.decimals, stakingToken.decimals)\r\n      setStakeAmount(amountToStake)\r\n    } else {\r\n      setStakeAmount('')\r\n    }\r\n    setPercent(sliderPercent)\r\n  }\r\n\r\n  const handleWithdrawal = async (convertedStakeAmount: BigNumber) => {\r\n    setPendingTx(true)\r\n    const shareStakeToWithdraw = convertCakeToShares(convertedStakeAmount, pricePerFullShare)\r\n    // trigger withdrawAll function if the withdrawal will leave 0.000001 CAKE or less\r\n    const triggerWithdrawAllThreshold = new BigNumber(1000000000000)\r\n    const sharesRemaining = userShares.minus(shareStakeToWithdraw.sharesAsBigNumber)\r\n    const isWithdrawingAll = sharesRemaining.lte(triggerWithdrawAllThreshold)\r\n\r\n    if (isWithdrawingAll) {\r\n      try {\r\n        const tx = await callWithGasPrice(vaultPoolContract, 'withdrawAll', undefined, callOptions)\r\n        const receipt = await tx.wait()\r\n        if (receipt.status) {\r\n          toastSuccess(\r\n            t('Unstaked!'),\r\n            <ToastDescriptionWithTx txHash={receipt.transactionHash}>\r\n              {t('Your earnings have also been harvested to your wallet')}\r\n            </ToastDescriptionWithTx>,\r\n          )\r\n          setPendingTx(false)\r\n          onDismiss()\r\n          dispatch(fetchCakeVaultUserData({ account }))\r\n        }\r\n      } catch (error) {\r\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n        setPendingTx(false)\r\n      }\r\n    } else {\r\n      // .toString() being called to fix a BigNumber error in prod\r\n      // as suggested here https://github.com/ChainSafe/web3.js/issues/2077\r\n      try {\r\n        const tx = await callWithGasPrice(\r\n          vaultPoolContract,\r\n          'withdraw',\r\n          [shareStakeToWithdraw.sharesAsBigNumber.toString()],\r\n          callOptions,\r\n        )\r\n        const receipt = await tx.wait()\r\n        if (receipt.status) {\r\n          toastSuccess(\r\n            t('Unstaked!'),\r\n            <ToastDescriptionWithTx txHash={receipt.transactionHash}>\r\n              {t('Your earnings have also been harvested to your wallet')}\r\n            </ToastDescriptionWithTx>,\r\n          )\r\n          setPendingTx(false)\r\n          onDismiss()\r\n          dispatch(fetchCakeVaultUserData({ account }))\r\n        }\r\n      } catch (error) {\r\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n        setPendingTx(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleDeposit = async (convertedStakeAmount: BigNumber) => {\r\n    setPendingTx(true)\r\n    try {\r\n      // .toString() being called to fix a BigNumber error in prod\r\n      // as suggested here https://github.com/ChainSafe/web3.js/issues/2077\r\n      const tx = await callWithGasPrice(vaultPoolContract, 'deposit', [convertedStakeAmount.toString()], callOptions)\r\n      const receipt = await tx.wait()\r\n      if (receipt.status) {\r\n        toastSuccess(\r\n          t('Staked!'),\r\n          <ToastDescriptionWithTx txHash={receipt.transactionHash}>\r\n            {t('Your funds have been staked in the pool')}\r\n          </ToastDescriptionWithTx>,\r\n        )\r\n        setPendingTx(false)\r\n        onDismiss()\r\n        dispatch(fetchCakeVaultUserData({ account }))\r\n      }\r\n    } catch (error) {\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      setPendingTx(false)\r\n    }\r\n  }\r\n\r\n  const handleConfirmClick = async () => {\r\n    const convertedStakeAmount = getDecimalAmount(new BigNumber(stakeAmount), stakingToken.decimals)\r\n    if (isRemovingStake) {\r\n      // unstaking\r\n      handleWithdrawal(convertedStakeAmount)\r\n    } else {\r\n      // staking\r\n      handleDeposit(convertedStakeAmount)\r\n    }\r\n  }\r\n\r\n  if (showRoiCalculator) {\r\n    return (\r\n      <RoiCalculatorModal\r\n        earningTokenPrice={earningTokenPrice}\r\n        stakingTokenPrice={stakingTokenPrice}\r\n        apr={vaultKey ? rawApr : apr}\r\n        linkLabel={t('Get %symbol%', { symbol: stakingToken.symbol })}\r\n        linkHref={getTokenLink}\r\n        stakingTokenBalance={cakeAsBigNumber.plus(stakingMax)}\r\n        stakingTokenSymbol={stakingToken.symbol}\r\n        earningTokenSymbol={earningToken.symbol}\r\n        onBack={() => setShowRoiCalculator(false)}\r\n        initialValue={stakeAmount}\r\n        performanceFee={performanceFee}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      title={isRemovingStake ? t('Unstake') : t('Stake in Pool')}\r\n      onDismiss={onDismiss}\r\n      headerBackground={theme.colors.gradients.cardHeader}\r\n    >\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n        <Text bold>{isRemovingStake ? t('Unstake') : t('Stake')}:</Text>\r\n        <Flex alignItems=\"center\" minWidth=\"70px\">\r\n          <Image src={`/images/tokens/${stakingToken.address}.png`} width={24} height={24} alt={stakingToken.symbol} />\r\n          <Text ml=\"4px\" bold>\r\n            {stakingToken.symbol}\r\n          </Text>\r\n        </Flex>\r\n      </Flex>\r\n      <BalanceInput\r\n        value={stakeAmount}\r\n        onUserInput={handleStakeInputChange}\r\n        currencyValue={cakePriceBusd.gt(0) && `~${formattedUsdValueStaked || 0} USD`}\r\n        decimals={stakingToken.decimals}\r\n      />\r\n      <Text mt=\"8px\" ml=\"auto\" color=\"textSubtle\" fontSize=\"12px\" mb=\"8px\">\r\n        {t('Balance: %balance%', { balance: getFullDisplayBalance(stakingMax, stakingToken.decimals) })}\r\n      </Text>\r\n      <Slider\r\n        min={0}\r\n        max={100}\r\n        value={percent}\r\n        onValueChanged={handleChangePercent}\r\n        name=\"stake\"\r\n        valueLabel={`${percent}%`}\r\n        step={1}\r\n      />\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mt=\"8px\">\r\n        <StyledButton scale=\"xs\" mx=\"2px\" p=\"4px 16px\" variant=\"tertiary\" onClick={() => handleChangePercent(25)}>\r\n          25%\r\n        </StyledButton>\r\n        <StyledButton scale=\"xs\" mx=\"2px\" p=\"4px 16px\" variant=\"tertiary\" onClick={() => handleChangePercent(50)}>\r\n          50%\r\n        </StyledButton>\r\n        <StyledButton scale=\"xs\" mx=\"2px\" p=\"4px 16px\" variant=\"tertiary\" onClick={() => handleChangePercent(75)}>\r\n          75%\r\n        </StyledButton>\r\n        <StyledButton scale=\"xs\" mx=\"2px\" p=\"4px 16px\" variant=\"tertiary\" onClick={() => handleChangePercent(100)}>\r\n          {t('Max')}\r\n        </StyledButton>\r\n      </Flex>\r\n      {isRemovingStake && hasUnstakingFee && (\r\n        <FeeSummary vaultKey={vaultKey} stakingTokenSymbol={stakingToken.symbol} stakeAmount={stakeAmount} />\r\n      )}\r\n      {!isRemovingStake && (\r\n        <Flex mt=\"24px\" alignItems=\"center\" justifyContent=\"space-between\">\r\n          <Text mr=\"8px\" color=\"textSubtle\">\r\n            {t('Annual ROI at current rates')}:\r\n          </Text>\r\n          {Number.isFinite(annualRoi) ? (\r\n            <AnnualRoiContainer\r\n              alignItems=\"center\"\r\n              onClick={() => {\r\n                setShowRoiCalculator(true)\r\n              }}\r\n            >\r\n              <AnnualRoiDisplay>${formattedAnnualRoi}</AnnualRoiDisplay>\r\n              <IconButton variant=\"text\" scale=\"sm\">\r\n                <CalculateIcon color=\"textSubtle\" width=\"18px\" />\r\n              </IconButton>\r\n            </AnnualRoiContainer>\r\n          ) : (\r\n            <Skeleton width={60} />\r\n          )}\r\n        </Flex>\r\n      )}\r\n      <Button\r\n        isLoading={pendingTx}\r\n        endIcon={pendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n        onClick={handleConfirmClick}\r\n        disabled={!stakeAmount || parseFloat(stakeAmount) === 0}\r\n        mt=\"24px\"\r\n      >\r\n        {pendingTx ? t('Confirming') : t('Confirm')}\r\n      </Button>\r\n      {!isRemovingStake && (\r\n        <Button mt=\"8px\" as=\"a\" external href={getTokenLink} variant=\"secondary\">\r\n          {t('Get %symbol%', { symbol: stakingToken.symbol })}\r\n        </Button>\r\n      )}\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default VaultStakeModal\r\n","import React from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Text, TextProps } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ninterface PercentageOfTotalProps extends TextProps {\r\n  userAmount: BigNumber\r\n  totalAmount: BigNumber\r\n}\r\n\r\nconst PercentageOfTotal: React.FC<PercentageOfTotalProps> = ({ userAmount, totalAmount, ...props }) => {\r\n  const { t } = useTranslation()\r\n  const percentOfUserContribution = totalAmount.isGreaterThan(0) ? userAmount.div(totalAmount).times(100).toNumber() : 0\r\n  const percentOfUserDisplay = percentOfUserContribution.toLocaleString(undefined, { maximumFractionDigits: 5 })\r\n\r\n  return (\r\n    <Text fontSize=\"14px\" color=\"textSubtle\" {...props}>\r\n      {t('%num% of total', { num: percentOfUserDisplay })}\r\n    </Text>\r\n  )\r\n}\r\n\r\nexport default PercentageOfTotal\r\n","import React from 'react'\r\nimport { Flex, Skeleton } from '@pancakeswap/uikit'\r\n\r\nexport const SkeletonCardActions = () => {\r\n  return <Skeleton height=\"48px\" />\r\n}\r\n\r\nexport const SkeletonCardTokens = () => {\r\n  return (\r\n    <div>\r\n      <Flex justifyContent=\"space-between\" alignItems=\"center\" mb=\"24px\">\r\n        <Skeleton variant=\"circle\" width=\"32px\" height=\"32px\" mr=\"16px\" />\r\n        <Skeleton width=\"90%\" />\r\n      </Flex>\r\n      <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n        <Skeleton variant=\"circle\" width=\"32px\" height=\"32px\" mr=\"16px\" />\r\n        <Skeleton width=\"90%\" />\r\n      </Flex>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const SkeletonCardDetails = () => {\r\n  return (\r\n    <div>\r\n      <Skeleton mb=\"8px\" />\r\n      <Skeleton />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default null\r\n","import React from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport {\r\n  Text,\r\n  Flex,\r\n  Box,\r\n  CheckmarkCircleIcon,\r\n  FlexProps,\r\n  HelpIcon,\r\n  useTooltip,\r\n  Button,\r\n  AutoRenewIcon,\r\n  BunnyPlaceholderIcon,\r\n  Message,\r\n  useModal,\r\n} from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Token } from '@pancakeswap/sdk'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport tokens from 'config/constants/tokens'\r\nimport { cakeBnbLpToken } from 'config/constants/ifo'\r\nimport { PublicIfoData, WalletIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { TokenImage, TokenPairImage } from 'components/TokenImage'\r\nimport VaultStakeModal from 'views/Pools/components/CakeVaultCard/VaultStakeModal'\r\nimport { useIfoPoolVault, useIfoPoolCredit, useIfoWithApr } from 'state/pools/hooks'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { EnableStatus } from '../types'\r\nimport PercentageOfTotal from './PercentageOfTotal'\r\nimport { SkeletonCardTokens } from './Skeletons'\r\n\r\ninterface TokenSectionProps extends FlexProps {\r\n  primaryToken?: Token\r\n  secondaryToken?: Token\r\n}\r\n\r\nconst TokenSection: React.FC<TokenSectionProps> = ({ primaryToken, secondaryToken, children, ...props }) => {\r\n  const renderTokenComponent = () => {\r\n    if (!primaryToken) {\r\n      return <BunnyPlaceholderIcon width={32} mr=\"16px\" />\r\n    }\r\n\r\n    if (primaryToken && secondaryToken) {\r\n      return (\r\n        <TokenPairImage\r\n          variant=\"inverted\"\r\n          primaryToken={primaryToken}\r\n          height={32}\r\n          width={32}\r\n          secondaryToken={secondaryToken}\r\n          mr=\"16px\"\r\n        />\r\n      )\r\n    }\r\n\r\n    return <TokenImage token={primaryToken} height={32} width={32} mr=\"16px\" />\r\n  }\r\n\r\n  return (\r\n    <Flex {...props}>\r\n      {renderTokenComponent()}\r\n      <div>{children}</div>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nconst CommitTokenSection: React.FC<TokenSectionProps & { commitToken: Token }> = ({ commitToken, ...props }) => {\r\n  if (commitToken.equals(cakeBnbLpToken)) {\r\n    return <TokenSection primaryToken={tokens.cake} secondaryToken={tokens.wbnb} {...props} />\r\n  }\r\n  return <TokenSection primaryToken={commitToken} {...props} />\r\n}\r\n\r\nconst Label = (props) => <Text bold fontSize=\"12px\" color=\"secondary\" textTransform=\"uppercase\" {...props} />\r\n\r\nconst Value = (props) => <Text bold fontSize=\"20px\" style={{ wordBreak: 'break-all' }} {...props} />\r\n\r\ninterface IfoCardTokensProps {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n  hasProfile: boolean\r\n  isLoading: boolean\r\n  onApprove: () => Promise<any>\r\n  enableStatus: EnableStatus\r\n}\r\n\r\nconst OnSaleInfo = ({ token, saleAmount, distributionRatio }) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <TokenSection primaryToken={token}>\r\n      <Flex flexDirection=\"column\">\r\n        <Label>{t('On sale').toUpperCase()}</Label>\r\n        <Value>{saleAmount}</Value>\r\n        <Text fontSize=\"14px\" color=\"textSubtle\">\r\n          {t('%ratio%% of total sale', { ratio: distributionRatio })}\r\n        </Text>\r\n      </Flex>\r\n    </TokenSection>\r\n  )\r\n}\r\n\r\nconst MessageText = styled(Text)<{ $isLink?: boolean }>`\r\n  ${({ $isLink }) =>\r\n    $isLink &&\r\n    `\r\n    text-decoration: underline;\r\n    font-weight: bold;\r\n  `}\r\n  font-size: 14px;\r\n`\r\n\r\nconst IfoCardTokens: React.FC<IfoCardTokensProps> = ({\r\n  poolId,\r\n  ifo,\r\n  publicIfoData,\r\n  walletIfoData,\r\n  hasProfile,\r\n  isLoading,\r\n  onApprove,\r\n  enableStatus,\r\n}) => {\r\n  const { account } = useWeb3React()\r\n  const { t } = useTranslation()\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t(\r\n      'Sorry, you didnt contribute enough CAKE to meet the minimum threshold. You didnt buy anything in this sale, but you can still reclaim your CAKE.',\r\n    ),\r\n    { placement: 'bottom' },\r\n  )\r\n\r\n  const publicPoolCharacteristics = publicIfoData[poolId]\r\n  const userPoolCharacteristics = walletIfoData[poolId]\r\n\r\n  const { currency, token } = ifo\r\n  const { hasClaimed } = userPoolCharacteristics\r\n  const distributionRatio = ifo[poolId].distributionRatio * 100\r\n\r\n  const ifoPoolVault = useIfoPoolVault()\r\n  const { pool } = useIfoWithApr()\r\n  const credit = useIfoPoolCredit()\r\n\r\n  const stakingTokenBalance = pool?.userData?.stakingTokenBalance\r\n    ? new BigNumber(pool.userData.stakingTokenBalance)\r\n    : BIG_ZERO\r\n\r\n  const [onPresentStake] = useModal(\r\n    <VaultStakeModal\r\n      stakingMax={stakingTokenBalance}\r\n      performanceFee={ifoPoolVault.fees.performanceFeeAsDecimal}\r\n      pool={pool}\r\n    />,\r\n  )\r\n\r\n  const renderTokenSection = () => {\r\n    if (isLoading) {\r\n      return <SkeletonCardTokens />\r\n    }\r\n    if (!account) {\r\n      return <OnSaleInfo token={token} distributionRatio={distributionRatio} saleAmount={ifo[poolId].saleAmount} />\r\n    }\r\n\r\n    let message\r\n\r\n    if (account && !hasProfile) {\r\n      message = (\r\n        <Message my=\"24px\" p=\"8px\" variant=\"warning\">\r\n          <Box>\r\n            <MessageText as=\"span\" color=\"#D67E0A\">\r\n              {publicIfoData.status === 'finished'\r\n                ? t('Activate PancakeSwap Profile to take part in next IFOs!')\r\n                : t('You need an active PancakeSwap Profile to take part in an IFO!')}\r\n            </MessageText>{' '}\r\n            <MessageText as=\"a\" $isLink color=\"#D67E0A\" href=\"#ifo-how-to\">\r\n              {t('How does it work?')} \r\n            </MessageText>\r\n          </Box>\r\n        </Message>\r\n      )\r\n    }\r\n\r\n    if (ifo.version === 3 && getBalanceNumber(credit) === 0) {\r\n      message = (\r\n        <Message my=\"24px\" p=\"8px\" variant=\"danger\">\r\n          <Box>\r\n            <MessageText as=\"span\" color=\"failure\">\r\n              {t('You dont have any average CAKE balance available to commit in the IFO CAKE pool.')}\r\n            </MessageText>{' '}\r\n            <MessageText as=\"a\" $isLink color=\"failure\" fontWeight={700} href=\"#ifo-how-to\">\r\n              {t('How does it work?')} \r\n            </MessageText>\r\n          </Box>\r\n        </Message>\r\n      )\r\n    }\r\n    if (account && !hasProfile) {\r\n      return (\r\n        <>\r\n          <OnSaleInfo token={token} distributionRatio={distributionRatio} saleAmount={ifo[poolId].saleAmount} />\r\n          {message}\r\n        </>\r\n      )\r\n    }\r\n    if (publicIfoData.status === 'coming_soon') {\r\n      return (\r\n        <>\r\n          <TokenSection primaryToken={ifo.token}>\r\n            <Label>{t('On sale')}</Label>\r\n            <Value>{ifo[poolId].saleAmount}</Value>\r\n          </TokenSection>\r\n          <Text fontSize=\"14px\" color=\"textSubtle\" pl=\"48px\">\r\n            {t('%ratio%% of total sale', { ratio: distributionRatio })}\r\n          </Text>\r\n          {message}\r\n          {enableStatus !== EnableStatus.ENABLED && account && (\r\n            <Button\r\n              width=\"100%\"\r\n              mt=\"16px\"\r\n              onClick={onApprove}\r\n              isLoading={enableStatus === EnableStatus.IS_ENABLING}\r\n              endIcon={enableStatus === EnableStatus.IS_ENABLING ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n            >\r\n              {t('Enable')}\r\n            </Button>\r\n          )}\r\n        </>\r\n      )\r\n    }\r\n    if (publicIfoData.status === 'live') {\r\n      return (\r\n        <>\r\n          <CommitTokenSection commitToken={ifo.currency} mb=\"24px\">\r\n            <Label>{t('Your %symbol% committed', { symbol: currency.symbol })}</Label>\r\n            <Value>{getBalanceNumber(userPoolCharacteristics.amountTokenCommittedInLP, currency.decimals)}</Value>\r\n            <PercentageOfTotal\r\n              userAmount={userPoolCharacteristics.amountTokenCommittedInLP}\r\n              totalAmount={publicPoolCharacteristics.totalAmountPool}\r\n            />\r\n          </CommitTokenSection>\r\n          <TokenSection primaryToken={ifo.token}>\r\n            <Label>{t('%symbol% to receive', { symbol: token.symbol })}</Label>\r\n            <Value>{getBalanceNumber(userPoolCharacteristics.offeringAmountInToken, token.decimals)}</Value>\r\n          </TokenSection>\r\n        </>\r\n      )\r\n    }\r\n    if (publicIfoData.status === 'finished') {\r\n      return userPoolCharacteristics.amountTokenCommittedInLP.isEqualTo(0) ? (\r\n        <Flex flexDirection=\"column\" alignItems=\"center\">\r\n          <BunnyPlaceholderIcon width={80} mb=\"16px\" />\r\n          <Text fontWeight={600}>{t('You didnt participate in this sale!')}</Text>\r\n          <Text textAlign=\"center\" fontSize=\"14px\">\r\n            {t('To participate in the next IFO, stake some CAKE in the IFO CAKE pool!')}\r\n          </Text>\r\n          <MessageText as=\"a\" $isLink href=\"#ifo-how-to\" color=\"primary\" textAlign=\"center\">\r\n            {t('How does it work?')} \r\n          </MessageText>\r\n          <Button mt=\"24px\" onClick={onPresentStake}>\r\n            {t('Stake CAKE in IFO pool')}\r\n          </Button>\r\n        </Flex>\r\n      ) : (\r\n        <>\r\n          <CommitTokenSection commitToken={ifo.currency} mb=\"24px\">\r\n            <Label>\r\n              {t(hasClaimed ? 'Your %symbol% RECLAIMED' : 'Your %symbol% TO RECLAIM', { symbol: currency.symbol })}\r\n            </Label>\r\n            <Flex alignItems=\"center\">\r\n              <Value>{getBalanceNumber(userPoolCharacteristics.refundingAmountInLP, currency.decimals)}</Value>\r\n              {hasClaimed && <CheckmarkCircleIcon color=\"success\" ml=\"8px\" />}\r\n            </Flex>\r\n            <PercentageOfTotal\r\n              userAmount={userPoolCharacteristics.amountTokenCommittedInLP}\r\n              totalAmount={publicPoolCharacteristics.totalAmountPool}\r\n            />\r\n          </CommitTokenSection>\r\n          <TokenSection primaryToken={ifo.token}>\r\n            <Label> {t(hasClaimed ? '%symbol% received' : '%symbol% to receive', { symbol: token.symbol })}</Label>\r\n            <Flex alignItems=\"center\">\r\n              <Value>{getBalanceNumber(userPoolCharacteristics.offeringAmountInToken, token.decimals)}</Value>\r\n              {!hasClaimed && userPoolCharacteristics.offeringAmountInToken.isEqualTo(0) && (\r\n                <div ref={targetRef} style={{ display: 'flex', marginLeft: '8px' }}>\r\n                  <HelpIcon />\r\n                </div>\r\n              )}\r\n              {hasClaimed && <CheckmarkCircleIcon color=\"success\" ml=\"8px\" />}\r\n            </Flex>\r\n          </TokenSection>\r\n        </>\r\n      )\r\n    }\r\n    return null\r\n  }\r\n  return (\r\n    <Box>\r\n      {tooltipVisible && tooltip}\r\n      {renderTokenSection()}\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default IfoCardTokens\r\n","import React from 'react'\r\nimport { Modal, ModalBody, Text, Image, Button, Link, OpenNewIcon } from '@pancakeswap/uikit'\r\nimport { Token } from '@pancakeswap/sdk'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ninterface Props {\r\n  currency: Token\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst GetTokenModal: React.FC<Partial<Props>> = ({ currency, onDismiss }) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <Modal title={t('%symbol% required', { symbol: currency.symbol })} onDismiss={onDismiss}>\r\n      <ModalBody maxWidth=\"288px\">\r\n        <Image src={`/images/tokens/${currency.address}.svg`} width={72} height={72} margin=\"auto\" mb=\"24px\" />\r\n        <Text mb=\"16px\">\r\n          {t('Youll need %symbol% tokens to participate in the IFO!', { symbol: currency.symbol })}\r\n        </Text>\r\n        <Text mb=\"24px\">\r\n          {t('Get %symbol%, or make sure your tokens arent staked somewhere else.', { symbol: currency.symbol })}\r\n        </Text>\r\n        <Button\r\n          as={Link}\r\n          external\r\n          href={`/swap?outputCurrency=${currency.address}`}\r\n          endIcon={<OpenNewIcon color=\"white\" />}\r\n          minWidth=\"100%\" // Bypass the width=\"fit-content\" on Links\r\n        >\r\n          {t('Get %symbol%', { symbol: currency.symbol })}\r\n        </Button>\r\n      </ModalBody>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default GetTokenModal\r\n","import React, { useMemo, useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { ethers } from 'ethers'\r\nimport { parseUnits } from 'ethers/lib/utils'\r\nimport {\r\n  Modal,\r\n  ModalBody,\r\n  Text,\r\n  Image,\r\n  Button,\r\n  BalanceInput,\r\n  Flex,\r\n  useTooltip,\r\n  TooltipText,\r\n  Box,\r\n  Link,\r\n} from '@pancakeswap/uikit'\r\nimport { PoolIds, Ifo } from 'config/constants/types'\r\nimport { WalletIfoData, PublicIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { formatNumber, getBalanceAmount } from 'utils/formatBalance'\r\nimport ApproveConfirmButtons from 'components/ApproveConfirmButtons'\r\nimport useApproveConfirmTransaction from 'hooks/useApproveConfirmTransaction'\r\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\r\nimport { DEFAULT_TOKEN_DECIMAL } from 'config'\r\nimport { useERC20 } from 'hooks/useContract'\r\nimport tokens from 'config/constants/tokens'\r\n\r\ninterface Props {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n  userCurrencyBalance: BigNumber\r\n  creditLeft: BigNumber\r\n  onSuccess: (amount: BigNumber, txHash: string) => void\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst multiplierValues = [0.1, 0.25, 0.5, 0.75, 1]\r\n\r\n// Default value for transaction setting, tweak based on BSC network congestion.\r\nconst gasPrice = parseUnits('10', 'gwei').toString()\r\n\r\nconst ContributeModal: React.FC<Props> = ({\r\n  poolId,\r\n  ifo,\r\n  publicIfoData,\r\n  walletIfoData,\r\n  userCurrencyBalance,\r\n  creditLeft,\r\n  onDismiss,\r\n  onSuccess,\r\n}) => {\r\n  const publicPoolCharacteristics = publicIfoData[poolId]\r\n  const userPoolCharacteristics = walletIfoData[poolId]\r\n\r\n  const { currency } = ifo\r\n  const { limitPerUserInLP } = publicPoolCharacteristics\r\n  const { amountTokenCommittedInLP } = userPoolCharacteristics\r\n  const { contract } = walletIfoData\r\n  const [value, setValue] = useState('')\r\n  const { account } = useWeb3React()\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const raisingTokenContract = useERC20(currency.address)\r\n  const { t } = useTranslation()\r\n  const valueWithTokenDecimals = new BigNumber(value).times(DEFAULT_TOKEN_DECIMAL)\r\n  const label = currency === tokens.cake ? t('Max. CAKE entry') : t('Max. token entry')\r\n\r\n  const { isApproving, isApproved, isConfirmed, isConfirming, handleApprove, handleConfirm } =\r\n    useApproveConfirmTransaction({\r\n      onRequiresApproval: async () => {\r\n        try {\r\n          const response = await raisingTokenContract.allowance(account, contract.address)\r\n          const currentAllowance = new BigNumber(response.toString())\r\n          return currentAllowance.gt(0)\r\n        } catch (error) {\r\n          return false\r\n        }\r\n      },\r\n      onApprove: () => {\r\n        return callWithGasPrice(raisingTokenContract, 'approve', [contract.address, ethers.constants.MaxUint256], {\r\n          gasPrice,\r\n        })\r\n      },\r\n      onConfirm: () => {\r\n        return callWithGasPrice(\r\n          contract,\r\n          'depositPool',\r\n          [valueWithTokenDecimals.toString(), poolId === PoolIds.poolBasic ? 0 : 1],\r\n          {\r\n            gasPrice,\r\n          },\r\n        )\r\n      },\r\n      onSuccess: async ({ receipt }) => {\r\n        await onSuccess(valueWithTokenDecimals, receipt.transactionHash)\r\n        onDismiss()\r\n      },\r\n    })\r\n\r\n  // in v3 max token entry is based on ifo credit and hard cap limit per user minus amount already committed\r\n  const maximumTokenEntry = useMemo(() => {\r\n    if (!creditLeft) {\r\n      return limitPerUserInLP.minus(amountTokenCommittedInLP)\r\n    }\r\n    if (limitPerUserInLP.isGreaterThan(0)) {\r\n      return limitPerUserInLP.isLessThanOrEqualTo(creditLeft) ? limitPerUserInLP : creditLeft\r\n    }\r\n    return creditLeft\r\n  }, [creditLeft, limitPerUserInLP, amountTokenCommittedInLP])\r\n\r\n  // include user balance for input\r\n  const maximumTokenCommittable = useMemo(() => {\r\n    return maximumTokenEntry.isLessThanOrEqualTo(userCurrencyBalance) ? maximumTokenEntry : userCurrencyBalance\r\n  }, [maximumTokenEntry, userCurrencyBalance])\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    poolId === PoolIds.poolBasic\r\n      ? t(\r\n          'For the basic sale, Max CAKE entry is capped by minimum between your average CAKE balance in the IFO CAKE pool, or the pools hard cap. To increase the max entry, Stake more CAKE into the IFO CAKE pool',\r\n        )\r\n      : t(\r\n          'For the unlimited sale, Max CAKE entry is capped by your average CAKE balance in the IFO CAKE pool. To increase the max entry, Stake more CAKE into the IFO CAKE pool',\r\n        ),\r\n    {},\r\n  )\r\n\r\n  const isWarning =\r\n    valueWithTokenDecimals.isGreaterThan(userCurrencyBalance) || valueWithTokenDecimals.isGreaterThan(maximumTokenEntry)\r\n\r\n  return (\r\n    <Modal title={t('Contribute %symbol%', { symbol: currency.symbol })} onDismiss={onDismiss}>\r\n      <ModalBody maxWidth=\"360px\">\r\n        <Box p=\"2px\">\r\n          <Flex justifyContent=\"space-between\" mb=\"16px\">\r\n            {tooltipVisible && tooltip}\r\n            <TooltipText ref={targetRef}>{label}:</TooltipText>\r\n            <Text>{`${formatNumber(getBalanceAmount(maximumTokenEntry, currency.decimals).toNumber(), 3, 3)} ${\r\n              ifo.currency.symbol\r\n            }`}</Text>\r\n          </Flex>\r\n          <Flex justifyContent=\"space-between\" mb=\"8px\">\r\n            <Text>{t('Commit')}:</Text>\r\n            <Flex flexGrow={1} justifyContent=\"flex-end\">\r\n              <Image\r\n                src={\r\n                  ifo.currency.symbol === 'CAKE'\r\n                    ? '/images/cake.svg'\r\n                    : `/images/farms/${currency.symbol.split(' ')[0].toLocaleLowerCase()}.svg`\r\n                }\r\n                width={24}\r\n                height={24}\r\n              />\r\n              <Text ml=\"4px\">{currency.symbol}</Text>\r\n            </Flex>\r\n          </Flex>\r\n          <BalanceInput\r\n            value={value}\r\n            currencyValue={publicIfoData.currencyPriceInUSD.times(value || 0).toFixed(2)}\r\n            onUserInput={setValue}\r\n            isWarning={isWarning}\r\n            decimals={currency.decimals}\r\n            onBlur={() => {\r\n              if (isWarning) {\r\n                // auto adjust to max value\r\n                setValue(getBalanceAmount(maximumTokenCommittable).toString())\r\n              }\r\n            }}\r\n            mb=\"8px\"\r\n          />\r\n          {isWarning && (\r\n            <Text\r\n              color={valueWithTokenDecimals.isGreaterThan(userCurrencyBalance) ? 'failure' : 'warning'}\r\n              textAlign=\"right\"\r\n              fontSize=\"12px\"\r\n              mb=\"8px\"\r\n            >\r\n              {valueWithTokenDecimals.isGreaterThan(userCurrencyBalance)\r\n                ? t('Insufficient Balance')\r\n                : t('Exceeded max CAKE entry')}\r\n            </Text>\r\n          )}\r\n          <Text color=\"textSubtle\" textAlign=\"right\" fontSize=\"12px\" mb=\"16px\">\r\n            {t('Balance: %balance%', {\r\n              balance: getBalanceAmount(userCurrencyBalance, currency.decimals).toString(),\r\n            })}\r\n          </Text>\r\n          <Flex justifyContent=\"space-between\" mb=\"16px\">\r\n            {multiplierValues.map((multiplierValue, index) => (\r\n              <Button\r\n                key={multiplierValue}\r\n                scale=\"xs\"\r\n                variant=\"tertiary\"\r\n                onClick={() => setValue(getBalanceAmount(maximumTokenCommittable.times(multiplierValue)).toString())}\r\n                mr={index < multiplierValues.length - 1 ? '8px' : 0}\r\n              >\r\n                {multiplierValue * 100}%\r\n              </Button>\r\n            ))}\r\n          </Flex>\r\n          <Text color=\"textSubtle\" fontSize=\"12px\" mb=\"24px\">\r\n            {t(\r\n              'If you dont commit enough CAKE, you may not receive any IFO tokens at all and will only receive a full refund of your CAKE.',\r\n            )}\r\n            <Link\r\n              fontSize=\"12px\"\r\n              display=\"inline\"\r\n              href=\"https://docs.pancakeswap.finance/products/ifo-initial-farm-offering\"\r\n              external\r\n            >\r\n              {t('Read more')}\r\n            </Link>\r\n          </Text>\r\n          <ApproveConfirmButtons\r\n            isApproveDisabled={isConfirmed || isConfirming || isApproved}\r\n            isApproving={isApproving}\r\n            isConfirmDisabled={\r\n              !isApproved || isConfirmed || valueWithTokenDecimals.isNaN() || valueWithTokenDecimals.eq(0) || isWarning\r\n            }\r\n            isConfirming={isConfirming}\r\n            onApprove={handleApprove}\r\n            onConfirm={handleConfirm}\r\n          />\r\n        </Box>\r\n      </ModalBody>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default ContributeModal\r\n","import React from 'react'\r\nimport { useBlock } from 'state/block/hooks'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Button, useModal } from '@pancakeswap/uikit'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { WalletIfoData, PublicIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useTokenBalance from 'hooks/useTokenBalance'\r\nimport useToast from 'hooks/useToast'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport GetTokenModal from './GetTokenModal'\r\nimport ContributeModal from './ContributeModal'\r\n\r\ninterface Props {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n}\r\nconst ContributeButton: React.FC<Props> = ({ poolId, ifo, publicIfoData, walletIfoData }) => {\r\n  const publicPoolCharacteristics = publicIfoData[poolId]\r\n  const userPoolCharacteristics = walletIfoData[poolId]\r\n  const { isPendingTx, amountTokenCommittedInLP } = userPoolCharacteristics\r\n  const { limitPerUserInLP } = publicPoolCharacteristics\r\n  const { t } = useTranslation()\r\n  const { toastSuccess } = useToast()\r\n  const { currentBlock } = useBlock()\r\n  const { balance: userCurrencyBalance } = useTokenBalance(ifo.currency.address)\r\n\r\n  // Refetch all the data, and display a message when fetching is done\r\n  const handleContributeSuccess = async (amount: BigNumber, txHash: string) => {\r\n    await Promise.all([publicIfoData.fetchIfoData(currentBlock), walletIfoData.fetchIfoData()])\r\n    toastSuccess(\r\n      t('Success!'),\r\n      <ToastDescriptionWithTx txHash={txHash}>\r\n        {t('You have contributed %amount% CAKE to this IFO!', {\r\n          amount: getBalanceNumber(amount),\r\n        })}\r\n      </ToastDescriptionWithTx>,\r\n    )\r\n  }\r\n\r\n  const [onPresentContributeModal] = useModal(\r\n    <ContributeModal\r\n      poolId={poolId}\r\n      creditLeft={walletIfoData.ifoCredit?.creditLeft}\r\n      ifo={ifo}\r\n      publicIfoData={publicIfoData}\r\n      walletIfoData={walletIfoData}\r\n      onSuccess={handleContributeSuccess}\r\n      userCurrencyBalance={userCurrencyBalance}\r\n    />,\r\n    false,\r\n  )\r\n\r\n  const [onPresentGetTokenModal] = useModal(<GetTokenModal currency={ifo.currency} />, false)\r\n\r\n  const isDisabled =\r\n    isPendingTx ||\r\n    (walletIfoData.ifoCredit?.creditLeft && walletIfoData.ifoCredit?.creditLeft.isLessThanOrEqualTo(0)) ||\r\n    (limitPerUserInLP.isGreaterThan(0) && amountTokenCommittedInLP.isGreaterThanOrEqualTo(limitPerUserInLP))\r\n\r\n  return (\r\n    <Button\r\n      onClick={userCurrencyBalance.isEqualTo(0) ? onPresentGetTokenModal : onPresentContributeModal}\r\n      width=\"100%\"\r\n      disabled={isDisabled}\r\n    >\r\n      {isDisabled ? t('Max. Committed') : t('Commit CAKE')}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default ContributeButton\r\n","import React from 'react'\r\nimport { AutoRenewIcon, Button } from '@pancakeswap/uikit'\r\nimport { PoolIds } from 'config/constants/types'\r\nimport { WalletIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useToast from 'hooks/useToast'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\n\r\ninterface Props {\r\n  poolId: PoolIds\r\n  ifoVersion: number\r\n  walletIfoData: WalletIfoData\r\n}\r\n\r\nconst ClaimButton: React.FC<Props> = ({ poolId, ifoVersion, walletIfoData }) => {\r\n  const userPoolCharacteristics = walletIfoData[poolId]\r\n  const { t } = useTranslation()\r\n  const { toastError, toastSuccess } = useToast()\r\n\r\n  const setPendingTx = (isPending: boolean) => walletIfoData.setPendingTx(isPending, poolId)\r\n\r\n  const handleClaim = async () => {\r\n    try {\r\n      let txHash\r\n      setPendingTx(true)\r\n\r\n      if (ifoVersion === 1) {\r\n        const tx = await walletIfoData.contract.harvest()\r\n        const receipt = await tx.wait()\r\n        txHash = receipt.transactionHash\r\n      } else {\r\n        const tx = await walletIfoData.contract.harvestPool(poolId === PoolIds.poolBasic ? 0 : 1)\r\n        const receipt = await tx.wait()\r\n        txHash = receipt.transactionHash\r\n      }\r\n\r\n      walletIfoData.setIsClaimed(poolId)\r\n      toastSuccess(\r\n        t('Success!'),\r\n        <ToastDescriptionWithTx txHash={txHash}>\r\n          {t('You have successfully claimed your rewards.')}\r\n        </ToastDescriptionWithTx>,\r\n      )\r\n    } catch (error) {\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      console.error(error)\r\n    } finally {\r\n      setPendingTx(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Button\r\n      onClick={handleClaim}\r\n      disabled={userPoolCharacteristics.isPendingTx}\r\n      width=\"100%\"\r\n      isLoading={userPoolCharacteristics.isPendingTx}\r\n      endIcon={userPoolCharacteristics.isPendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n    >\r\n      {t('Claim')}\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default ClaimButton\r\n","import React from 'react'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Button } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Link } from 'react-router-dom'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { WalletIfoData, PublicIfoData } from 'views/Ifos/types'\r\nimport { nftsBaseUrl } from 'views/Nft/market/constants'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport ContributeButton from './ContributeButton'\r\nimport ClaimButton from './ClaimButton'\r\nimport { SkeletonCardActions } from './Skeletons'\r\n\r\ninterface Props {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n  hasProfile: boolean\r\n  isLoading: boolean\r\n}\r\n\r\nconst IfoCardActions: React.FC<Props> = ({ poolId, ifo, publicIfoData, walletIfoData, hasProfile, isLoading }) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const userPoolCharacteristics = walletIfoData[poolId]\r\n\r\n  if (isLoading) {\r\n    return <SkeletonCardActions />\r\n  }\r\n\r\n  if (!account) {\r\n    return <ConnectWalletButton width=\"100%\" />\r\n  }\r\n\r\n  if (!hasProfile) {\r\n    return (\r\n      <Button as={Link} to={`${nftsBaseUrl}/profile/${account.toLowerCase()}`} width=\"100%\">\r\n        {t('Activate your Profile')}\r\n      </Button>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {publicIfoData.status === 'live' && (\r\n        <ContributeButton poolId={poolId} ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n      )}\r\n      {publicIfoData.status === 'finished' &&\r\n        !userPoolCharacteristics.hasClaimed &&\r\n        (userPoolCharacteristics.offeringAmountInToken.isGreaterThan(0) ||\r\n          userPoolCharacteristics.refundingAmountInLP.isGreaterThan(0)) && (\r\n          <ClaimButton poolId={poolId} ifoVersion={ifo.version} walletIfoData={walletIfoData} />\r\n        )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default IfoCardActions\r\n","import React, { ReactNode } from 'react'\r\nimport tokens from 'config/constants/tokens'\r\nimport { Text, Flex, Box, Skeleton, TooltipText, useTooltip } from '@pancakeswap/uikit'\r\nimport { PublicIfoData, WalletIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { getBalanceNumber, formatNumber } from 'utils/formatBalance'\r\nimport useBUSDPrice from 'hooks/useBUSDPrice'\r\nimport { multiplyPriceByAmount } from 'utils/prices'\r\nimport { SkeletonCardDetails } from './Skeletons'\r\n\r\nexport interface IfoCardDetailsProps {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n}\r\n\r\nexport interface FooterEntryProps {\r\n  label: ReactNode\r\n  value: string | number\r\n}\r\n\r\nconst FooterEntry: React.FC<FooterEntryProps> = ({ label, value }) => {\r\n  return (\r\n    <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n      <Text small color=\"textSubtle\">\r\n        {label}\r\n      </Text>\r\n      {value ? (\r\n        <Text small textAlign=\"right\">\r\n          {value}\r\n        </Text>\r\n      ) : (\r\n        <Skeleton height={21} width={80} />\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nconst MaxTokenEntry = ({ maxToken, ifo, poolId }: { maxToken: number; ifo: Ifo; poolId: PoolIds }) => {\r\n  const isCurrencyCake = ifo.currency === tokens.cake\r\n  const isV3 = ifo.version === 3\r\n  const { t } = useTranslation()\r\n\r\n  const tooltipContent =\r\n    poolId === PoolIds.poolBasic\r\n      ? t(\r\n          'For the basic sale, Max CAKE entry is capped by minimum between your average CAKE balance in the IFO CAKE pool, or the pools hard cap. To increase the max entry, Stake more CAKE into the IFO CAKE pool',\r\n        )\r\n      : t(\r\n          'For the unlimited sale, Max CAKE entry is capped by your average CAKE balance in the IFO CAKE pool. To increase the max entry, Stake more CAKE into the IFO CAEK pool',\r\n        )\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(tooltipContent, { placement: 'bottom-start' })\r\n  const label = isCurrencyCake ? t('Max. CAKE entry') : t('Max. token entry')\r\n  const price = useBUSDPrice(ifo.currency)\r\n\r\n  const dollarValueOfToken = multiplyPriceByAmount(price, maxToken, ifo.currency.decimals)\r\n\r\n  if (!isV3 && poolId === PoolIds.poolUnlimited) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {isV3 && tooltipVisible && tooltip}\r\n      <FooterEntry\r\n        label={\r\n          isV3 ? (\r\n            <TooltipText small color=\"textSubtle\" ref={targetRef}>\r\n              {label}\r\n            </TooltipText>\r\n          ) : (\r\n            label\r\n          )\r\n        }\r\n        value={`${formatNumber(maxToken, 3, 3)} ${!isCurrencyCake ? ifo.currency.symbol : ''} ${\r\n          dollarValueOfToken > 0 ? ` ~($${dollarValueOfToken.toFixed(0)})` : ''\r\n        }`}\r\n      />\r\n    </>\r\n  )\r\n}\r\n\r\nconst IfoCardDetails: React.FC<IfoCardDetailsProps> = ({ poolId, ifo, publicIfoData, walletIfoData }) => {\r\n  const { t } = useTranslation()\r\n  const { status, currencyPriceInUSD } = publicIfoData\r\n  const poolCharacteristic = publicIfoData[poolId]\r\n\r\n  let version3MaxTokens = walletIfoData.ifoCredit?.creditLeft\r\n    ? // if creditLeft > limit show limit else show creditLeft\r\n      walletIfoData.ifoCredit.creditLeft.gt(poolCharacteristic.limitPerUserInLP)\r\n      ? poolCharacteristic.limitPerUserInLP\r\n      : walletIfoData.ifoCredit.creditLeft\r\n    : null\r\n\r\n  // unlimited pool just show the credit left\r\n  version3MaxTokens = poolId === PoolIds.poolUnlimited ? walletIfoData.ifoCredit?.creditLeft : version3MaxTokens\r\n\r\n  /* Format start */\r\n  const maxLpTokens =\r\n    ifo.version === 3\r\n      ? version3MaxTokens\r\n        ? getBalanceNumber(version3MaxTokens, ifo.currency.decimals)\r\n        : 0\r\n      : getBalanceNumber(poolCharacteristic.limitPerUserInLP, ifo.currency.decimals)\r\n  const taxRate = `${poolCharacteristic.taxRate}%`\r\n\r\n  const totalCommittedPercent = poolCharacteristic.totalAmountPool\r\n    .div(poolCharacteristic.raisingAmountPool)\r\n    .times(100)\r\n    .toFixed(2)\r\n  const totalLPCommitted = getBalanceNumber(poolCharacteristic.totalAmountPool, ifo.currency.decimals)\r\n  const totalLPCommittedInUSD = currencyPriceInUSD.times(totalLPCommitted)\r\n  const totalCommitted = `~$${formatNumber(totalLPCommittedInUSD.toNumber(), 0, 0)} (${totalCommittedPercent}%)`\r\n\r\n  const sumTaxesOverflow = poolCharacteristic.totalAmountPool.times(poolCharacteristic.taxRate).times(0.01)\r\n  const pricePerTokenWithFeeToOriginalRatio = sumTaxesOverflow\r\n    .plus(poolCharacteristic.raisingAmountPool)\r\n    .div(poolCharacteristic.offeringAmountPool)\r\n    .div(poolCharacteristic.raisingAmountPool.div(poolCharacteristic.offeringAmountPool))\r\n  const pricePerTokenWithFee = `~$${formatNumber(\r\n    pricePerTokenWithFeeToOriginalRatio.times(ifo.tokenOfferingPrice).toNumber(),\r\n    0,\r\n    2,\r\n  )}`\r\n\r\n  const tokenEntry = <MaxTokenEntry poolId={poolId} ifo={ifo} maxToken={maxLpTokens} />\r\n\r\n  /* Format end */\r\n  const renderBasedOnIfoStatus = () => {\r\n    if (status === 'coming_soon') {\r\n      return (\r\n        <>\r\n          {tokenEntry}\r\n          <FooterEntry label={t('Funds to raise:')} value={ifo[poolId].raiseAmount} />\r\n          {ifo[poolId].cakeToBurn !== '$0' && <FooterEntry label={t('CAKE to burn:')} value={ifo[poolId].cakeToBurn} />}\r\n          <FooterEntry\r\n            label={t('Price per %symbol%:', { symbol: ifo.token.symbol })}\r\n            value={`$${ifo.tokenOfferingPrice}`}\r\n          />\r\n        </>\r\n      )\r\n    }\r\n    if (status === 'live') {\r\n      return (\r\n        <>\r\n          {tokenEntry}\r\n          {poolId === PoolIds.poolBasic && (\r\n            <FooterEntry\r\n              label={t('Price per %symbol%:', { symbol: ifo.token.symbol })}\r\n              value={`$${ifo.tokenOfferingPrice}`}\r\n            />\r\n          )}\r\n          {poolId === PoolIds.poolUnlimited && <FooterEntry label={t('Additional fee:')} value={taxRate} />}\r\n          {poolId === PoolIds.poolUnlimited && (\r\n            <FooterEntry\r\n              label={t('Price per %symbol% with fee:', { symbol: ifo.token.symbol })}\r\n              value={pricePerTokenWithFee}\r\n            />\r\n          )}\r\n          <FooterEntry label={t('Total committed:')} value={currencyPriceInUSD.gt(0) ? totalCommitted : null} />\r\n        </>\r\n      )\r\n    }\r\n    if (status === 'finished') {\r\n      return (\r\n        <>\r\n          {tokenEntry}\r\n          {poolId === PoolIds.poolUnlimited && <FooterEntry label={t('Additional fee:')} value={taxRate} />}\r\n          <FooterEntry label={t('Total committed:')} value={currencyPriceInUSD.gt(0) ? totalCommitted : null} />\r\n          <FooterEntry label={t('Funds to raise:')} value={ifo[poolId].raiseAmount} />\r\n          {ifo[poolId].cakeToBurn !== '$0' && <FooterEntry label={t('CAKE to burn:')} value={ifo[poolId].cakeToBurn} />}\r\n          {ifo.version > 1 && (\r\n            <FooterEntry\r\n              label={t('Price per %symbol%:', { symbol: ifo.token.symbol })}\r\n              value={`$${ifo.tokenOfferingPrice ? ifo.tokenOfferingPrice : '?'}`}\r\n            />\r\n          )}\r\n          {ifo.version > 1 && poolId === PoolIds.poolUnlimited && (\r\n            <FooterEntry\r\n              label={t('Price per %symbol% with fee:', { symbol: ifo.token.symbol })}\r\n              value={pricePerTokenWithFee}\r\n            />\r\n          )}\r\n        </>\r\n      )\r\n    }\r\n    return <SkeletonCardDetails />\r\n  }\r\n\r\n  return <Box paddingTop=\"24px\">{renderBasedOnIfoStatus()}</Box>\r\n}\r\n\r\nexport default IfoCardDetails\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { ContextApi } from 'contexts/Localization/types'\r\nimport { Box, Card, CardBody, CardHeader, Flex, HelpIcon, Text, useTooltip } from '@pancakeswap/uikit'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { useProfile } from 'state/profile/hooks'\r\nimport { PublicIfoData, WalletIfoData } from 'views/Ifos/types'\r\nimport { EnableStatus } from '../types'\r\nimport IfoCardTokens from './IfoCardTokens'\r\nimport IfoCardActions from './IfoCardActions'\r\nimport IfoCardDetails from './IfoCardDetails'\r\n\r\nconst StyledCard = styled(Card)`\r\n  background: none;\r\n  max-width: 368px;\r\n  width: 100%;\r\n  margin: 0 auto;\r\n  height: fit-content;\r\n`\r\n\r\ninterface IfoCardProps {\r\n  poolId: PoolIds\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n  onApprove: () => Promise<any>\r\n  enableStatus: EnableStatus\r\n}\r\n\r\nconst cardConfig = (\r\n  t: ContextApi['t'],\r\n  poolId: PoolIds,\r\n): {\r\n  title: string\r\n  variant: 'blue' | 'violet'\r\n  tooltip: string\r\n} => {\r\n  switch (poolId) {\r\n    case PoolIds.poolBasic:\r\n      return {\r\n        title: t('Basic Sale'),\r\n        variant: 'blue',\r\n        tooltip: t(\r\n          'Every person can only commit a limited amount, but may expect a higher return per token committed.',\r\n        ),\r\n      }\r\n    case PoolIds.poolUnlimited:\r\n      return {\r\n        title: t('Unlimited Sale'),\r\n        variant: 'violet',\r\n        tooltip: t('No limits on the amount you can commit. Additional fee applies when claiming.'),\r\n      }\r\n    default:\r\n      return { title: '', variant: 'blue', tooltip: '' }\r\n  }\r\n}\r\n\r\nconst SmallCard: React.FC<IfoCardProps> = ({ poolId, ifo, publicIfoData, walletIfoData, onApprove, enableStatus }) => {\r\n  const { t } = useTranslation()\r\n  const config = cardConfig(t, poolId)\r\n  const { hasProfile, isLoading: isProfileLoading } = useProfile()\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(config.tooltip, { placement: 'bottom' })\r\n\r\n  const isLoading = isProfileLoading || publicIfoData.status === 'idle'\r\n\r\n  return (\r\n    <>\r\n      {tooltipVisible && tooltip}\r\n      <StyledCard>\r\n        <CardHeader p=\"16px 24px\" variant={config.variant}>\r\n          <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n            <Text bold fontSize=\"20px\" lineHeight={1}>\r\n              {config.title}\r\n            </Text>\r\n            <div ref={targetRef}>\r\n              <HelpIcon />\r\n            </div>\r\n          </Flex>\r\n        </CardHeader>\r\n        <CardBody p=\"12px\">\r\n          <IfoCardTokens\r\n            poolId={poolId}\r\n            ifo={ifo}\r\n            publicIfoData={publicIfoData}\r\n            walletIfoData={walletIfoData}\r\n            hasProfile={hasProfile}\r\n            isLoading={isLoading}\r\n            onApprove={onApprove}\r\n            enableStatus={enableStatus}\r\n          />\r\n          <Box mt=\"24px\">\r\n            <IfoCardActions\r\n              poolId={poolId}\r\n              ifo={ifo}\r\n              publicIfoData={publicIfoData}\r\n              walletIfoData={walletIfoData}\r\n              hasProfile={hasProfile}\r\n              isLoading={isLoading}\r\n            />\r\n          </Box>\r\n          <IfoCardDetails poolId={poolId} ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n        </CardBody>\r\n      </StyledCard>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SmallCard\r\n","import React from 'react'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\nimport { Flex, Heading, PocketWatchIcon, Text, Skeleton } from '@pancakeswap/uikit'\r\nimport getTimePeriods from 'utils/getTimePeriods'\r\nimport { PublicIfoData } from 'views/Ifos/types'\r\n\r\ninterface Props {\r\n  publicIfoData: PublicIfoData\r\n}\r\n\r\nconst GradientText = styled(Heading)`\r\n  background: -webkit-linear-gradient(#ffd800, #eb8c00);\r\n  background-clip: text;\r\n  -webkit-background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  -webkit-text-stroke: 1px rgba(0, 0, 0, 0.5);\r\n`\r\n\r\nconst FlexGap = styled(Flex)<{ gap: string }>`\r\n  gap: ${({ gap }) => gap};\r\n`\r\n\r\nexport const SoonTimer: React.FC<Props> = ({ publicIfoData }) => {\r\n  const { t } = useTranslation()\r\n  const { status, secondsUntilStart } = publicIfoData\r\n  const timeUntil = getTimePeriods(secondsUntilStart)\r\n  return (\r\n    <Flex justifyContent=\"center\" position=\"relative\">\r\n      {status === 'idle' ? (\r\n        <Skeleton animation=\"pulse\" variant=\"rect\" width=\"100%\" height=\"48px\" />\r\n      ) : (\r\n        <>\r\n          <FlexGap gap=\"8px\" alignItems=\"center\">\r\n            <Heading as=\"h3\" scale=\"lg\" color=\"secondary\">\r\n              {t('Start in')}\r\n            </Heading>\r\n            <FlexGap gap=\"4px\" alignItems=\"baseline\">\r\n              {timeUntil.days && (\r\n                <>\r\n                  <Heading scale=\"lg\" color=\"secondary\">\r\n                    {timeUntil.days}\r\n                  </Heading>\r\n                  <Text color=\"secondary\">d</Text>\r\n                </>\r\n              )}\r\n              {timeUntil.hours && (\r\n                <>\r\n                  <Heading color=\"secondary\" scale=\"lg\">\r\n                    {timeUntil.hours}\r\n                  </Heading>\r\n                  <Text color=\"secondary\">h</Text>\r\n                </>\r\n              )}\r\n              {timeUntil.minutes && (\r\n                <>\r\n                  <Heading color=\"secondary\" scale=\"lg\">\r\n                    {timeUntil.minutes}\r\n                  </Heading>\r\n                  <Text color=\"secondary\">m</Text>\r\n                </>\r\n              )}\r\n            </FlexGap>\r\n          </FlexGap>\r\n        </>\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nconst EndInHeading = styled(Heading)`\r\n  color: white;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n  line-height: 1.1;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    font-size: 24px;\r\n  }\r\n`\r\n\r\nconst LiveNowHeading = styled(EndInHeading)`\r\n  color: white;\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    background: -webkit-linear-gradient(#ffd800, #eb8c00);\r\n    background-clip: text;\r\n    -webkit-background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    -webkit-text-stroke: 1px rgba(0, 0, 0, 0.5);\r\n  }\r\n`\r\n\r\nconst LiveTimer: React.FC<Props> = ({ publicIfoData }) => {\r\n  const { t } = useTranslation()\r\n  const { status, secondsUntilEnd } = publicIfoData\r\n  const timeUntil = getTimePeriods(secondsUntilEnd)\r\n  return (\r\n    <Flex justifyContent=\"center\" position=\"relative\">\r\n      {status === 'idle' ? (\r\n        <Skeleton animation=\"pulse\" variant=\"rect\" width=\"100%\" height=\"48px\" />\r\n      ) : (\r\n        <>\r\n          <PocketWatchIcon width=\"42px\" mr=\"8px\" />\r\n          <FlexGap gap=\"8px\" alignItems=\"center\">\r\n            <LiveNowHeading as=\"h3\">{`${t('Live Now').toUpperCase()}!`}</LiveNowHeading>\r\n            <EndInHeading as=\"h3\" scale=\"lg\" color=\"white\">\r\n              {t('Ends in')}\r\n            </EndInHeading>\r\n            <FlexGap gap=\"4px\" alignItems=\"baseline\">\r\n              {timeUntil.days && (\r\n                <>\r\n                  <GradientText scale=\"lg\">{timeUntil.days}</GradientText>\r\n                  <Text color=\"white\">d</Text>\r\n                </>\r\n              )}\r\n              {timeUntil.hours && (\r\n                <>\r\n                  <GradientText scale=\"lg\">{timeUntil.hours}</GradientText>\r\n                  <Text color=\"white\">h</Text>\r\n                </>\r\n              )}\r\n              {timeUntil.minutes && (\r\n                <>\r\n                  <GradientText scale=\"lg\">{timeUntil.minutes}</GradientText>\r\n                  <Text color=\"white\">m</Text>\r\n                </>\r\n              )}\r\n            </FlexGap>\r\n          </FlexGap>\r\n        </>\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default LiveTimer\r\n","import { Box, Flex, Heading, Progress, ProgressBar } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport React from 'react'\r\nimport styled from 'styled-components'\r\nimport { PublicIfoData } from '../../types'\r\nimport LiveTimer, { SoonTimer } from './Timer'\r\n\r\nconst BigCurve = styled(Box)<{ $status: PublicIfoData['status'] }>`\r\n  width: 150%;\r\n  position: absolute;\r\n  top: -150%;\r\n  bottom: 0;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    border-radius: 50%;\r\n  }\r\n\r\n  ${({ $status, theme }) => {\r\n    switch ($status) {\r\n      case 'coming_soon':\r\n        return `\r\n          background: ${theme.colors.tertiary};\r\n        `\r\n      case 'live':\r\n        return `\r\n          background: linear-gradient(#8051D6 100%, #492286 100%);\r\n        `\r\n      case 'finished':\r\n        return `\r\n          background: ${theme.colors.input};\r\n        `\r\n      default:\r\n        return ''\r\n    }\r\n  }}\r\n`\r\n\r\nexport const IfoRibbon = ({ publicIfoData }: { publicIfoData: PublicIfoData }) => {\r\n  const { status } = publicIfoData\r\n\r\n  let Component\r\n  if (status === 'finished') {\r\n    Component = <IfoRibbonEnd />\r\n  } else if (status === 'live') {\r\n    Component = <IfoRibbonLive publicIfoData={publicIfoData} />\r\n  } else if (status === 'coming_soon') {\r\n    Component = <IfoRibbonSoon publicIfoData={publicIfoData} />\r\n  }\r\n\r\n  if (status === 'idle') {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {status === 'live' && (\r\n        <Progress variant=\"flat\">\r\n          <ProgressBar\r\n            $useDark\r\n            $background=\"linear-gradient(273deg, #ffd800 -2.87%, #eb8c00 113.73%)\"\r\n            style={{ width: `${Math.min(Math.max(publicIfoData.progress, 0), 100)}%` }}\r\n          />\r\n        </Progress>\r\n      )}\r\n      <Flex\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n        flexDirection=\"column\"\r\n        minHeight={['48px', '48px', '48px', '75px']}\r\n        position=\"relative\"\r\n        overflow=\"hidden\"\r\n      >\r\n        {Component}\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n\r\nconst IfoRibbonEnd = () => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <>\r\n      <BigCurve $status=\"finished\" />\r\n      <Box position=\"relative\">\r\n        <Heading as=\"h3\" scale=\"lg\" color=\"textSubtle\">\r\n          {t('Sale Finished!')}\r\n        </Heading>\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n\r\nconst IfoRibbonSoon = ({ publicIfoData }: { publicIfoData: PublicIfoData }) => {\r\n  return (\r\n    <>\r\n      <BigCurve $status=\"coming_soon\" />\r\n      <Box position=\"relative\">\r\n        <Heading as=\"h3\" scale=\"lg\" color=\"secondary\">\r\n          <SoonTimer publicIfoData={publicIfoData} />\r\n        </Heading>\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n\r\nconst IfoRibbonLive = ({ publicIfoData }: { publicIfoData: PublicIfoData }) => {\r\n  return (\r\n    <>\r\n      <BigCurve $status=\"live\" />\r\n      <Box position=\"relative\">\r\n        <LiveTimer publicIfoData={publicIfoData} />\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n","import {\r\n  Box,\r\n  Card,\r\n  CardBody,\r\n  CardFooter,\r\n  CardHeader,\r\n  ExpandableLabel,\r\n  ExpandableButton,\r\n  useMatchBreakpoints,\r\n} from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useERC20 } from 'hooks/useContract'\r\nimport useRefresh from 'hooks/useRefresh'\r\nimport useToast from 'hooks/useToast'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useBlock } from 'state/block/hooks'\r\nimport styled from 'styled-components'\r\nimport { PublicIfoData, WalletIfoData } from 'views/Ifos/types'\r\nimport useIsWindowVisible from '../../../../hooks/useIsWindowVisible'\r\nimport useIfoApprove from '../../hooks/useIfoApprove'\r\nimport IfoAchievement from './Achievement'\r\nimport IfoPoolCard from './IfoPoolCard'\r\nimport { EnableStatus } from './types'\r\nimport { IfoRibbon } from './IfoRibbon'\r\n\r\ninterface IfoFoldableCardProps {\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n}\r\n\r\nconst StyledCard = styled(Card)<{ $isCurrent?: boolean }>`\r\n  width: 100%;\r\n  margin: auto;\r\n  border-top-left-radius: 32px;\r\n  border-top-right-radius: 32px;\r\n\r\n  ${({ $isCurrent }) =>\r\n    $isCurrent &&\r\n    `\r\n  border-top-left-radius: 0;\r\n  border-top-right-radius: 0;\r\n  > div {\r\n    border-top-left-radius: 0;\r\n    border-top-right-radius: 0;\r\n  }\r\n  `}\r\n\r\n  > div {\r\n    background: ${({ theme, $isCurrent }) => ($isCurrent ? theme.colors.gradients.bubblegum : theme.colors.dropdown)};\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    border-top-left-radius: 32px;\r\n    border-top-right-radius: 32px;\r\n\r\n    > div {\r\n      border-top-left-radius: 32px;\r\n      border-top-right-radius: 32px;\r\n    }\r\n  }\r\n`\r\n\r\nconst Header = styled(CardHeader)<{ ifoId: string; $isCurrent?: boolean }>`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  align-items: center;\r\n  height: ${({ $isCurrent }) => ($isCurrent ? '64px' : '112px')};\r\n  background-repeat: no-repeat;\r\n  background-size: cover;\r\n  background-position: center;\r\n  border-top-left-radius: 32px;\r\n  border-top-right-radius: 32px;\r\n  background-image: ${({ ifoId }) => `url('/images/ifos/${ifoId}-bg.svg'), url('/images/ifos/${ifoId}-bg.png')`};\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    height: 112px;\r\n  }\r\n`\r\n\r\nconst CardsWrapper = styled.div<{ singleCard: boolean }>`\r\n  display: grid;\r\n  grid-gap: 32px;\r\n  grid-template-columns: 1fr;\r\n  ${({ theme }) => theme.mediaQueries.xxl} {\r\n    grid-template-columns: ${({ singleCard }) => (singleCard ? '1fr' : '1fr 1fr')};\r\n    justify-items: ${({ singleCard }) => (singleCard ? 'center' : 'unset')};\r\n  }\r\n`\r\n\r\nconst StyledCardBody = styled(CardBody)`\r\n  padding: 24px 16px;\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    padding: 24px;\r\n  }\r\n`\r\n\r\nconst StyledCardFooter = styled(CardFooter)`\r\n  padding: 0;\r\n  background: ${({ theme }) => theme.colors.backgroundAlt};\r\n  text-align: center;\r\n`\r\n\r\nconst StyledNoHatBunny = styled.div<{ $isLive: boolean; $isCurrent?: boolean }>`\r\n  position: absolute;\r\n  left: -24px;\r\n  z-index: 1;\r\n  top: 33px;\r\n\r\n  > img {\r\n    width: 78px;\r\n  }\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    top: ${({ $isLive }) => ($isLive ? '46px' : '33px')};\r\n  }\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    left: auto;\r\n    top: ${({ $isLive }) => ($isLive ? '61px' : '48px')};\r\n    right: ${({ $isCurrent }) => ($isCurrent ? '17px' : '90px')};\r\n\r\n    > img {\r\n      width: 123px;\r\n    }\r\n  }\r\n  ${({ theme }) => theme.mediaQueries.lg} {\r\n    right: ${({ $isCurrent }) => ($isCurrent ? '67px' : '90px')};\r\n  }\r\n  ${({ theme }) => theme.mediaQueries.xxl} {\r\n    right: 90px;\r\n  }\r\n`\r\n\r\nconst NoHatBunny = ({ isLive, isCurrent }: { isLive?: boolean; isCurrent?: boolean }) => {\r\n  const { isXs, isSm, isMd } = useMatchBreakpoints()\r\n  const isSmallerThanTablet = isXs || isSm || isMd\r\n  if (isSmallerThanTablet && isLive) return null\r\n  return (\r\n    <StyledNoHatBunny $isLive={isLive} $isCurrent={isCurrent}>\r\n      <img\r\n        src={`/images/ifos/assets/bunnypop-${!isSmallerThanTablet ? 'right' : 'left'}.png`}\r\n        width={123}\r\n        height={162}\r\n        alt=\"bunny\"\r\n      />\r\n    </StyledNoHatBunny>\r\n  )\r\n}\r\n\r\n// Active Ifo\r\nexport const IfoCurrentCard = ({\r\n  ifo,\r\n  publicIfoData,\r\n  walletIfoData,\r\n}: {\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n}) => {\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n  const { t } = useTranslation()\r\n  const { isMobile } = useMatchBreakpoints()\r\n\r\n  const shouldShowBunny = publicIfoData.status === 'live' || publicIfoData.status === 'coming_soon'\r\n\r\n  return (\r\n    <>\r\n      {isMobile && (\r\n        <Box\r\n          className=\"sticky-header\"\r\n          position=\"sticky\"\r\n          bottom=\"48px\"\r\n          width=\"100%\"\r\n          zIndex={6}\r\n          maxWidth={['400px', '400px', '400px', '100%']}\r\n        >\r\n          <Header $isCurrent ifoId={ifo.id} />\r\n          <IfoRibbon publicIfoData={publicIfoData} />\r\n          {shouldShowBunny && <NoHatBunny isLive={publicIfoData.status === 'live'} />}\r\n        </Box>\r\n      )}\r\n      <Box position=\"relative\" width=\"100%\" maxWidth={['400px', '400px', '400px', '100%']}>\r\n        {!isMobile && shouldShowBunny && <NoHatBunny isCurrent isLive={publicIfoData.status === 'live'} />}\r\n        <StyledCard $isCurrent>\r\n          {!isMobile && (\r\n            <>\r\n              <Header $isCurrent ifoId={ifo.id} />\r\n              <IfoRibbon publicIfoData={publicIfoData} />\r\n            </>\r\n          )}\r\n          <IfoCard ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n          <StyledCardFooter>\r\n            <ExpandableLabel expanded={isExpanded} onClick={() => setIsExpanded(!isExpanded)}>\r\n              {isExpanded ? t('Hide') : t('Details')}\r\n            </ExpandableLabel>\r\n            {isExpanded && <IfoAchievement ifo={ifo} publicIfoData={publicIfoData} />}\r\n          </StyledCardFooter>\r\n        </StyledCard>\r\n      </Box>\r\n    </>\r\n  )\r\n}\r\n\r\nconst FoldableContent = styled.div<{ isVisible: boolean }>`\r\n  display: ${({ isVisible }) => (isVisible ? 'block' : 'none')};\r\n`\r\n\r\n// Past Ifo\r\nconst IfoFoldableCard = ({\r\n  ifo,\r\n  publicIfoData,\r\n  walletIfoData,\r\n}: {\r\n  ifo: Ifo\r\n  publicIfoData: PublicIfoData\r\n  walletIfoData: WalletIfoData\r\n}) => {\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n  const { isDesktop } = useMatchBreakpoints()\r\n\r\n  return (\r\n    <Box position=\"relative\">\r\n      {isExpanded && isDesktop && <NoHatBunny isLive={false} />}\r\n      <Box as={StyledCard} borderRadius=\"32px\">\r\n        <Box position=\"relative\">\r\n          <Header ifoId={ifo.id}>\r\n            <ExpandableButton expanded={isExpanded} onClick={() => setIsExpanded((prev) => !prev)} />\r\n          </Header>\r\n          {isExpanded && (\r\n            <>\r\n              <IfoRibbon publicIfoData={publicIfoData} />\r\n            </>\r\n          )}\r\n        </Box>\r\n        <FoldableContent isVisible={isExpanded}>\r\n          <IfoCard ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n          <IfoAchievement ifo={ifo} publicIfoData={publicIfoData} />\r\n        </FoldableContent>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst IfoCard: React.FC<IfoFoldableCardProps> = ({ ifo, publicIfoData, walletIfoData }) => {\r\n  const { currentBlock } = useBlock()\r\n  const { fetchIfoData: fetchPublicIfoData, isInitialized: isPublicIfoDataInitialized, secondsUntilEnd } = publicIfoData\r\n  const {\r\n    contract,\r\n    fetchIfoData: fetchWalletIfoData,\r\n    resetIfoData: resetWalletIfoData,\r\n    isInitialized: isWalletDataInitialized,\r\n  } = walletIfoData\r\n  const [enableStatus, setEnableStatus] = useState(EnableStatus.DISABLED)\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const raisingTokenContract = useERC20(ifo.currency.address)\r\n  // Continue to fetch 2 more minutes to get latest data\r\n  const isRecentlyActive =\r\n    (publicIfoData.status !== 'finished' || (publicIfoData.status === 'finished' && secondsUntilEnd >= -120)) &&\r\n    ifo.isActive\r\n  const onApprove = useIfoApprove(raisingTokenContract, contract.address)\r\n  const { toastSuccess } = useToast()\r\n  const { fastRefresh } = useRefresh()\r\n  const isWindowVisible = useIsWindowVisible()\r\n\r\n  useEffect(() => {\r\n    if (isRecentlyActive || !isPublicIfoDataInitialized) {\r\n      fetchPublicIfoData(currentBlock)\r\n    }\r\n  }, [isRecentlyActive, isPublicIfoDataInitialized, fetchPublicIfoData, currentBlock])\r\n\r\n  useEffect(() => {\r\n    if (isWindowVisible && (isRecentlyActive || !isWalletDataInitialized)) {\r\n      if (account) {\r\n        fetchWalletIfoData()\r\n      }\r\n    }\r\n\r\n    if (!account && isWalletDataInitialized) {\r\n      resetWalletIfoData()\r\n    }\r\n  }, [\r\n    isWindowVisible,\r\n    account,\r\n    isRecentlyActive,\r\n    isWalletDataInitialized,\r\n    fetchWalletIfoData,\r\n    resetWalletIfoData,\r\n    fastRefresh,\r\n  ])\r\n\r\n  const handleApprove = async () => {\r\n    try {\r\n      setEnableStatus(EnableStatus.IS_ENABLING)\r\n\r\n      const receipt = await onApprove()\r\n\r\n      setEnableStatus(EnableStatus.ENABLED)\r\n      toastSuccess(\r\n        t('Successfully Enabled!'),\r\n        <ToastDescriptionWithTx txHash={receipt.transactionHash}>\r\n          {t('You can now participate in the %symbol% IFO.', { symbol: ifo.token.symbol })}\r\n        </ToastDescriptionWithTx>,\r\n      )\r\n    } catch (error) {\r\n      setEnableStatus(EnableStatus.DISABLED)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const checkAllowance = async () => {\r\n      try {\r\n        const response = await raisingTokenContract.allowance(account, contract.address)\r\n        const currentAllowance = new BigNumber(response.toString())\r\n        setEnableStatus(currentAllowance.lte(0) ? EnableStatus.DISABLED : EnableStatus.ENABLED)\r\n      } catch (error) {\r\n        setEnableStatus(EnableStatus.DISABLED)\r\n      }\r\n    }\r\n\r\n    if (account) {\r\n      checkAllowance()\r\n    }\r\n  }, [account, raisingTokenContract, contract, setEnableStatus])\r\n\r\n  return (\r\n    <>\r\n      <StyledCardBody>\r\n        <CardsWrapper singleCard={!publicIfoData.poolBasic || !walletIfoData.poolBasic}>\r\n          {publicIfoData.poolBasic && walletIfoData.poolBasic && (\r\n            <IfoPoolCard\r\n              poolId={PoolIds.poolBasic}\r\n              ifo={ifo}\r\n              publicIfoData={publicIfoData}\r\n              walletIfoData={walletIfoData}\r\n              onApprove={handleApprove}\r\n              enableStatus={enableStatus}\r\n            />\r\n          )}\r\n          <IfoPoolCard\r\n            poolId={PoolIds.poolUnlimited}\r\n            ifo={ifo}\r\n            publicIfoData={publicIfoData}\r\n            walletIfoData={walletIfoData}\r\n            onApprove={handleApprove}\r\n            enableStatus={enableStatus}\r\n          />\r\n        </CardsWrapper>\r\n      </StyledCardBody>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default IfoFoldableCard\r\n","import { Box } from '@pancakeswap/uikit'\r\nimport styled from 'styled-components'\r\n\r\nconst IfoLayout = styled(Box)`\r\n  display: grid;\r\n  > div:not(.sticky-header) {\r\n    margin-bottom: 32px;\r\n  }\r\n`\r\nexport const IfoLayoutWrapper = styled(IfoLayout)`\r\n  column-gap: 32px;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    grid-template-columns: minmax(300px, 1fr) minmax(462px, 2fr);\r\n  }\r\n\r\n  > div {\r\n    margin: 0 auto;\r\n    align-items: flex-start;\r\n  }\r\n`\r\n\r\nexport default IfoLayout\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex, TooltipText, IconButton, useModal, CalculateIcon, Skeleton, useTooltip } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport Balance from 'components/Balance'\r\nimport RoiCalculatorModal from 'components/RoiCalculatorModal'\r\nimport { DeserializedPool } from 'state/types'\r\nimport BigNumber from 'bignumber.js'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { vaultPoolConfig } from 'config/constants/pools'\r\n\r\nconst ApyLabelContainer = styled(Flex)`\r\n  cursor: pointer;\r\n\r\n  &:hover {\r\n    opacity: 0.5;\r\n  }\r\n`\r\n\r\ninterface AprRowProps {\r\n  pool: DeserializedPool\r\n  stakedBalance: BigNumber\r\n  performanceFee?: number\r\n}\r\n\r\nconst AprRow: React.FC<AprRowProps> = ({ pool, stakedBalance, performanceFee = 0 }) => {\r\n  const { t } = useTranslation()\r\n  const {\r\n    stakingToken,\r\n    earningToken,\r\n    isFinished,\r\n    apr,\r\n    rawApr,\r\n    earningTokenPrice,\r\n    stakingTokenPrice,\r\n    userData,\r\n    vaultKey,\r\n  } = pool\r\n\r\n  const stakingTokenBalance = userData?.stakingTokenBalance ? new BigNumber(userData.stakingTokenBalance) : BIG_ZERO\r\n\r\n  const tooltipContent = vaultKey\r\n    ? t('APY includes compounding, APR doesnt. This pools CAKE is compounded automatically, so we show APY.')\r\n    : t('This pools rewards arent compounded automatically, so we show APR')\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(tooltipContent, { placement: 'bottom-start' })\r\n\r\n  const apyModalLink = stakingToken.address ? `/swap?outputCurrency=${stakingToken.address}` : '/swap'\r\n\r\n  const [onPresentApyModal] = useModal(\r\n    <RoiCalculatorModal\r\n      earningTokenPrice={earningTokenPrice}\r\n      stakingTokenPrice={stakingTokenPrice}\r\n      apr={vaultKey ? rawApr : apr}\r\n      linkLabel={t('Get %symbol%', { symbol: stakingToken.symbol })}\r\n      linkHref={apyModalLink}\r\n      stakingTokenBalance={stakedBalance.plus(stakingTokenBalance)}\r\n      stakingTokenSymbol={stakingToken.symbol}\r\n      earningTokenSymbol={earningToken.symbol}\r\n      autoCompoundFrequency={vaultPoolConfig[vaultKey]?.autoCompoundFrequency ?? 0}\r\n      performanceFee={performanceFee}\r\n    />,\r\n  )\r\n\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n      {tooltipVisible && tooltip}\r\n      <TooltipText ref={targetRef}>{vaultKey ? `${t('APY')}:` : `${t('APR')}:`}</TooltipText>\r\n      {apr || isFinished ? (\r\n        <ApyLabelContainer alignItems=\"center\" onClick={onPresentApyModal}>\r\n          <Balance\r\n            fontSize=\"16px\"\r\n            isDisabled={isFinished}\r\n            value={isFinished ? 0 : apr}\r\n            decimals={2}\r\n            unit=\"%\"\r\n            onClick={onPresentApyModal}\r\n          />\r\n          {!isFinished && (\r\n            <IconButton variant=\"text\" scale=\"sm\">\r\n              <CalculateIcon color=\"textSubtle\" width=\"18px\" />\r\n            </IconButton>\r\n          )}\r\n        </ApyLabelContainer>\r\n      ) : (\r\n        <Skeleton width=\"82px\" height=\"32px\" />\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default AprRow\r\n","import styled from 'styled-components'\r\nimport { Card } from '@pancakeswap/uikit'\r\n\r\nexport const StyledCard = styled(Card)<{ isFinished?: boolean }>`\r\n  max-width: 352px;\r\n  margin: 0 8px 24px;\r\n  width: 100%;\r\n  min-width: 300px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-self: baseline;\r\n  position: relative;\r\n  color: ${({ isFinished, theme }) => theme.colors[isFinished ? 'textDisabled' : 'secondary']};\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    margin: 0 12px 46px;\r\n  }\r\n`\r\n\r\nexport default StyledCard\r\n","import React from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport styled from 'styled-components'\r\nimport { getBalanceNumber, getFullDisplayBalance } from 'utils/formatBalance'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport {\r\n  Flex,\r\n  MetamaskIcon,\r\n  Text,\r\n  TooltipText,\r\n  LinkExternal,\r\n  TimerIcon,\r\n  Skeleton,\r\n  useTooltip,\r\n  Button,\r\n  Link,\r\n  HelpIcon,\r\n} from '@pancakeswap/uikit'\r\nimport { BASE_BSC_SCAN_URL } from 'config'\r\nimport { useBlock } from 'state/block/hooks'\r\nimport { useVaultPoolByKey, useVaultPools } from 'state/pools/hooks'\r\nimport { DeserializedPool } from 'state/types'\r\nimport { getAddress, getVaultPoolAddress } from 'utils/addressHelpers'\r\nimport { registerToken } from 'utils/wallet'\r\nimport { getBscScanLink } from 'utils'\r\nimport Balance from 'components/Balance'\r\nimport { getPoolBlockInfo } from 'views/Pools/helpers'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\n\r\ninterface ExpandedFooterProps {\r\n  pool: DeserializedPool\r\n  account: string\r\n}\r\n\r\nconst ExpandedWrapper = styled(Flex)`\r\n  svg {\r\n    height: 14px;\r\n    width: 14px;\r\n  }\r\n`\r\n\r\nconst ExpandedFooter: React.FC<ExpandedFooterProps> = ({ pool, account }) => {\r\n  const { t } = useTranslation()\r\n  const { currentBlock } = useBlock()\r\n\r\n  const {\r\n    stakingToken,\r\n    earningToken,\r\n    totalStaked,\r\n    startBlock,\r\n    endBlock,\r\n    stakingLimit,\r\n    contractAddress,\r\n    sousId,\r\n    vaultKey,\r\n  } = pool\r\n\r\n  const {\r\n    totalCakeInVault,\r\n    fees: { performanceFee },\r\n  } = useVaultPoolByKey(vaultKey)\r\n\r\n  const vaultPools = useVaultPools()\r\n  const cakeInVaults = Object.values(vaultPools).reduce((total, vault) => {\r\n    return total.plus(vault.totalCakeInVault)\r\n  }, BIG_ZERO)\r\n\r\n  const tokenAddress = earningToken.address || ''\r\n  const poolContractAddress = getAddress(contractAddress)\r\n  const cakeVaultContractAddress = getVaultPoolAddress(vaultKey)\r\n  const isMetaMaskInScope = !!window.ethereum?.isMetaMask\r\n  const isManualCakePool = sousId === 0\r\n\r\n  const { shouldShowBlockCountdown, blocksUntilStart, blocksRemaining, hasPoolStarted, blocksToDisplay } =\r\n    getPoolBlockInfo(pool, currentBlock)\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t('Subtracted automatically from each yield harvest and burned.'),\r\n    { placement: 'bottom-start' },\r\n  )\r\n\r\n  const getTotalStakedBalance = () => {\r\n    if (vaultKey) {\r\n      return getBalanceNumber(totalCakeInVault, stakingToken.decimals)\r\n    }\r\n    if (isManualCakePool) {\r\n      const manualCakeTotalMinusAutoVault = new BigNumber(totalStaked).minus(cakeInVaults)\r\n      return getBalanceNumber(manualCakeTotalMinusAutoVault, stakingToken.decimals)\r\n    }\r\n    return getBalanceNumber(totalStaked, stakingToken.decimals)\r\n  }\r\n\r\n  const {\r\n    targetRef: totalStakedTargetRef,\r\n    tooltip: totalStakedTooltip,\r\n    tooltipVisible: totalStakedTooltipVisible,\r\n  } = useTooltip(t('Total amount of %symbol% staked in this pool', { symbol: stakingToken.symbol }), {\r\n    placement: 'bottom',\r\n  })\r\n\r\n  return (\r\n    <ExpandedWrapper flexDirection=\"column\">\r\n      <Flex mb=\"2px\" justifyContent=\"space-between\" alignItems=\"center\">\r\n        <Text small>{t('Total staked')}:</Text>\r\n        <Flex alignItems=\"flex-start\">\r\n          {totalStaked && totalStaked.gte(0) ? (\r\n            <>\r\n              <Balance small value={getTotalStakedBalance()} decimals={0} unit={` ${stakingToken.symbol}`} />\r\n              <span ref={totalStakedTargetRef}>\r\n                <HelpIcon color=\"textSubtle\" width=\"20px\" ml=\"6px\" mt=\"4px\" />\r\n              </span>\r\n            </>\r\n          ) : (\r\n            <Skeleton width=\"90px\" height=\"21px\" />\r\n          )}\r\n          {totalStakedTooltipVisible && totalStakedTooltip}\r\n        </Flex>\r\n      </Flex>\r\n      {stakingLimit && stakingLimit.gt(0) && (\r\n        <Flex mb=\"2px\" justifyContent=\"space-between\">\r\n          <Text small>{t('Max. stake per user')}:</Text>\r\n          <Text small>{`${getFullDisplayBalance(stakingLimit, stakingToken.decimals, 0)} ${stakingToken.symbol}`}</Text>\r\n        </Flex>\r\n      )}\r\n      {shouldShowBlockCountdown && (\r\n        <Flex mb=\"2px\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Text small>{hasPoolStarted ? t('Ends in') : t('Starts in')}:</Text>\r\n          {blocksRemaining || blocksUntilStart ? (\r\n            <Flex alignItems=\"center\">\r\n              <Link external href={getBscScanLink(hasPoolStarted ? endBlock : startBlock, 'countdown')}>\r\n                <Balance small value={blocksToDisplay} decimals={0} color=\"primary\" />\r\n                <Text small ml=\"4px\" color=\"primary\" textTransform=\"lowercase\">\r\n                  {t('Blocks')}\r\n                </Text>\r\n                <TimerIcon ml=\"4px\" color=\"primary\" />\r\n              </Link>\r\n            </Flex>\r\n          ) : (\r\n            <Skeleton width=\"54px\" height=\"21px\" />\r\n          )}\r\n        </Flex>\r\n      )}\r\n      {vaultKey && (\r\n        <Flex mb=\"2px\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          {tooltipVisible && tooltip}\r\n          <TooltipText ref={targetRef} small>\r\n            {t('Performance Fee')}\r\n          </TooltipText>\r\n          <Flex alignItems=\"center\">\r\n            {performanceFee ? (\r\n              <Text ml=\"4px\" small>\r\n                {performanceFee / 100}%\r\n              </Text>\r\n            ) : (\r\n              <Skeleton width=\"90px\" height=\"21px\" />\r\n            )}\r\n          </Flex>\r\n        </Flex>\r\n      )}\r\n      <Flex mb=\"2px\" justifyContent=\"flex-end\">\r\n        <LinkExternal href={`/info/token/${earningToken.address}`} bold={false} small>\r\n          {t('See Token Info')}\r\n        </LinkExternal>\r\n      </Flex>\r\n      <Flex mb=\"2px\" justifyContent=\"flex-end\">\r\n        <LinkExternal href={earningToken.projectLink} bold={false} small>\r\n          {t('View Project Site')}\r\n        </LinkExternal>\r\n      </Flex>\r\n      {poolContractAddress && (\r\n        <Flex mb=\"2px\" justifyContent=\"flex-end\">\r\n          <LinkExternal\r\n            href={`${BASE_BSC_SCAN_URL}/address/${vaultKey ? cakeVaultContractAddress : poolContractAddress}`}\r\n            bold={false}\r\n            small\r\n          >\r\n            {t('View Contract')}\r\n          </LinkExternal>\r\n        </Flex>\r\n      )}\r\n      {account && isMetaMaskInScope && tokenAddress && (\r\n        <Flex justifyContent=\"flex-end\">\r\n          <Button\r\n            variant=\"text\"\r\n            p=\"0\"\r\n            height=\"auto\"\r\n            onClick={() => registerToken(tokenAddress, earningToken.symbol, earningToken.decimals)}\r\n          >\r\n            <Text color=\"primary\" fontSize=\"14px\">\r\n              {t('Add to Metamask')}\r\n            </Text>\r\n            <MetamaskIcon ml=\"4px\" />\r\n          </Button>\r\n        </Flex>\r\n      )}\r\n    </ExpandedWrapper>\r\n  )\r\n}\r\n\r\nexport default React.memo(ExpandedFooter)\r\n","import React, { useState } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport styled from 'styled-components'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { Flex, CardFooter, ExpandableLabel, HelpIcon, useTooltip } from '@pancakeswap/uikit'\r\nimport { DeserializedPool } from 'state/types'\r\nimport { CompoundingPoolTag, ManualPoolTag } from 'components/Tags'\r\nimport ExpandedFooter from './ExpandedFooter'\r\n\r\ninterface FooterProps {\r\n  pool: DeserializedPool\r\n  account: string\r\n  totalCakeInVault?: BigNumber\r\n  defaultExpanded?: boolean\r\n}\r\n\r\nconst ExpandableButtonWrapper = styled(Flex)`\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  button {\r\n    padding: 0;\r\n  }\r\n`\r\n\r\nconst Footer: React.FC<FooterProps> = ({ pool, account, defaultExpanded }) => {\r\n  const { vaultKey } = pool\r\n  const { t } = useTranslation()\r\n  const [isExpanded, setIsExpanded] = useState(defaultExpanded || false)\r\n\r\n  const manualTooltipText = t('You must harvest and compound your earnings from this pool manually.')\r\n  const autoTooltipText = t(\r\n    'Any funds you stake in this pool will be automagically harvested and restaked (compounded) for you.',\r\n  )\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(vaultKey ? autoTooltipText : manualTooltipText, {\r\n    placement: 'bottom',\r\n  })\r\n\r\n  return (\r\n    <CardFooter>\r\n      <ExpandableButtonWrapper>\r\n        <Flex alignItems=\"center\">\r\n          {vaultKey ? <CompoundingPoolTag /> : <ManualPoolTag />}\r\n          {tooltipVisible && tooltip}\r\n          <Flex ref={targetRef}>\r\n            <HelpIcon ml=\"4px\" width=\"20px\" height=\"20px\" color=\"textSubtle\" />\r\n          </Flex>\r\n        </Flex>\r\n        <ExpandableLabel expanded={isExpanded} onClick={() => setIsExpanded(!isExpanded)}>\r\n          {isExpanded ? t('Hide') : t('Details')}\r\n        </ExpandableLabel>\r\n      </ExpandableButtonWrapper>\r\n      {isExpanded && <ExpandedFooter pool={pool} account={account} />}\r\n    </CardFooter>\r\n  )\r\n}\r\n\r\nexport default Footer\r\n","import { CardHeader, Flex, Heading, Text } from '@pancakeswap/uikit'\r\nimport React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst Wrapper = styled(CardHeader)<{ isFinished?: boolean; background?: string }>`\r\n  background: ${({ isFinished, background, theme }) =>\r\n    isFinished ? theme.colors.backgroundDisabled : theme.colors.gradients[background]};\r\n  border-radius: ${({ theme }) => `${theme.radii.card} ${theme.radii.card} 0 0`};\r\n`\r\n\r\nconst PoolCardHeader: React.FC<{\r\n  isFinished?: boolean\r\n  isStaking?: boolean\r\n}> = ({ isFinished = false, isStaking = false, children }) => {\r\n  const background = isStaking ? 'bubblegum' : 'cardHeader'\r\n\r\n  return (\r\n    <Wrapper isFinished={isFinished} background={background}>\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n        {children}\r\n      </Flex>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport const PoolCardHeaderTitle: React.FC<{ isFinished?: boolean; title: string; subTitle: string }> = ({\r\n  isFinished,\r\n  title,\r\n  subTitle,\r\n}) => {\r\n  return (\r\n    <Flex flexDirection=\"column\">\r\n      <Heading color={isFinished ? 'textDisabled' : 'body'} scale=\"lg\">\r\n        {title}\r\n      </Heading>\r\n      <Text fontSize=\"14px\" color={isFinished ? 'textDisabled' : 'textSubtle'}>\r\n        {subTitle}\r\n      </Text>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default PoolCardHeader\r\n","import React, { useCallback, useEffect, useState } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { ethers, Contract } from 'ethers'\r\nimport { useAppDispatch } from 'state'\r\nimport { updateUserAllowance } from 'state/actions'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useCake, useSousChef, useVaultPoolContract } from 'hooks/useContract'\r\nimport useToast from 'hooks/useToast'\r\nimport useLastUpdated from 'hooks/useLastUpdated'\r\nimport { useCallWithGasPrice } from 'hooks/useCallWithGasPrice'\r\nimport { ToastDescriptionWithTx } from 'components/Toast'\r\nimport { VaultKey } from 'state/types'\r\n\r\nexport const useApprovePool = (lpContract: Contract, sousId, earningTokenSymbol) => {\r\n  const [requestedApproval, setRequestedApproval] = useState(false)\r\n  const { toastSuccess, toastError } = useToast()\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const { t } = useTranslation()\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const sousChefContract = useSousChef(sousId)\r\n\r\n  const handleApprove = useCallback(async () => {\r\n    try {\r\n      setRequestedApproval(true)\r\n      const tx = await callWithGasPrice(lpContract, 'approve', [sousChefContract.address, ethers.constants.MaxUint256])\r\n      const receipt = await tx.wait()\r\n\r\n      dispatch(updateUserAllowance(sousId, account))\r\n      if (receipt.status) {\r\n        toastSuccess(\r\n          t('Contract Enabled'),\r\n          <ToastDescriptionWithTx txHash={receipt.transactionHash}>\r\n            {t('You can now stake in the %symbol% pool!', { symbol: earningTokenSymbol })}\r\n          </ToastDescriptionWithTx>,\r\n        )\r\n        setRequestedApproval(false)\r\n      } else {\r\n        // user rejected tx or didn't go thru\r\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n        setRequestedApproval(false)\r\n      }\r\n    } catch (e) {\r\n      console.error(e)\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n    }\r\n  }, [\r\n    account,\r\n    dispatch,\r\n    lpContract,\r\n    sousChefContract,\r\n    sousId,\r\n    earningTokenSymbol,\r\n    t,\r\n    toastError,\r\n    toastSuccess,\r\n    callWithGasPrice,\r\n  ])\r\n\r\n  return { handleApprove, requestedApproval }\r\n}\r\n\r\n// Approve CAKE auto pool\r\nexport const useVaultApprove = (vaultKey: VaultKey, setLastUpdated: () => void) => {\r\n  const [requestedApproval, setRequestedApproval] = useState(false)\r\n  const { t } = useTranslation()\r\n  const { toastSuccess, toastError } = useToast()\r\n  const vaultPoolContract = useVaultPoolContract(vaultKey)\r\n  const { callWithGasPrice } = useCallWithGasPrice()\r\n  const cakeContract = useCake()\r\n\r\n  const handleApprove = async () => {\r\n    const tx = await callWithGasPrice(cakeContract, 'approve', [vaultPoolContract.address, ethers.constants.MaxUint256])\r\n    setRequestedApproval(true)\r\n    const receipt = await tx.wait()\r\n    if (receipt.status) {\r\n      toastSuccess(\r\n        t('Contract Enabled'),\r\n        <ToastDescriptionWithTx txHash={receipt.transactionHash}>\r\n          {t('You can now stake in the %symbol% vault!', { symbol: 'CAKE' })}\r\n        </ToastDescriptionWithTx>,\r\n      )\r\n      setLastUpdated()\r\n      setRequestedApproval(false)\r\n    } else {\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      setRequestedApproval(false)\r\n    }\r\n  }\r\n\r\n  return { handleApprove, requestedApproval }\r\n}\r\n\r\nexport const useCheckVaultApprovalStatus = (vaultKey: VaultKey) => {\r\n  const [isVaultApproved, setIsVaultApproved] = useState(false)\r\n  const { account } = useWeb3React()\r\n  const cakeContract = useCake()\r\n  const vaultPoolContract = useVaultPoolContract(vaultKey)\r\n  const { lastUpdated, setLastUpdated } = useLastUpdated()\r\n  useEffect(() => {\r\n    const checkApprovalStatus = async () => {\r\n      try {\r\n        const currentAllowance = await cakeContract.allowance(account, vaultPoolContract.address)\r\n        setIsVaultApproved(currentAllowance.gt(0))\r\n      } catch (error) {\r\n        setIsVaultApproved(false)\r\n      }\r\n    }\r\n\r\n    checkApprovalStatus()\r\n  }, [account, cakeContract, vaultPoolContract, lastUpdated])\r\n\r\n  return { isVaultApproved, setLastUpdated }\r\n}\r\n","import React from 'react'\r\nimport { Button, AutoRenewIcon, Skeleton } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { VaultKey } from 'state/types'\r\nimport { useVaultApprove } from '../../../hooks/useApprove'\r\n\r\ninterface ApprovalActionProps {\r\n  setLastUpdated: () => void\r\n  isLoading?: boolean\r\n  vaultKey: VaultKey\r\n}\r\n\r\nconst VaultApprovalAction: React.FC<ApprovalActionProps> = ({ vaultKey, isLoading = false, setLastUpdated }) => {\r\n  const { t } = useTranslation()\r\n\r\n  const { handleApprove, requestedApproval } = useVaultApprove(vaultKey, setLastUpdated)\r\n\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        <Skeleton width=\"100%\" height=\"52px\" />\r\n      ) : (\r\n        <Button\r\n          isLoading={requestedApproval}\r\n          endIcon={requestedApproval ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n          disabled={requestedApproval}\r\n          onClick={handleApprove}\r\n          width=\"100%\"\r\n        >\r\n          {t('Enable')}\r\n        </Button>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default VaultApprovalAction\r\n","import React from 'react'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport styled from 'styled-components'\r\nimport { Modal, Text, Button, OpenNewIcon, Link } from '@pancakeswap/uikit'\r\nimport useTheme from 'hooks/useTheme'\r\n\r\ninterface NotEnoughTokensModalProps {\r\n  tokenSymbol: string\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst StyledLink = styled(Link)`\r\n  width: 100%;\r\n`\r\n\r\nconst NotEnoughTokensModal: React.FC<NotEnoughTokensModalProps> = ({ tokenSymbol, onDismiss }) => {\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n\r\n  return (\r\n    <Modal\r\n      title={t('%symbol% required', { symbol: tokenSymbol })}\r\n      onDismiss={onDismiss}\r\n      headerBackground={theme.colors.gradients.cardHeader}\r\n    >\r\n      <Text color=\"failure\" bold>\r\n        {t('Insufficient %symbol% balance', { symbol: tokenSymbol })}\r\n      </Text>\r\n      <Text mt=\"24px\">{t('Youll need %symbol% to stake in this pool!', { symbol: tokenSymbol })}</Text>\r\n      <Text>\r\n        {t('Buy some %symbol%, or make sure your %symbol% isnt in another pool or LP.', {\r\n          symbol: tokenSymbol,\r\n        })}\r\n      </Text>\r\n      <Button mt=\"24px\" as=\"a\" external href=\"/swap\">\r\n        {t('Buy')} {tokenSymbol}\r\n      </Button>\r\n      <StyledLink href=\"https://yieldwatch.net\" external>\r\n        <Button variant=\"secondary\" mt=\"8px\" width=\"100%\">\r\n          {t('Locate Assets')}\r\n          <OpenNewIcon color=\"primary\" ml=\"4px\" />\r\n        </Button>\r\n      </StyledLink>\r\n      <Button variant=\"text\" onClick={onDismiss}>\r\n        {t('Close Window')}\r\n      </Button>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default NotEnoughTokensModal\r\n","import React from 'react'\r\nimport { Flex, Text, IconButton, AddIcon, MinusIcon, useModal, Skeleton, Box } from '@pancakeswap/uikit'\r\nimport BigNumber from 'bignumber.js'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { DeserializedPool, VaultKey } from 'state/types'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { useVaultPoolByKey } from 'state/pools/hooks'\r\nimport Balance from 'components/Balance'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport NotEnoughTokensModal from '../../PoolCard/Modals/NotEnoughTokensModal'\r\nimport { convertSharesToCake } from '../../../helpers'\r\nimport VaultStakeModal from '../VaultStakeModal'\r\n\r\ninterface HasStakeActionProps {\r\n  pool: DeserializedPool\r\n  stakingTokenBalance: BigNumber\r\n  performanceFee: number\r\n}\r\n\r\nconst HasSharesActions: React.FC<HasStakeActionProps> = ({ pool, stakingTokenBalance, performanceFee }) => {\r\n  const {\r\n    totalShares,\r\n    userData: { userShares, isLoading },\r\n    pricePerFullShare,\r\n  } = useVaultPoolByKey(pool.vaultKey)\r\n  const { stakingToken } = pool\r\n  const { cakeAsBigNumber, cakeAsNumberBalance } = convertSharesToCake(userShares, pricePerFullShare)\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const stakedDollarValue = cakePriceBusd.gt(0)\r\n    ? getBalanceNumber(cakeAsBigNumber.multipliedBy(cakePriceBusd), stakingToken.decimals)\r\n    : 0\r\n  const { t } = useTranslation()\r\n\r\n  const [onPresentTokenRequired] = useModal(<NotEnoughTokensModal tokenSymbol={stakingToken.symbol} />)\r\n  const [onPresentStake] = useModal(\r\n    <VaultStakeModal stakingMax={stakingTokenBalance} performanceFee={performanceFee} pool={pool} />,\r\n  )\r\n  const [onPresentUnstake] = useModal(<VaultStakeModal stakingMax={cakeAsBigNumber} pool={pool} isRemovingStake />)\r\n\r\n  const totalSharesPercentage =\r\n    userShares &&\r\n    userShares.gt(0) &&\r\n    totalShares &&\r\n    userShares.dividedBy(totalShares).multipliedBy(100).decimalPlaces(5)\r\n\r\n  return (\r\n    <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n      <Flex flexDirection=\"column\">\r\n        <Balance fontSize=\"20px\" bold value={cakeAsNumberBalance} decimals={5} />\r\n        <Text as={Flex} fontSize=\"12px\" color=\"textSubtle\" flexWrap=\"wrap\">\r\n          {cakePriceBusd.gt(0) ? (\r\n            <Balance value={stakedDollarValue} fontSize=\"12px\" color=\"textSubtle\" decimals={2} prefix=\"~\" unit=\" USD\" />\r\n          ) : (\r\n            <Skeleton mt=\"1px\" height={16} width={64} />\r\n          )}\r\n          {!isLoading && totalSharesPercentage && pool.vaultKey === VaultKey.IfoPool && (\r\n            <Box as=\"span\" ml=\"2px\">\r\n              | {t('%num% of total', { num: `${totalSharesPercentage.toString()}%` })}\r\n            </Box>\r\n          )}\r\n        </Text>\r\n      </Flex>\r\n      <Flex>\r\n        <IconButton variant=\"secondary\" onClick={onPresentUnstake} mr=\"6px\">\r\n          <MinusIcon color=\"primary\" width=\"24px\" />\r\n        </IconButton>\r\n        <IconButton variant=\"secondary\" onClick={stakingTokenBalance.gt(0) ? onPresentStake : onPresentTokenRequired}>\r\n          <AddIcon color=\"primary\" width=\"24px\" height=\"24px\" />\r\n        </IconButton>\r\n      </Flex>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default HasSharesActions\r\n","import React from 'react'\r\nimport { Flex, Button, useModal, Skeleton } from '@pancakeswap/uikit'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { DeserializedPool } from 'state/types'\r\nimport NotEnoughTokensModal from '../../PoolCard/Modals/NotEnoughTokensModal'\r\nimport VaultStakeModal from '../VaultStakeModal'\r\nimport HasSharesActions from './HasSharesActions'\r\n\r\ninterface VaultStakeActionsProps {\r\n  pool: DeserializedPool\r\n  stakingTokenBalance: BigNumber\r\n  accountHasSharesStaked: boolean\r\n  performanceFee: number\r\n  isLoading?: boolean\r\n}\r\n\r\nconst VaultStakeActions: React.FC<VaultStakeActionsProps> = ({\r\n  pool,\r\n  stakingTokenBalance,\r\n  accountHasSharesStaked,\r\n  performanceFee,\r\n  isLoading = false,\r\n}) => {\r\n  const { stakingToken } = pool\r\n  const { t } = useTranslation()\r\n  const [onPresentTokenRequired] = useModal(<NotEnoughTokensModal tokenSymbol={stakingToken.symbol} />)\r\n  const [onPresentStake] = useModal(\r\n    <VaultStakeModal stakingMax={stakingTokenBalance} pool={pool} performanceFee={performanceFee} />,\r\n  )\r\n\r\n  const renderStakeAction = () => {\r\n    return accountHasSharesStaked ? (\r\n      <HasSharesActions pool={pool} stakingTokenBalance={stakingTokenBalance} performanceFee={performanceFee} />\r\n    ) : (\r\n      <Button onClick={stakingTokenBalance.gt(0) ? onPresentStake : onPresentTokenRequired}>{t('Stake')}</Button>\r\n    )\r\n  }\r\n\r\n  return <Flex flexDirection=\"column\">{isLoading ? <Skeleton width=\"100%\" height=\"52px\" /> : renderStakeAction()}</Flex>\r\n}\r\n\r\nexport default VaultStakeActions\r\n","import BigNumber from 'bignumber.js'\r\nimport Balance from 'components/Balance'\r\nimport React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Flex, Text, Box, Skeleton } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { DeserializedPool, VaultKey } from 'state/types'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { useIfoPoolCredit } from 'state/pools/hooks'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport QuestionHelper from 'components/QuestionHelper'\r\nimport { FlexGap } from 'components/Layout/Flex'\r\nimport { getBalanceNumber, getDecimalAmount } from 'utils/formatBalance'\r\nimport VaultApprovalAction from './VaultApprovalAction'\r\nimport VaultStakeActions from './VaultStakeActions'\r\nimport { useCheckVaultApprovalStatus } from '../../../hooks/useApprove'\r\n\r\nconst InlineText = styled(Text)`\r\n  display: inline;\r\n`\r\n\r\nexport const IfoVaultCardAvgBalance = ({ pool }: { pool: DeserializedPool }) => {\r\n  const { t } = useTranslation()\r\n  const credit = useIfoPoolCredit()\r\n\r\n  // TODO: refactor this is use everywhere\r\n  const cakeAsNumberBalance = getBalanceNumber(credit)\r\n  const cakeAsBigNumber = getDecimalAmount(new BigNumber(cakeAsNumberBalance))\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const stakedDollarValue = cakePriceBusd.gt(0)\r\n    ? getBalanceNumber(cakeAsBigNumber.multipliedBy(cakePriceBusd), pool.stakingToken.decimals)\r\n    : 0\r\n\r\n  return (\r\n    <>\r\n      <FlexGap gap=\"4px\" alignItems=\"center\">\r\n        <InlineText color=\"secondary\" textTransform=\"uppercase\" bold fontSize=\"12px\">\r\n          {t('Average')}{' '}\r\n        </InlineText>\r\n        <InlineText color=\"textSubtle\" textTransform=\"uppercase\" bold fontSize=\"12px\">\r\n          {t('Pool Balance')}\r\n        </InlineText>\r\n        <QuestionHelper\r\n          size=\"24px\"\r\n          placement=\"auto\"\r\n          display=\"inline\"\r\n          text={t(\r\n            'Max CAKE entry for both IFO sale is capped by average pool balance in this pool. This is calculated by the average block balance in the IFO pool in the past blocks prior to cut-off block.',\r\n          )}\r\n        />\r\n      </FlexGap>\r\n      <Flex flexDirection=\"column\" pb=\"16px\">\r\n        <Balance fontSize=\"20px\" bold value={cakeAsNumberBalance} decimals={5} />\r\n        <Text fontSize=\"12px\" color=\"textSubtle\" display=\"flex\">\r\n          {cakePriceBusd.gt(0) ? (\r\n            <Balance value={stakedDollarValue} fontSize=\"12px\" color=\"textSubtle\" decimals={2} prefix=\"~\" unit=\" USD\" />\r\n          ) : (\r\n            <Skeleton mt=\"1px\" height={16} width={64} />\r\n          )}\r\n        </Text>\r\n      </Flex>\r\n    </>\r\n  )\r\n}\r\n\r\nconst CakeVaultCardActions: React.FC<{\r\n  pool: DeserializedPool\r\n  accountHasSharesStaked: boolean\r\n  isLoading: boolean\r\n  performanceFee: number\r\n}> = ({ pool, accountHasSharesStaked, isLoading, performanceFee }) => {\r\n  const { stakingToken, userData } = pool\r\n  const { t } = useTranslation()\r\n  const stakingTokenBalance = userData?.stakingTokenBalance ? new BigNumber(userData.stakingTokenBalance) : BIG_ZERO\r\n\r\n  const { isVaultApproved, setLastUpdated } = useCheckVaultApprovalStatus(pool.vaultKey)\r\n\r\n  return (\r\n    <Flex flexDirection=\"column\">\r\n      <Flex flexDirection=\"column\">\r\n        {accountHasSharesStaked && pool.vaultKey === VaultKey.IfoPool && <IfoVaultCardAvgBalance pool={pool} />}\r\n        <Box display=\"inline\">\r\n          <InlineText\r\n            color={accountHasSharesStaked ? 'secondary' : 'textSubtle'}\r\n            textTransform=\"uppercase\"\r\n            bold\r\n            fontSize=\"12px\"\r\n          >\r\n            {accountHasSharesStaked ? stakingToken.symbol : t('Stake')}{' '}\r\n          </InlineText>\r\n          <InlineText\r\n            color={accountHasSharesStaked ? 'textSubtle' : 'secondary'}\r\n            textTransform=\"uppercase\"\r\n            bold\r\n            fontSize=\"12px\"\r\n          >\r\n            {accountHasSharesStaked ? t('Staked (compounding)') : `${stakingToken.symbol}`}\r\n          </InlineText>\r\n        </Box>\r\n        {isVaultApproved ? (\r\n          <VaultStakeActions\r\n            isLoading={isLoading}\r\n            pool={pool}\r\n            stakingTokenBalance={stakingTokenBalance}\r\n            accountHasSharesStaked={accountHasSharesStaked}\r\n            performanceFee={performanceFee}\r\n          />\r\n        ) : (\r\n          <VaultApprovalAction vaultKey={pool.vaultKey} isLoading={isLoading} setLastUpdated={setLastUpdated} />\r\n        )}\r\n      </Flex>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default CakeVaultCardActions\r\n","import React from 'react'\r\nimport { Text, TooltipText, useTooltip } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport Balance from 'components/Balance'\r\n\r\ninterface RecentCakeProfitBalanceProps {\r\n  cakeToDisplay: number\r\n  dollarValueToDisplay: number\r\n  dateStringToDisplay: string\r\n}\r\n\r\nconst RecentCakeProfitBalance: React.FC<RecentCakeProfitBalanceProps> = ({\r\n  cakeToDisplay,\r\n  dollarValueToDisplay,\r\n  dateStringToDisplay,\r\n}) => {\r\n  const { t } = useTranslation()\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <>\r\n      <Balance fontSize=\"16px\" value={cakeToDisplay} decimals={3} bold unit=\" CAKE\" />\r\n      <Balance fontSize=\"16px\" value={dollarValueToDisplay} decimals={2} bold prefix=\"~$\" />\r\n      {t('Earned since your last action')}\r\n      <Text>{dateStringToDisplay}</Text>\r\n    </>,\r\n    {\r\n      placement: 'bottom-end',\r\n    },\r\n  )\r\n\r\n  return (\r\n    <>\r\n      {tooltipVisible && tooltip}\r\n      <TooltipText ref={targetRef} small>\r\n        <Balance fontSize=\"14px\" value={cakeToDisplay} />\r\n      </TooltipText>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default RecentCakeProfitBalance\r\n","import React from 'react'\r\nimport { Flex, Text } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { useVaultPoolByKey } from 'state/pools/hooks'\r\nimport { VaultKey } from 'state/types'\r\nimport { getCakeVaultEarnings } from 'views/Pools/helpers'\r\nimport RecentCakeProfitBalance from './RecentCakeProfitBalance'\r\n\r\nconst RecentCakeProfitCountdownRow = ({ vaultKey }: { vaultKey: VaultKey }) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const {\r\n    pricePerFullShare,\r\n    userData: { cakeAtLastUserAction, userShares, lastUserActionTime },\r\n  } = useVaultPoolByKey(vaultKey)\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const { hasAutoEarnings, autoCakeToDisplay, autoUsdToDisplay } = getCakeVaultEarnings(\r\n    account,\r\n    cakeAtLastUserAction,\r\n    userShares,\r\n    pricePerFullShare,\r\n    cakePriceBusd.toNumber(),\r\n  )\r\n\r\n  const lastActionInMs = lastUserActionTime && parseInt(lastUserActionTime) * 1000\r\n  const dateTimeLastAction = new Date(lastActionInMs)\r\n  const dateStringToDisplay = dateTimeLastAction.toLocaleString()\r\n\r\n  return (\r\n    <Flex alignItems=\"center\" justifyContent=\"space-between\">\r\n      <Text fontSize=\"14px\">{`${t('Recent CAKE profit')}:`}</Text>\r\n      {hasAutoEarnings && (\r\n        <RecentCakeProfitBalance\r\n          cakeToDisplay={autoCakeToDisplay}\r\n          dollarValueToDisplay={autoUsdToDisplay}\r\n          dateStringToDisplay={dateStringToDisplay}\r\n        />\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default RecentCakeProfitCountdownRow\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  Box,\r\n  CardBody,\r\n  Flex,\r\n  Text,\r\n  CardProps,\r\n  HelpIcon,\r\n  useTooltip,\r\n  LinkExternal,\r\n  Link,\r\n  TokenPairImage,\r\n} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport { useIfoPooStartBlock, useVaultPoolByKey } from 'state/pools/hooks'\r\nimport { DeserializedPool, VaultKey } from 'state/types'\r\nimport { convertSharesToCake } from 'views/Pools/helpers'\r\nimport { FlexGap } from 'components/Layout/Flex'\r\nimport { vaultPoolConfig } from 'config/constants/pools'\r\nimport { getBscScanLink } from 'utils'\r\nimport AprRow from '../PoolCard/AprRow'\r\nimport { StyledCard } from '../PoolCard/StyledCard'\r\nimport CardFooter from '../PoolCard/CardFooter'\r\nimport PoolCardHeader, { PoolCardHeaderTitle } from '../PoolCard/PoolCardHeader'\r\nimport VaultCardActions from './VaultCardActions'\r\nimport UnstakingFeeCountdownRow from './UnstakingFeeCountdownRow'\r\nimport RecentCakeProfitRow from './RecentCakeProfitRow'\r\n\r\nconst StyledCardBody = styled(CardBody)<{ isLoading: boolean }>`\r\n  min-height: ${({ isLoading }) => (isLoading ? '0' : '254px')};\r\n`\r\n\r\ninterface CakeVaultProps extends CardProps {\r\n  pool: DeserializedPool\r\n  showStakedOnly: boolean\r\n  defaultFooterExpanded?: boolean\r\n}\r\n\r\nconst CakeVaultCard: React.FC<CakeVaultProps> = ({ pool, showStakedOnly, defaultFooterExpanded, ...props }) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const {\r\n    userData: { userShares, isLoading: isVaultUserDataLoading },\r\n    fees: { performanceFeeAsDecimal },\r\n    pricePerFullShare,\r\n  } = useVaultPoolByKey(pool.vaultKey)\r\n  const creditStartBlock = useIfoPooStartBlock()\r\n  const { tooltip, tooltipVisible, targetRef } = useTooltip(\r\n    <>\r\n      <Text>\r\n        {t(\r\n          'The start block of the current calculation period. Your average IFO CAKE Pool staking balance is calculated throughout this period.',\r\n        )}\r\n      </Text>\r\n      <LinkExternal href=\"https://medium.com/pancakeswap/initial-farm-offering-ifo-3-0-ifo-staking-pool-622d8bd356f1\">\r\n        {t('Check out our Medium article for more details.')}\r\n      </LinkExternal>\r\n    </>,\r\n    { placement: 'auto' },\r\n  )\r\n\r\n  const { cakeAsBigNumber } = convertSharesToCake(userShares, pricePerFullShare)\r\n\r\n  const accountHasSharesStaked = userShares && userShares.gt(0)\r\n  const isLoading = !pool.userData || isVaultUserDataLoading\r\n\r\n  if (showStakedOnly && !accountHasSharesStaked) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <StyledCard isActive {...props}>\r\n      <PoolCardHeader isStaking={accountHasSharesStaked}>\r\n        <PoolCardHeaderTitle\r\n          title={t(vaultPoolConfig[pool.vaultKey].name)}\r\n          subTitle={t(vaultPoolConfig[pool.vaultKey].description)}\r\n        />\r\n        <TokenPairImage {...vaultPoolConfig[pool.vaultKey].tokenImage} width={64} height={64} />\r\n      </PoolCardHeader>\r\n      <StyledCardBody isLoading={isLoading}>\r\n        <AprRow pool={pool} stakedBalance={cakeAsBigNumber} performanceFee={performanceFeeAsDecimal} />\r\n        {pool.vaultKey === VaultKey.IfoPool && (\r\n          <Flex mt=\"8px\" justifyContent=\"space-between\">\r\n            <Text fontSize=\"14px\">{t('Credit calculation starts:')}</Text>\r\n            <Flex mr=\"6px\" alignItems=\"center\">\r\n              <Link external href={getBscScanLink(creditStartBlock, 'block')} mr=\"4px\" fontSize=\"14px\">\r\n                {creditStartBlock}\r\n              </Link>\r\n              <span ref={targetRef}>\r\n                <HelpIcon color=\"textSubtle\" />\r\n              </span>\r\n            </Flex>\r\n            {tooltipVisible && tooltip}\r\n          </Flex>\r\n        )}\r\n        <FlexGap mt=\"16px\" gap=\"24px\" flexDirection={accountHasSharesStaked ? 'column-reverse' : 'column'}>\r\n          <Box>\r\n            <Box mt=\"24px\">\r\n              <RecentCakeProfitRow vaultKey={pool.vaultKey} />\r\n            </Box>\r\n            <Box mt=\"8px\">\r\n              <UnstakingFeeCountdownRow vaultKey={pool.vaultKey} />\r\n            </Box>\r\n          </Box>\r\n          <Flex flexDirection=\"column\">\r\n            {account ? (\r\n              <VaultCardActions\r\n                pool={pool}\r\n                accountHasSharesStaked={accountHasSharesStaked}\r\n                isLoading={isLoading}\r\n                performanceFee={performanceFeeAsDecimal}\r\n              />\r\n            ) : (\r\n              <>\r\n                <Text mb=\"10px\" textTransform=\"uppercase\" fontSize=\"12px\" color=\"textSubtle\" bold>\r\n                  {t('Start earning')}\r\n                </Text>\r\n                <ConnectWalletButton />\r\n              </>\r\n            )}\r\n          </Flex>\r\n        </FlexGap>\r\n      </StyledCardBody>\r\n      <CardFooter defaultExpanded={defaultFooterExpanded} pool={pool} account={account} />\r\n    </StyledCard>\r\n  )\r\n}\r\n\r\nexport default CakeVaultCard\r\n","import styled from 'styled-components'\r\n\r\nexport const ActionContainer = styled.div<{ isAutoVault?: boolean }>`\r\n  padding: 16px;\r\n  border: 2px solid ${({ theme }) => theme.colors.input};\r\n  border-radius: 16px;\r\n  flex-grow: 1;\r\n  flex-basis: 0;\r\n  margin-bottom: 16px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    margin-left: 12px;\r\n    margin-right: 12px;\r\n    margin-bottom: 0;\r\n    height: ${({ isAutoVault }) => (isAutoVault ? '130px' : 'auto')};\r\n  }\r\n}\r\n\r\n  ${({ theme }) => theme.mediaQueries.xl} {\r\n    margin-left: 32px;\r\n    margin-right: 0;\r\n  }\r\n`\r\n\r\nexport const ActionTitles = styled.div`\r\n  font-weight: 600;\r\n  font-size: 12px;\r\n`\r\n\r\nexport const ActionContent = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n`\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button } from '@pancakeswap/uikit'\r\n\r\ninterface PercentageButtonProps {\r\n  onClick: () => void\r\n}\r\n\r\nconst StyledButton = styled(Button)`\r\n  flex-grow: 1;\r\n`\r\n\r\nconst PercentageButton: React.FC<PercentageButtonProps> = ({ children, onClick }) => {\r\n  return (\r\n    <StyledButton scale=\"xs\" mx=\"2px\" p=\"4px 16px\" variant=\"tertiary\" onClick={onClick}>\r\n      {children}\r\n    </StyledButton>\r\n  )\r\n}\r\n\r\nexport default PercentageButton\r\n","import { useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useAppDispatch } from 'state'\r\nimport { updateUserStakedBalance, updateUserBalance } from 'state/actions'\r\nimport { stakeFarm } from 'utils/calls'\r\nimport BigNumber from 'bignumber.js'\r\nimport { DEFAULT_TOKEN_DECIMAL, DEFAULT_GAS_LIMIT } from 'config'\r\nimport { BIG_TEN } from 'utils/bigNumber'\r\nimport { useMasterchef, useSousChef } from 'hooks/useContract'\r\nimport getGasPrice from 'utils/getGasPrice'\r\n\r\nconst options = {\r\n  gasLimit: DEFAULT_GAS_LIMIT,\r\n}\r\n\r\nconst sousStake = async (sousChefContract, amount, decimals = 18) => {\r\n  const gasPrice = getGasPrice()\r\n  const tx = await sousChefContract.deposit(new BigNumber(amount).times(BIG_TEN.pow(decimals)).toString(), {\r\n    ...options,\r\n    gasPrice,\r\n  })\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n\r\nconst sousStakeBnb = async (sousChefContract, amount) => {\r\n  const gasPrice = getGasPrice()\r\n  const tx = await sousChefContract.deposit(new BigNumber(amount).times(DEFAULT_TOKEN_DECIMAL).toString(), {\r\n    ...options,\r\n    gasPrice,\r\n  })\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n\r\nconst useStakePool = (sousId: number, isUsingBnb = false) => {\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const masterChefContract = useMasterchef()\r\n  const sousChefContract = useSousChef(sousId)\r\n\r\n  const handleStake = useCallback(\r\n    async (amount: string, decimals: number) => {\r\n      if (sousId === 0) {\r\n        await stakeFarm(masterChefContract, 0, amount)\r\n      } else if (isUsingBnb) {\r\n        await sousStakeBnb(sousChefContract, amount)\r\n      } else {\r\n        await sousStake(sousChefContract, amount, decimals)\r\n      }\r\n      dispatch(updateUserStakedBalance(sousId, account))\r\n      dispatch(updateUserBalance(sousId, account))\r\n    },\r\n    [account, dispatch, isUsingBnb, masterChefContract, sousChefContract, sousId],\r\n  )\r\n\r\n  return { onStake: handleStake }\r\n}\r\n\r\nexport default useStakePool\r\n","import { useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { parseUnits } from 'ethers/lib/utils'\r\nimport { useAppDispatch } from 'state'\r\nimport { updateUserStakedBalance, updateUserBalance, updateUserPendingReward } from 'state/actions'\r\nimport { unstakeFarm } from 'utils/calls'\r\nimport { useMasterchef, useSousChef } from 'hooks/useContract'\r\nimport getGasPrice from 'utils/getGasPrice'\r\n\r\nconst sousUnstake = async (sousChefContract: any, amount: string, decimals: number) => {\r\n  const gasPrice = getGasPrice()\r\n  const units = parseUnits(amount, decimals)\r\n\r\n  const tx = await sousChefContract.withdraw(units.toString(), {\r\n    gasPrice,\r\n  })\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n\r\nconst sousEmergencyUnstake = async (sousChefContract: any) => {\r\n  const gasPrice = getGasPrice()\r\n  const tx = await sousChefContract.emergencyWithdraw({ gasPrice })\r\n  const receipt = await tx.wait()\r\n  return receipt.status\r\n}\r\n\r\nconst useUnstakePool = (sousId: number, enableEmergencyWithdraw = false) => {\r\n  const dispatch = useAppDispatch()\r\n  const { account } = useWeb3React()\r\n  const masterChefContract = useMasterchef()\r\n  const sousChefContract = useSousChef(sousId)\r\n\r\n  const handleUnstake = useCallback(\r\n    async (amount: string, decimals: number) => {\r\n      if (sousId === 0) {\r\n        await unstakeFarm(masterChefContract, 0, amount)\r\n      } else if (enableEmergencyWithdraw) {\r\n        await sousEmergencyUnstake(sousChefContract)\r\n      } else {\r\n        await sousUnstake(sousChefContract, amount, decimals)\r\n      }\r\n      dispatch(updateUserStakedBalance(sousId, account))\r\n      dispatch(updateUserBalance(sousId, account))\r\n      dispatch(updateUserPendingReward(sousId, account))\r\n    },\r\n    [account, dispatch, enableEmergencyWithdraw, masterChefContract, sousChefContract, sousId],\r\n  )\r\n\r\n  return { onUnstake: handleUnstake }\r\n}\r\n\r\nexport default useUnstakePool\r\n","import React, { useEffect, useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport {\r\n  Modal,\r\n  Text,\r\n  Flex,\r\n  Image,\r\n  Button,\r\n  Slider,\r\n  BalanceInput,\r\n  AutoRenewIcon,\r\n  Link,\r\n  CalculateIcon,\r\n  IconButton,\r\n  Skeleton,\r\n} from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useTheme from 'hooks/useTheme'\r\nimport useToast from 'hooks/useToast'\r\nimport BigNumber from 'bignumber.js'\r\nimport RoiCalculatorModal from 'components/RoiCalculatorModal'\r\nimport { getFullDisplayBalance, formatNumber, getDecimalAmount } from 'utils/formatBalance'\r\nimport { DeserializedPool } from 'state/types'\r\nimport { getInterestBreakdown } from 'utils/compoundApyHelpers'\r\nimport PercentageButton from './PercentageButton'\r\nimport useStakePool from '../../../hooks/useStakePool'\r\nimport useUnstakePool from '../../../hooks/useUnstakePool'\r\n\r\ninterface StakeModalProps {\r\n  isBnbPool: boolean\r\n  pool: DeserializedPool\r\n  stakingTokenBalance: BigNumber\r\n  stakingTokenPrice: number\r\n  isRemovingStake?: boolean\r\n  onDismiss?: () => void\r\n}\r\n\r\nconst StyledLink = styled(Link)`\r\n  width: 100%;\r\n`\r\n\r\nconst AnnualRoiContainer = styled(Flex)`\r\n  cursor: pointer;\r\n`\r\n\r\nconst AnnualRoiDisplay = styled(Text)`\r\n  width: 72px;\r\n  max-width: 72px;\r\n  overflow: hidden;\r\n  text-align: right;\r\n  text-overflow: ellipsis;\r\n`\r\n\r\nconst StakeModal: React.FC<StakeModalProps> = ({\r\n  isBnbPool,\r\n  pool,\r\n  stakingTokenBalance,\r\n  stakingTokenPrice,\r\n  isRemovingStake = false,\r\n  onDismiss,\r\n}) => {\r\n  const { sousId, stakingToken, earningTokenPrice, apr, userData, stakingLimit, earningToken } = pool\r\n  const { t } = useTranslation()\r\n  const { theme } = useTheme()\r\n  const { onStake } = useStakePool(sousId, isBnbPool)\r\n  const { onUnstake } = useUnstakePool(sousId, pool.enableEmergencyWithdraw)\r\n  const { toastSuccess, toastError } = useToast()\r\n  const [pendingTx, setPendingTx] = useState(false)\r\n  const [stakeAmount, setStakeAmount] = useState('')\r\n  const [hasReachedStakeLimit, setHasReachedStakedLimit] = useState(false)\r\n  const [percent, setPercent] = useState(0)\r\n  const [showRoiCalculator, setShowRoiCalculator] = useState(false)\r\n  const getCalculatedStakingLimit = () => {\r\n    if (isRemovingStake) {\r\n      return userData.stakedBalance\r\n    }\r\n    return stakingLimit.gt(0) && stakingTokenBalance.gt(stakingLimit) ? stakingLimit : stakingTokenBalance\r\n  }\r\n  const fullDecimalStakeAmount = getDecimalAmount(new BigNumber(stakeAmount), stakingToken.decimals)\r\n  const userNotEnoughToken = isRemovingStake\r\n    ? userData.stakedBalance.lt(fullDecimalStakeAmount)\r\n    : userData.stakingTokenBalance.lt(fullDecimalStakeAmount)\r\n\r\n  const usdValueStaked = new BigNumber(stakeAmount).times(stakingTokenPrice)\r\n  const formattedUsdValueStaked = !usdValueStaked.isNaN() && formatNumber(usdValueStaked.toNumber())\r\n\r\n  const interestBreakdown = getInterestBreakdown({\r\n    principalInUSD: !usdValueStaked.isNaN() ? usdValueStaked.toNumber() : 0,\r\n    apr,\r\n    earningTokenPrice,\r\n  })\r\n  const annualRoi = interestBreakdown[3] * pool.earningTokenPrice\r\n  const formattedAnnualRoi = formatNumber(annualRoi, annualRoi > 10000 ? 0 : 2, annualRoi > 10000 ? 0 : 2)\r\n\r\n  const getTokenLink = stakingToken.address ? `/swap?outputCurrency=${stakingToken.address}` : '/swap'\r\n\r\n  useEffect(() => {\r\n    if (stakingLimit.gt(0) && !isRemovingStake) {\r\n      setHasReachedStakedLimit(fullDecimalStakeAmount.plus(userData.stakedBalance).gt(stakingLimit))\r\n    }\r\n  }, [\r\n    stakeAmount,\r\n    stakingLimit,\r\n    userData,\r\n    stakingToken,\r\n    isRemovingStake,\r\n    setHasReachedStakedLimit,\r\n    fullDecimalStakeAmount,\r\n  ])\r\n\r\n  const handleStakeInputChange = (input: string) => {\r\n    if (input) {\r\n      const convertedInput = getDecimalAmount(new BigNumber(input), stakingToken.decimals)\r\n      const percentage = Math.floor(convertedInput.dividedBy(getCalculatedStakingLimit()).multipliedBy(100).toNumber())\r\n      setPercent(Math.min(percentage, 100))\r\n    } else {\r\n      setPercent(0)\r\n    }\r\n    setStakeAmount(input)\r\n  }\r\n\r\n  const handleChangePercent = (sliderPercent: number) => {\r\n    if (sliderPercent > 0) {\r\n      const percentageOfStakingMax = getCalculatedStakingLimit().dividedBy(100).multipliedBy(sliderPercent)\r\n      const amountToStake = getFullDisplayBalance(percentageOfStakingMax, stakingToken.decimals, stakingToken.decimals)\r\n      setStakeAmount(amountToStake)\r\n    } else {\r\n      setStakeAmount('')\r\n    }\r\n    setPercent(sliderPercent)\r\n  }\r\n\r\n  const handleConfirmClick = async () => {\r\n    setPendingTx(true)\r\n    try {\r\n      if (isRemovingStake) {\r\n        // unstaking\r\n        await onUnstake(stakeAmount, stakingToken.decimals)\r\n        toastSuccess(\r\n          `${t('Unstaked')}!`,\r\n          t('Your %symbol% earnings have also been harvested to your wallet!', {\r\n            symbol: earningToken.symbol,\r\n          }),\r\n        )\r\n      } else {\r\n        // staking\r\n        await onStake(stakeAmount, stakingToken.decimals)\r\n        toastSuccess(\r\n          `${t('Staked')}!`,\r\n          t('Your %symbol% funds have been staked in the pool!', {\r\n            symbol: stakingToken.symbol,\r\n          }),\r\n        )\r\n      }\r\n      setPendingTx(false)\r\n      onDismiss()\r\n    } catch (e) {\r\n      toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      setPendingTx(false)\r\n    }\r\n  }\r\n\r\n  if (showRoiCalculator) {\r\n    return (\r\n      <RoiCalculatorModal\r\n        earningTokenPrice={earningTokenPrice}\r\n        stakingTokenPrice={stakingTokenPrice}\r\n        apr={apr}\r\n        linkLabel={t('Get %symbol%', { symbol: stakingToken.symbol })}\r\n        linkHref={getTokenLink}\r\n        stakingTokenBalance={userData.stakedBalance.plus(stakingTokenBalance)}\r\n        stakingTokenSymbol={stakingToken.symbol}\r\n        earningTokenSymbol={earningToken.symbol}\r\n        onBack={() => setShowRoiCalculator(false)}\r\n        initialValue={stakeAmount}\r\n      />\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Modal\r\n      minWidth=\"346px\"\r\n      title={isRemovingStake ? t('Unstake') : t('Stake in Pool')}\r\n      onDismiss={onDismiss}\r\n      headerBackground={theme.colors.gradients.cardHeader}\r\n    >\r\n      {stakingLimit.gt(0) && !isRemovingStake && (\r\n        <Text color=\"secondary\" bold mb=\"24px\" style={{ textAlign: 'center' }} fontSize=\"16px\">\r\n          {t('Max stake for this pool: %amount% %token%', {\r\n            amount: getFullDisplayBalance(stakingLimit, stakingToken.decimals, 0),\r\n            token: stakingToken.symbol,\r\n          })}\r\n        </Text>\r\n      )}\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mb=\"8px\">\r\n        <Text bold>{isRemovingStake ? t('Unstake') : t('Stake')}:</Text>\r\n        <Flex alignItems=\"center\" minWidth=\"70px\">\r\n          <Image src={`/images/tokens/${stakingToken.address}.png`} width={24} height={24} alt={stakingToken.symbol} />\r\n          <Text ml=\"4px\" bold>\r\n            {stakingToken.symbol}\r\n          </Text>\r\n        </Flex>\r\n      </Flex>\r\n      <BalanceInput\r\n        value={stakeAmount}\r\n        onUserInput={handleStakeInputChange}\r\n        currencyValue={stakingTokenPrice !== 0 && `~${formattedUsdValueStaked || 0} USD`}\r\n        isWarning={hasReachedStakeLimit || userNotEnoughToken}\r\n        decimals={stakingToken.decimals}\r\n      />\r\n      {hasReachedStakeLimit && (\r\n        <Text color=\"failure\" fontSize=\"12px\" style={{ textAlign: 'right' }} mt=\"4px\">\r\n          {t('Maximum total stake: %amount% %token%', {\r\n            amount: getFullDisplayBalance(new BigNumber(stakingLimit), stakingToken.decimals, 0),\r\n            token: stakingToken.symbol,\r\n          })}\r\n        </Text>\r\n      )}\r\n      {userNotEnoughToken && (\r\n        <Text color=\"failure\" fontSize=\"12px\" style={{ textAlign: 'right' }} mt=\"4px\">\r\n          {t('Insufficient %symbol% balance', {\r\n            symbol: stakingToken.symbol,\r\n          })}\r\n        </Text>\r\n      )}\r\n      <Text ml=\"auto\" color=\"textSubtle\" fontSize=\"12px\" mb=\"8px\">\r\n        {t('Balance: %balance%', {\r\n          balance: getFullDisplayBalance(getCalculatedStakingLimit(), stakingToken.decimals),\r\n        })}\r\n      </Text>\r\n      <Slider\r\n        min={0}\r\n        max={100}\r\n        value={percent}\r\n        onValueChanged={handleChangePercent}\r\n        name=\"stake\"\r\n        valueLabel={`${percent}%`}\r\n        step={1}\r\n      />\r\n      <Flex alignItems=\"center\" justifyContent=\"space-between\" mt=\"8px\">\r\n        <PercentageButton onClick={() => handleChangePercent(25)}>25%</PercentageButton>\r\n        <PercentageButton onClick={() => handleChangePercent(50)}>50%</PercentageButton>\r\n        <PercentageButton onClick={() => handleChangePercent(75)}>75%</PercentageButton>\r\n        <PercentageButton onClick={() => handleChangePercent(100)}>{t('Max')}</PercentageButton>\r\n      </Flex>\r\n      {!isRemovingStake && (\r\n        <Flex mt=\"24px\" alignItems=\"center\" justifyContent=\"space-between\">\r\n          <Text mr=\"8px\" color=\"textSubtle\">\r\n            {t('Annual ROI at current rates')}:\r\n          </Text>\r\n          {Number.isFinite(annualRoi) ? (\r\n            <AnnualRoiContainer\r\n              alignItems=\"center\"\r\n              onClick={() => {\r\n                setShowRoiCalculator(true)\r\n              }}\r\n            >\r\n              <AnnualRoiDisplay>${formattedAnnualRoi}</AnnualRoiDisplay>\r\n              <IconButton variant=\"text\" scale=\"sm\">\r\n                <CalculateIcon color=\"textSubtle\" width=\"18px\" />\r\n              </IconButton>\r\n            </AnnualRoiContainer>\r\n          ) : (\r\n            <Skeleton width={60} />\r\n          )}\r\n        </Flex>\r\n      )}\r\n      <Button\r\n        isLoading={pendingTx}\r\n        endIcon={pendingTx ? <AutoRenewIcon spin color=\"currentColor\" /> : null}\r\n        onClick={handleConfirmClick}\r\n        disabled={!stakeAmount || parseFloat(stakeAmount) === 0 || hasReachedStakeLimit || userNotEnoughToken}\r\n        mt=\"24px\"\r\n      >\r\n        {pendingTx ? t('Confirming') : t('Confirm')}\r\n      </Button>\r\n      {!isRemovingStake && (\r\n        <StyledLink external href={getTokenLink}>\r\n          <Button width=\"100%\" mt=\"8px\" variant=\"secondary\">\r\n            {t('Get %symbol%', { symbol: stakingToken.symbol })}\r\n          </Button>\r\n        </StyledLink>\r\n      )}\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default StakeModal\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Button, useModal, IconButton, AddIcon, MinusIcon, Skeleton, useTooltip, Flex, Text } from '@pancakeswap/uikit'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useVaultPoolByKey } from 'state/pools/hooks'\r\nimport { DeserializedPool } from 'state/types'\r\nimport Balance from 'components/Balance'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport { PoolCategory } from 'config/constants/types'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { useERC20 } from 'hooks/useContract'\r\nimport { convertSharesToCake } from 'views/Pools/helpers'\r\nimport { ActionContainer, ActionTitles, ActionContent } from './styles'\r\nimport NotEnoughTokensModal from '../../PoolCard/Modals/NotEnoughTokensModal'\r\nimport StakeModal from '../../PoolCard/Modals/StakeModal'\r\nimport VaultStakeModal from '../../CakeVaultCard/VaultStakeModal'\r\nimport { useCheckVaultApprovalStatus, useApprovePool, useVaultApprove } from '../../../hooks/useApprove'\r\n\r\nconst IconButtonWrapper = styled.div`\r\n  display: flex;\r\n`\r\n\r\ninterface StackedActionProps {\r\n  pool: DeserializedPool\r\n  userDataLoaded: boolean\r\n}\r\n\r\nconst Staked: React.FunctionComponent<StackedActionProps> = ({ pool, userDataLoaded }) => {\r\n  const {\r\n    sousId,\r\n    stakingToken,\r\n    earningToken,\r\n    stakingLimit,\r\n    isFinished,\r\n    poolCategory,\r\n    userData,\r\n    stakingTokenPrice,\r\n    vaultKey,\r\n  } = pool\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n\r\n  const stakingTokenContract = useERC20(stakingToken.address || '')\r\n  const { handleApprove: handlePoolApprove, requestedApproval: requestedPoolApproval } = useApprovePool(\r\n    stakingTokenContract,\r\n    sousId,\r\n    earningToken.symbol,\r\n  )\r\n\r\n  const { isVaultApproved, setLastUpdated } = useCheckVaultApprovalStatus(pool.vaultKey)\r\n  const { handleApprove: handleVaultApprove, requestedApproval: requestedVaultApproval } = useVaultApprove(\r\n    pool.vaultKey,\r\n    setLastUpdated,\r\n  )\r\n\r\n  const handleApprove = vaultKey ? handleVaultApprove : handlePoolApprove\r\n  const requestedApproval = vaultKey ? requestedVaultApproval : requestedPoolApproval\r\n\r\n  const isBnbPool = poolCategory === PoolCategory.BINANCE\r\n  const allowance = userData?.allowance ? new BigNumber(userData.allowance) : BIG_ZERO\r\n  const stakedBalance = userData?.stakedBalance ? new BigNumber(userData.stakedBalance) : BIG_ZERO\r\n  const isNotVaultAndHasStake = !vaultKey && stakedBalance.gt(0)\r\n\r\n  const stakingTokenBalance = userData?.stakingTokenBalance ? new BigNumber(userData.stakingTokenBalance) : BIG_ZERO\r\n\r\n  const stakedTokenBalance = getBalanceNumber(stakedBalance, stakingToken.decimals)\r\n  const stakedTokenDollarBalance = getBalanceNumber(\r\n    stakedBalance.multipliedBy(stakingTokenPrice),\r\n    stakingToken.decimals,\r\n  )\r\n\r\n  const {\r\n    userData: { userShares },\r\n    pricePerFullShare,\r\n  } = useVaultPoolByKey(pool.vaultKey)\r\n\r\n  const { cakeAsBigNumber, cakeAsNumberBalance } = convertSharesToCake(userShares, pricePerFullShare)\r\n  const hasSharesStaked = userShares && userShares.gt(0)\r\n  const isVaultWithShares = vaultKey && hasSharesStaked\r\n  const stakedAutoDollarValue = getBalanceNumber(cakeAsBigNumber.multipliedBy(stakingTokenPrice), stakingToken.decimals)\r\n\r\n  const needsApproval = vaultKey ? !isVaultApproved : !allowance.gt(0) && !isBnbPool\r\n\r\n  const [onPresentTokenRequired] = useModal(<NotEnoughTokensModal tokenSymbol={stakingToken.symbol} />)\r\n\r\n  const [onPresentStake] = useModal(\r\n    <StakeModal\r\n      isBnbPool={isBnbPool}\r\n      pool={pool}\r\n      stakingTokenBalance={stakingTokenBalance}\r\n      stakingTokenPrice={stakingTokenPrice}\r\n    />,\r\n  )\r\n\r\n  const [onPresentVaultStake] = useModal(<VaultStakeModal stakingMax={stakingTokenBalance} pool={pool} />)\r\n\r\n  const [onPresentUnstake] = useModal(\r\n    <StakeModal\r\n      stakingTokenBalance={stakingTokenBalance}\r\n      isBnbPool={isBnbPool}\r\n      pool={pool}\r\n      stakingTokenPrice={stakingTokenPrice}\r\n      isRemovingStake\r\n    />,\r\n  )\r\n\r\n  const [onPresentVaultUnstake] = useModal(<VaultStakeModal stakingMax={cakeAsBigNumber} pool={pool} isRemovingStake />)\r\n\r\n  const onStake = () => {\r\n    if (vaultKey) {\r\n      onPresentVaultStake()\r\n    } else {\r\n      onPresentStake()\r\n    }\r\n  }\r\n\r\n  const onUnstake = () => {\r\n    if (vaultKey) {\r\n      onPresentVaultUnstake()\r\n    } else {\r\n      onPresentUnstake()\r\n    }\r\n  }\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t(\"You've already staked the maximum amount you can stake in this pool!\"),\r\n    { placement: 'bottom' },\r\n  )\r\n\r\n  const reachStakingLimit = stakingLimit.gt(0) && userData.stakedBalance.gte(stakingLimit)\r\n\r\n  if (!account) {\r\n    return (\r\n      <ActionContainer>\r\n        <ActionTitles>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" as=\"span\" textTransform=\"uppercase\">\r\n            {t('Start staking')}\r\n          </Text>\r\n        </ActionTitles>\r\n        <ActionContent>\r\n          <ConnectWalletButton width=\"100%\" />\r\n        </ActionContent>\r\n      </ActionContainer>\r\n    )\r\n  }\r\n\r\n  if (!userDataLoaded) {\r\n    return (\r\n      <ActionContainer>\r\n        <ActionTitles>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" as=\"span\" textTransform=\"uppercase\">\r\n            {t('Start staking')}\r\n          </Text>\r\n        </ActionTitles>\r\n        <ActionContent>\r\n          <Skeleton width={180} height=\"32px\" marginTop={14} />\r\n        </ActionContent>\r\n      </ActionContainer>\r\n    )\r\n  }\r\n\r\n  if (needsApproval) {\r\n    return (\r\n      <ActionContainer>\r\n        <ActionTitles>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" as=\"span\" textTransform=\"uppercase\">\r\n            {t('Enable pool')}\r\n          </Text>\r\n        </ActionTitles>\r\n        <ActionContent>\r\n          <Button width=\"100%\" disabled={requestedApproval} onClick={handleApprove} variant=\"secondary\">\r\n            {t('Enable')}\r\n          </Button>\r\n        </ActionContent>\r\n      </ActionContainer>\r\n    )\r\n  }\r\n\r\n  // Wallet connected, user data loaded and approved\r\n  if (isNotVaultAndHasStake || isVaultWithShares) {\r\n    return (\r\n      <ActionContainer isAutoVault={!!vaultKey}>\r\n        <ActionTitles>\r\n          <Text fontSize=\"12px\" bold color=\"secondary\" as=\"span\" textTransform=\"uppercase\">\r\n            {stakingToken.symbol}{' '}\r\n          </Text>\r\n          <Text fontSize=\"12px\" bold color=\"textSubtle\" as=\"span\" textTransform=\"uppercase\">\r\n            {vaultKey ? t('Staked (compounding)') : t('Staked')}\r\n          </Text>\r\n        </ActionTitles>\r\n        <ActionContent>\r\n          <Flex flex=\"1\" pt=\"16px\" flexDirection=\"column\" alignSelf=\"flex-start\">\r\n            <Balance\r\n              lineHeight=\"1\"\r\n              bold\r\n              fontSize=\"20px\"\r\n              decimals={5}\r\n              value={vaultKey ? cakeAsNumberBalance : stakedTokenBalance}\r\n            />\r\n            <Balance\r\n              fontSize=\"12px\"\r\n              display=\"inline\"\r\n              color=\"textSubtle\"\r\n              decimals={2}\r\n              value={vaultKey ? stakedAutoDollarValue : stakedTokenDollarBalance}\r\n              unit=\" USD\"\r\n              prefix=\"~\"\r\n            />\r\n          </Flex>\r\n          <IconButtonWrapper>\r\n            <IconButton variant=\"secondary\" onClick={onUnstake} mr=\"6px\">\r\n              <MinusIcon color=\"primary\" width=\"14px\" />\r\n            </IconButton>\r\n            {reachStakingLimit ? (\r\n              <span ref={targetRef}>\r\n                <IconButton variant=\"secondary\" disabled>\r\n                  <AddIcon color=\"textDisabled\" width=\"24px\" height=\"24px\" />\r\n                </IconButton>\r\n              </span>\r\n            ) : (\r\n              <IconButton\r\n                variant=\"secondary\"\r\n                onClick={stakingTokenBalance.gt(0) ? onStake : onPresentTokenRequired}\r\n                disabled={isFinished}\r\n              >\r\n                <AddIcon color=\"primary\" width=\"14px\" />\r\n              </IconButton>\r\n            )}\r\n          </IconButtonWrapper>\r\n          {tooltipVisible && tooltip}\r\n        </ActionContent>\r\n      </ActionContainer>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <ActionContainer>\r\n      <ActionTitles>\r\n        <Text fontSize=\"12px\" bold color=\"secondary\" as=\"span\" textTransform=\"uppercase\">\r\n          {t('Stake')}{' '}\r\n        </Text>\r\n        <Text fontSize=\"12px\" bold color=\"textSubtle\" as=\"span\" textTransform=\"uppercase\">\r\n          {stakingToken.symbol}\r\n        </Text>\r\n      </ActionTitles>\r\n      <ActionContent>\r\n        <Button\r\n          width=\"100%\"\r\n          onClick={stakingTokenBalance.gt(0) ? onStake : onPresentTokenRequired}\r\n          variant=\"secondary\"\r\n          disabled={isFinished}\r\n        >\r\n          {t('Stake')}\r\n        </Button>\r\n      </ActionContent>\r\n    </ActionContainer>\r\n  )\r\n}\r\n\r\nexport default Staked\r\n","import {\r\n  useMatchBreakpoints,\r\n  Card,\r\n  CardHeader,\r\n  Text,\r\n  Flex,\r\n  Box,\r\n  ExpandableButton,\r\n  CardBody,\r\n  HelpIcon,\r\n  useTooltip,\r\n  LinkExternal,\r\n  Link,\r\n} from '@pancakeswap/uikit'\r\nimport BigNumber from 'bignumber.js'\r\nimport Balance from 'components/Balance'\r\nimport { TokenPairImage } from 'components/TokenImage'\r\nimport tokens from 'config/constants/tokens'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useActiveWeb3React from 'hooks/useActiveWeb3React'\r\nimport React, { useState } from 'react'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { useIfoPoolVault, useIfoPoolCredit, useIfoWithApr, useIfoPooStartBlock } from 'state/pools/hooks'\r\nimport styled from 'styled-components'\r\nimport { getBalanceNumber, getDecimalAmount } from 'utils/formatBalance'\r\nimport CakeVaultCard from 'views/Pools/components/CakeVaultCard'\r\nimport ExpandedFooter from 'views/Pools/components/PoolCard/CardFooter/ExpandedFooter'\r\nimport { IfoVaultCardAvgBalance } from 'views/Pools/components/CakeVaultCard/VaultCardActions'\r\nimport AprRow from 'views/Pools/components/PoolCard/AprRow'\r\nimport Staked from 'views/Pools/components/PoolsTable/ActionPanel/Stake'\r\nimport { CompoundingPoolTag } from 'components/Tags'\r\nimport { ActionContainer } from 'views/Pools/components/PoolsTable/ActionPanel/styles'\r\nimport { VaultKey } from 'state/types'\r\nimport UnstakingFeeCountdownRow from 'views/Pools/components/CakeVaultCard/UnstakingFeeCountdownRow'\r\nimport RecentCakeProfitCountdownRow from 'views/Pools/components/CakeVaultCard/RecentCakeProfitRow'\r\nimport { getBscScanLink } from 'utils'\r\n\r\nconst StyledCardMobile = styled(Card)`\r\n  max-width: 400px;\r\n  width: 100%;\r\n`\r\n\r\nconst StyledTokenContent = styled(Flex)`\r\n  ${Text} {\r\n    line-height: 1.2;\r\n    white-space: nowrap;\r\n  }\r\n`\r\n\r\nconst StyledCardFooter = styled(Box)`\r\n  padding: 16px;\r\n  background-color: ${({ theme }) => theme.colors.dropdown};\r\n`\r\n\r\nconst StyledCardBody = styled(CardBody)`\r\n  display: grid;\r\n  padding: 16px;\r\n  background-color: ${({ theme }) => theme.colors.dropdown};\r\n  gap: 16px;\r\n  ${ActionContainer} {\r\n    margin: 0;\r\n    background-color: ${({ theme }) => theme.colors.invertedContrast};\r\n  }\r\n`\r\n\r\nconst IfoPoolVaultCardMobile: React.FC = () => {\r\n  const { pool, userDataLoaded } = useIfoWithApr()\r\n  const { account } = useActiveWeb3React()\r\n  const { t } = useTranslation()\r\n  const credit = useIfoPoolCredit()\r\n  const {\r\n    fees: { performanceFeeAsDecimal },\r\n  } = useIfoPoolVault()\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n  const creditStartBlock = useIfoPooStartBlock()\r\n  const {\r\n    tooltip: startBlockTooltip,\r\n    tooltipVisible: startBlockTooltipVisible,\r\n    targetRef: startBlockTargetRef,\r\n  } = useTooltip(\r\n    <>\r\n      <Text>\r\n        {t(\r\n          'The start block of the current calculation period. Your average IFO CAKE Pool staking balance is calculated throughout this period.',\r\n        )}\r\n      </Text>\r\n      <LinkExternal href=\"https://medium.com/pancakeswap/initial-farm-offering-ifo-3-0-ifo-staking-pool-622d8bd356f1\">\r\n        {t('Check out our Medium article for more details.')}\r\n      </LinkExternal>\r\n    </>,\r\n    { placement: 'auto' },\r\n  )\r\n\r\n  // TODO: refactor this is use everywhere\r\n  const cakeAsNumberBalance = getBalanceNumber(credit)\r\n  const cakeAsBigNumber = getDecimalAmount(new BigNumber(cakeAsNumberBalance))\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const stakedDollarValue = cakePriceBusd.gt(0)\r\n    ? getBalanceNumber(cakeAsBigNumber.multipliedBy(cakePriceBusd), pool.stakingToken.decimals)\r\n    : 0\r\n\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    t('Any funds you stake in this pool will be automagically harvested and restaked (compounded) for you.'),\r\n    {\r\n      placement: 'bottom',\r\n    },\r\n  )\r\n  return (\r\n    <StyledCardMobile isActive>\r\n      <CardHeader p=\"16px\">\r\n        <Flex justifyContent=\"space-between\" alignItems=\"center\">\r\n          <StyledTokenContent alignItems=\"center\" flex={1}>\r\n            <TokenPairImage width={24} height={24} primaryToken={tokens.cake} secondaryToken={tokens.cake} />\r\n            <Box ml=\"8px\">\r\n              <Text fontSize=\"12px\" bold color=\"secondary\" textTransform=\"uppercase\">\r\n                {t('Staked')}\r\n              </Text>\r\n              <Text small bold>\r\n                IFO CAKE\r\n              </Text>\r\n              <Text color=\"textSubtle\" fontSize=\"12px\">\r\n                {t('Stake')} CAKE\r\n              </Text>\r\n            </Box>\r\n          </StyledTokenContent>\r\n          <StyledTokenContent flexDirection=\"column\" flex={1}>\r\n            <Text color=\"textSubtle\" fontSize=\"12px\">\r\n              {t('Avg Balance')}\r\n            </Text>\r\n            <Balance small bold decimals={3} value={cakeAsNumberBalance} />\r\n            <Balance value={stakedDollarValue} fontSize=\"12px\" color=\"textSubtle\" decimals={2} prefix=\"~\" unit=\" USD\" />\r\n          </StyledTokenContent>\r\n          <ExpandableButton expanded={isExpanded} onClick={() => setIsExpanded((prev) => !prev)} />\r\n        </Flex>\r\n      </CardHeader>\r\n      {isExpanded && (\r\n        <>\r\n          <StyledCardBody>\r\n            <AprRow pool={pool} stakedBalance={cakeAsBigNumber} performanceFee={performanceFeeAsDecimal} />\r\n            {pool.vaultKey === VaultKey.IfoPool && (\r\n              <Flex mt=\"8px\" justifyContent=\"space-between\">\r\n                <Text fontSize=\"14px\">{t('Credit calculation starts:')}</Text>\r\n                <Flex mr=\"6px\" alignItems=\"center\">\r\n                  <Link external href={getBscScanLink(creditStartBlock, 'block')} mr=\"4px\" fontSize=\"14px\">\r\n                    {creditStartBlock}\r\n                  </Link>\r\n                  <span ref={startBlockTargetRef}>\r\n                    <HelpIcon color=\"textSubtle\" />\r\n                  </span>\r\n                </Flex>\r\n                {startBlockTooltipVisible && startBlockTooltip}\r\n              </Flex>\r\n            )}\r\n            <ActionContainer>\r\n              <IfoVaultCardAvgBalance pool={pool} />\r\n            </ActionContainer>\r\n            <Staked pool={pool} userDataLoaded={userDataLoaded} />\r\n            <ActionContainer>\r\n              <Box>\r\n                <RecentCakeProfitCountdownRow vaultKey={VaultKey.IfoPool} />\r\n              </Box>\r\n              <Box mt=\"8px\">\r\n                <UnstakingFeeCountdownRow vaultKey={VaultKey.IfoPool} />\r\n              </Box>\r\n            </ActionContainer>\r\n          </StyledCardBody>\r\n          <StyledCardFooter>\r\n            <ExpandedFooter account={account} pool={pool} />\r\n            <Flex alignItems=\"center\">\r\n              <CompoundingPoolTag />\r\n              {tooltipVisible && tooltip}\r\n              <Flex ref={targetRef}>\r\n                <HelpIcon ml=\"4px\" width=\"20px\" height=\"20px\" color=\"textSubtle\" />\r\n              </Flex>\r\n            </Flex>\r\n          </StyledCardFooter>\r\n        </>\r\n      )}\r\n    </StyledCardMobile>\r\n  )\r\n}\r\n\r\nconst IfoPoolVaultCard = () => {\r\n  const { pool } = useIfoWithApr()\r\n  const { isMd, isXs, isSm } = useMatchBreakpoints()\r\n  const isSmallerThanTablet = isMd || isXs || isSm\r\n  if (isSmallerThanTablet) {\r\n    return <IfoPoolVaultCardMobile />\r\n  }\r\n\r\n  return <CakeVaultCard pool={pool} showStakedOnly={false} m=\"auto\" />\r\n}\r\n\r\nexport default IfoPoolVaultCard\r\n","import { ContextApi } from 'contexts/Localization/types'\r\n\r\nconst config = (t: ContextApi['t']) => {\r\n  return [\r\n    {\r\n      title: t('Whats the difference between a Basic Sale and Unlimited Sale?'),\r\n      description: [\r\n        t(\r\n          'In the Basic Sale, every user can commit a maximum of about 100 USD worth of CAKE. We calculate the maximum CAKE amount about 30 minutes before each IFO. The Basic Sale has no participation fee.',\r\n        ),\r\n        t(\r\n          'In the Unlimited Sale, theres no limit to the amount of CAKE you can commit. However, theres a fee for participation: see below.',\r\n        ),\r\n      ],\r\n    },\r\n    {\r\n      title: t('Which sale should I commit to? Can I do both?'),\r\n      description: [\r\n        t(\r\n          'You can choose one or both at the same time! If youre only committing a small amount, we recommend the Basic Sale first. Just remember you need a PancakeSwap Profile in order to participate.',\r\n        ),\r\n      ],\r\n    },\r\n    {\r\n      title: t('How much is the participation fee?'),\r\n      description: [\r\n        t('Theres only a participation fee for the Unlimited Sale: theres no fee for the Basic Sale.'),\r\n        t('The fee will start at 1%.'),\r\n        t(\r\n          'The 1% participation fee decreases in cliffs, based on the percentage of overflow from the Unlimited portion of the sale.',\r\n        ),\r\n      ],\r\n    },\r\n    {\r\n      title: t('Where does the participation fee go?'),\r\n      description: [t('The CAKE from the participation fee will be thrown into the weekly token burn.')],\r\n    },\r\n    {\r\n      title: t('How can I get an achievement for participating in the IFO?'),\r\n      description: [\r\n        t('You need to contribute a minimum of about 10 USD worth of CAKE to either sale.'),\r\n        t(\r\n          'You can contribute to one or both, it doesnt matter: only your overall contribution is counted for the achievement.',\r\n        ),\r\n      ],\r\n    },\r\n  ]\r\n}\r\nexport default config\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Text, Heading, Card, CardHeader, CardBody, Flex } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport FoldableText from 'components/FoldableSection/FoldableText'\r\nimport config from './config'\r\n\r\nconst ImageWrapper = styled.div`\r\n  flex: none;\r\n  order: 2;\r\n  max-width: 414px;\r\n  width: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    order: 1;\r\n  }\r\n`\r\n\r\nconst DetailsWrapper = styled.div`\r\n  order: 1;\r\n  margin-bottom: 40px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    order: 2;\r\n    margin-bottom: 0;\r\n    margin-left: 40px;\r\n  }\r\n`\r\n\r\nconst IfoQuestions = () => {\r\n  const { t } = useTranslation()\r\n\r\n  return (\r\n    <Flex alignItems={['center', null, null, 'start']} flexDirection={['column', null, null, 'row']}>\r\n      <ImageWrapper>\r\n        <img src=\"/images/ifos/ifo-bunny.png\" alt=\"ifo bunny\" width=\"414px\" height=\"500px\" />\r\n      </ImageWrapper>\r\n      <DetailsWrapper>\r\n        <Card>\r\n          <CardHeader>\r\n            <Heading scale=\"lg\" color=\"secondary\">\r\n              {t('Details')}\r\n            </Heading>\r\n          </CardHeader>\r\n          <CardBody>\r\n            {config(t).map(({ title, description }, i, { length }) => (\r\n              <FoldableText key={title} id={title} mb={i + 1 === length ? '' : '24px'} title={title}>\r\n                {description.map((desc) => {\r\n                  return (\r\n                    <Text key={desc} color=\"textSubtle\" as=\"p\">\r\n                      {desc}\r\n                    </Text>\r\n                  )\r\n                })}\r\n              </FoldableText>\r\n            ))}\r\n          </CardBody>\r\n        </Card>\r\n      </DetailsWrapper>\r\n    </Flex>\r\n  )\r\n}\r\n\r\nexport default IfoQuestions\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport every from 'lodash/every'\r\nimport {\r\n  Stepper,\r\n  Step,\r\n  StepStatus,\r\n  Card,\r\n  CardBody,\r\n  Heading,\r\n  Text,\r\n  Button,\r\n  Box,\r\n  CheckmarkIcon,\r\n  Flex,\r\n  useTooltip,\r\n  TooltipText,\r\n  PancakeRoundIcon,\r\n  Skeleton,\r\n  useModal,\r\n  Link,\r\n} from '@pancakeswap/uikit'\r\nimport { Link as RouterLink } from 'react-router-dom'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Ifo } from 'config/constants/types'\r\nimport { WalletIfoData } from 'views/Ifos/types'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport useTokenBalance from 'hooks/useTokenBalance'\r\nimport Container from 'components/Layout/Container'\r\nimport { useProfile } from 'state/profile/hooks'\r\nimport Balance from 'components/Balance'\r\nimport { nftsBaseUrl } from 'views/Nft/market/constants'\r\nimport ConnectWalletButton from 'components/ConnectWalletButton'\r\nimport { usePriceCakeBusd } from 'state/farms/hooks'\r\nimport { FlexGap } from 'components/Layout/Flex'\r\nimport { getBalanceNumber } from 'utils/formatBalance'\r\nimport VaultStakeModal from 'views/Pools/components/CakeVaultCard/VaultStakeModal'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useIfoPoolVault, useIfoPoolCredit, useIfoWithApr } from 'state/pools/hooks'\r\n\r\ninterface Props {\r\n  ifo: Ifo\r\n  walletIfoData: WalletIfoData\r\n  isLive?: boolean\r\n}\r\n\r\nconst Wrapper = styled(Container)`\r\n  background: ${({ theme }) => theme.colors.gradients.bubblegum};\r\n  margin-left: -16px;\r\n  margin-right: -16px;\r\n  padding-top: 48px;\r\n  padding-bottom: 48px;\r\n\r\n  ${({ theme }) => theme.mediaQueries.sm} {\r\n    margin-left: -24px;\r\n    margin-right: -24px;\r\n  }\r\n`\r\n\r\nconst InlineLink = styled(Link)`\r\n  display: inline;\r\n`\r\n\r\nconst SmallStakePoolCard = styled(Box)`\r\n  margin-top: 16px;\r\n  border: 1px solid ${({ theme }) => theme.colors.cardBorder};\r\n  background-color: ${({ theme }) => theme.colors.background};\r\n`\r\n\r\nconst Step1 = ({ hasProfile }: { hasProfile: boolean }) => {\r\n  const { t } = useTranslation()\r\n  const ifoPoolVault = useIfoPoolVault()\r\n  const credit = useIfoPoolCredit()\r\n  const { pool } = useIfoWithApr()\r\n  const { targetRef, tooltip, tooltipVisible } = useTooltip(\r\n    <Box>\r\n      <span>\r\n        {t(\r\n          'Average pool balance is calculated by average block balance in the IFO pool in over the staking period announced with each IFO proposal.',\r\n        )}\r\n      </span>{' '}\r\n      <InlineLink\r\n        external\r\n        href=\"https://medium.com/pancakeswap/initial-farm-offering-ifo-3-0-ifo-staking-pool-622d8bd356f1\"\r\n      >\r\n        {t('Please refer to our blog post for more details.')}\r\n      </InlineLink>\r\n    </Box>,\r\n    {},\r\n  )\r\n\r\n  const cakePriceBusd = usePriceCakeBusd()\r\n  const stakedDollarValue = cakePriceBusd.gt(0) && credit ? getBalanceNumber(credit.multipliedBy(cakePriceBusd), 18) : 0\r\n\r\n  const stakingTokenBalance = pool?.userData?.stakingTokenBalance\r\n    ? new BigNumber(pool.userData.stakingTokenBalance)\r\n    : BIG_ZERO\r\n\r\n  const [onPresentStake] = useModal(\r\n    <VaultStakeModal\r\n      stakingMax={stakingTokenBalance}\r\n      performanceFee={ifoPoolVault.fees.performanceFeeAsDecimal}\r\n      pool={pool}\r\n    />,\r\n  )\r\n\r\n  return (\r\n    <CardBody>\r\n      {tooltipVisible && tooltip}\r\n      <Heading as=\"h4\" color=\"secondary\" mb=\"16px\">\r\n        {t('Stake CAKE in IFO pool')}\r\n      </Heading>\r\n      <Box>\r\n        <Text color=\"textSubtle\" small>\r\n          {t(\r\n            'The maximum amount of CAKE user can commit to all the sales combined, is equal to the average CAKE balance in the IFO CAKE pool prior to the IFO. Stake more CAKE to increase the maximum CAKE you can commit to the sale. Missed this IFO? You can keep staking in the IFO CAKE Pool to join the next IFO sale.',\r\n          )}\r\n        </Text>\r\n        <TooltipText as=\"span\" fontWeight={700} ref={targetRef} color=\"textSubtle\" small>\r\n          {t('How does the average balance calculated?')}\r\n        </TooltipText>\r\n      </Box>\r\n      {hasProfile && (\r\n        <SmallStakePoolCard borderRadius=\"default\" p=\"16px\">\r\n          <FlexGap justifyContent=\"space-between\" alignItems=\"center\" flexWrap=\"wrap\" gap=\"16px\">\r\n            <Flex>\r\n              <PancakeRoundIcon style={{ alignSelf: 'flex-start' }} width={32} height={32} />\r\n              <Box ml=\"16px\">\r\n                <Text bold fontSize=\"12px\" textTransform=\"uppercase\" color=\"secondary\">\r\n                  {t('Your max CAKE entry')}\r\n                </Text>\r\n                <Balance fontSize=\"20px\" bold decimals={5} value={getBalanceNumber(credit)} />\r\n                <Text fontSize=\"12px\" color=\"textSubtle\">\r\n                  {cakePriceBusd.gt(0) ? (\r\n                    <Balance\r\n                      value={stakedDollarValue}\r\n                      fontSize=\"12px\"\r\n                      color=\"textSubtle\"\r\n                      decimals={2}\r\n                      prefix=\"~\"\r\n                      unit=\" USD\"\r\n                    />\r\n                  ) : (\r\n                    <Skeleton mt=\"1px\" height={16} width={64} />\r\n                  )}\r\n                </Text>\r\n              </Box>\r\n            </Flex>\r\n            <Button onClick={onPresentStake}>{t('Stake')} CAKE</Button>\r\n          </FlexGap>\r\n        </SmallStakePoolCard>\r\n      )}\r\n    </CardBody>\r\n  )\r\n}\r\n\r\nconst Step2 = ({ hasProfile, isLive, isCommitted }: { hasProfile: boolean; isLive: boolean; isCommitted: boolean }) => {\r\n  const { t } = useTranslation()\r\n  return (\r\n    <CardBody>\r\n      <Heading as=\"h4\" color=\"secondary\" mb=\"16px\">\r\n        {t('Commit CAKE')}\r\n      </Heading>\r\n      <Text color=\"textSubtle\" small>\r\n        {t('When the IFO sales are live, you can commit your CAKE to buy the tokens being sold.')} <br />\r\n        {t('We recommend committing to the Basic Sale first, but you can do both if you like.')}\r\n      </Text>\r\n      {hasProfile && isLive && !isCommitted && (\r\n        <Button as=\"a\" href=\"#current-ifo\" mt=\"16px\">\r\n          {t('Commit CAKE')}\r\n        </Button>\r\n      )}\r\n    </CardBody>\r\n  )\r\n}\r\n\r\nconst IfoSteps: React.FC<Props> = ({ ifo, walletIfoData, isLive }) => {\r\n  const { poolBasic, poolUnlimited } = walletIfoData\r\n  const { hasProfile } = useProfile()\r\n  const { account } = useWeb3React()\r\n  const { t } = useTranslation()\r\n  const { balance } = useTokenBalance(ifo.currency.address)\r\n  const isCommitted =\r\n    poolBasic.amountTokenCommittedInLP.isGreaterThan(0) || poolUnlimited.amountTokenCommittedInLP.isGreaterThan(0)\r\n  const stepsValidationStatus = [\r\n    hasProfile,\r\n    balance.isGreaterThan(0),\r\n    isCommitted,\r\n    poolBasic.hasClaimed || poolUnlimited.hasClaimed,\r\n  ]\r\n\r\n  const getStatusProp = (index: number): StepStatus => {\r\n    const arePreviousValid = index === 0 ? true : every(stepsValidationStatus.slice(0, index), Boolean)\r\n    if (stepsValidationStatus[index]) {\r\n      return arePreviousValid ? 'past' : 'future'\r\n    }\r\n    return arePreviousValid ? 'current' : 'future'\r\n  }\r\n\r\n  const renderCardBody = (step: number) => {\r\n    const isStepValid = stepsValidationStatus[step]\r\n\r\n    const renderAccountStatus = () => {\r\n      if (!account) {\r\n        return <ConnectWalletButton />\r\n      }\r\n\r\n      if (isStepValid) {\r\n        return (\r\n          <Flex alignItems=\"center\">\r\n            <Text color=\"success\" bold mr=\"8px\">\r\n              {t('Profile Active!')}\r\n            </Text>\r\n            <CheckmarkIcon color=\"success\" />\r\n          </Flex>\r\n        )\r\n      }\r\n\r\n      return (\r\n        <Button as={RouterLink} to={`${nftsBaseUrl}/profile/${account.toLowerCase()}`}>\r\n          {t('Activate your Profile')}\r\n        </Button>\r\n      )\r\n    }\r\n\r\n    switch (step) {\r\n      case 0:\r\n        return (\r\n          <CardBody>\r\n            <Heading as=\"h4\" color=\"secondary\" mb=\"16px\">\r\n              {t('Activate your Profile')}\r\n            </Heading>\r\n            <Text color=\"textSubtle\" small mb=\"16px\">\r\n              {t('Youll need an active PancakeSwap Profile to take part in an IFO!')}\r\n            </Text>\r\n            {renderAccountStatus()}\r\n          </CardBody>\r\n        )\r\n      case 1:\r\n        return <Step1 hasProfile={hasProfile} />\r\n      case 2:\r\n        return <Step2 hasProfile={hasProfile} isLive={isLive} isCommitted={isCommitted} />\r\n      case 3:\r\n        return (\r\n          <CardBody>\r\n            <Heading as=\"h4\" color=\"secondary\" mb=\"16px\">\r\n              {t('Claim your tokens and achievement')}\r\n            </Heading>\r\n            <Text color=\"textSubtle\" small>\r\n              {t(\r\n                'After the IFO sales finish, you can claim any IFO tokens that you bought, and any unspent CAKE tokens will be returned to your wallet.',\r\n              )}\r\n            </Text>\r\n          </CardBody>\r\n        )\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Heading id=\"ifo-how-to\" as=\"h2\" scale=\"xl\" color=\"secondary\" mb=\"24px\" textAlign=\"center\">\r\n        {t('How to Take Part')}\r\n      </Heading>\r\n      <Stepper>\r\n        {stepsValidationStatus.map((_, index) => (\r\n          <Step\r\n            // eslint-disable-next-line react/no-array-index-key\r\n            key={index}\r\n            index={index}\r\n            statusFirstPart={getStatusProp(index)}\r\n            statusSecondPart={getStatusProp(index + 1)}\r\n          >\r\n            <Card>{renderCardBody(index)}</Card>\r\n          </Step>\r\n        ))}\r\n      </Stepper>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default IfoSteps\r\n","import { ifosConfig } from 'config/constants'\r\nimport React from 'react'\r\nimport useGetPublicIfoV2Data from 'views/Ifos/hooks/v2/useGetPublicIfoData'\r\nimport useGetWalletIfoV3Data from 'views/Ifos/hooks/v3/useGetWalletIfoData'\r\nimport { IfoCurrentCard } from './components/IfoFoldableCard'\r\nimport IfoLayout, { IfoLayoutWrapper } from './components/IfoLayout'\r\nimport IfoPoolVaultCard from './components/IfoPoolVaultCard'\r\nimport IfoQuestions from './components/IfoQuestions'\r\nimport IfoSteps from './components/IfoSteps'\r\n\r\n/**\r\n * Note: currently there should be only 1 active IFO at a time\r\n */\r\nconst activeIfo = ifosConfig.find((ifo) => ifo.isActive)\r\n\r\nconst Ifo = () => {\r\n  const publicIfoData = useGetPublicIfoV2Data(activeIfo)\r\n  const walletIfoData = useGetWalletIfoV3Data(activeIfo)\r\n\r\n  return (\r\n    <IfoLayout id=\"current-ifo\" py={['24px', '24px', '40px']}>\r\n      <IfoLayoutWrapper>\r\n        <IfoPoolVaultCard />\r\n        <IfoCurrentCard ifo={activeIfo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n      </IfoLayoutWrapper>\r\n      <IfoSteps isLive={publicIfoData.status === 'live'} ifo={activeIfo} walletIfoData={walletIfoData} />\r\n      <IfoQuestions />\r\n    </IfoLayout>\r\n  )\r\n}\r\n\r\nexport default Ifo\r\n","import { useState, useCallback } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { BSC_BLOCK_TIME } from 'config'\r\nimport { Ifo, IfoStatus, PoolIds } from 'config/constants/types'\r\nimport { useLpTokenPrice } from 'state/farms/hooks'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport ifoV1Abi from 'config/abi/ifoV1.json'\r\nimport { PublicIfoData } from '../../types'\r\nimport { getStatus } from '../helpers'\r\n\r\n/**\r\n * Gets all public data of an IFO\r\n */\r\nconst useGetPublicIfoData = (ifo: Ifo): PublicIfoData => {\r\n  const { address, releaseBlockNumber } = ifo\r\n  const lpTokenPriceInUsd = useLpTokenPrice(ifo.currency.symbol)\r\n  const [state, setState] = useState({\r\n    isInitialized: false,\r\n    status: 'idle' as IfoStatus,\r\n    blocksRemaining: 0,\r\n    secondsUntilStart: 0,\r\n    progress: 5,\r\n    secondsUntilEnd: 0,\r\n    startBlockNum: 0,\r\n    endBlockNum: 0,\r\n    numberPoints: null,\r\n    thresholdPoints: undefined,\r\n    [PoolIds.poolUnlimited]: {\r\n      raisingAmountPool: BIG_ZERO,\r\n      totalAmountPool: BIG_ZERO,\r\n      offeringAmountPool: BIG_ZERO, // Not know\r\n      limitPerUserInLP: BIG_ZERO, //  Not used\r\n      taxRate: 0, //  Not used\r\n      sumTaxesOverflow: BIG_ZERO, //  Not used\r\n    },\r\n  })\r\n  const fetchIfoData = useCallback(\r\n    async (currentBlock: number) => {\r\n      const ifoCalls = ['startBlock', 'endBlock', 'raisingAmount', 'totalAmount'].map((method) => ({\r\n        address,\r\n        name: method,\r\n      }))\r\n\r\n      const [startBlock, endBlock, raisingAmount, totalAmount] = await multicallv2(ifoV1Abi, ifoCalls)\r\n\r\n      const startBlockNum = startBlock ? startBlock[0].toNumber() : 0\r\n      const endBlockNum = endBlock ? endBlock[0].toNumber() : 0\r\n\r\n      const status = getStatus(currentBlock, startBlockNum, endBlockNum)\r\n      const totalBlocks = endBlockNum - startBlockNum\r\n      const blocksRemaining = endBlockNum - currentBlock\r\n\r\n      // Calculate the total progress until finished or until start\r\n      const progress =\r\n        currentBlock > startBlockNum\r\n          ? ((currentBlock - startBlockNum) / totalBlocks) * 100\r\n          : ((currentBlock - releaseBlockNumber) / (startBlockNum - releaseBlockNumber)) * 100\r\n\r\n      setState((prev) => ({\r\n        ...prev,\r\n        isInitialized: true,\r\n        status,\r\n        blocksRemaining,\r\n        secondsUntilStart: (startBlockNum - currentBlock) * BSC_BLOCK_TIME,\r\n        progress,\r\n        secondsUntilEnd: blocksRemaining * BSC_BLOCK_TIME,\r\n        startBlockNum,\r\n        endBlockNum,\r\n        [PoolIds.poolUnlimited]: {\r\n          ...prev.poolUnlimited,\r\n          raisingAmountPool: raisingAmount ? new BigNumber(raisingAmount[0].toString()) : BIG_ZERO,\r\n          totalAmountPool: totalAmount ? new BigNumber(totalAmount[0].toString()) : BIG_ZERO,\r\n        },\r\n      }))\r\n    },\r\n    [address, releaseBlockNumber],\r\n  )\r\n\r\n  return { ...state, currencyPriceInUSD: lpTokenPriceInUsd, fetchIfoData }\r\n}\r\n\r\nexport default useGetPublicIfoData\r\n","import { useState, useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { useERC20, useIfoV1Contract } from 'hooks/useContract'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport ifoV1Abi from 'config/abi/ifoV1.json'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport useIfoAllowance from '../useIfoAllowance'\r\nimport { WalletIfoState, WalletIfoData } from '../../types'\r\n\r\ninterface UserInfo {\r\n  amount: BigNumber\r\n  claimed: boolean\r\n}\r\n\r\nconst initialState = {\r\n  isInitialized: false,\r\n  [PoolIds.poolUnlimited]: {\r\n    amountTokenCommittedInLP: BIG_ZERO,\r\n    hasClaimed: false,\r\n    isPendingTx: false,\r\n    offeringAmountInToken: BIG_ZERO,\r\n    refundingAmountInLP: BIG_ZERO,\r\n    taxAmountInLP: BIG_ZERO, // Not used\r\n  },\r\n}\r\n\r\n/**\r\n * Gets all data from an IFO related to a wallet\r\n */\r\nconst useGetWalletIfoData = (ifo: Ifo): WalletIfoData => {\r\n  const [state, setState] = useState<WalletIfoState>(initialState)\r\n\r\n  const { address, currency } = ifo\r\n  const { poolUnlimited } = state\r\n\r\n  const { account } = useWeb3React()\r\n  const contract = useIfoV1Contract(address)\r\n  const currencyContract = useERC20(currency.address)\r\n  const allowance = useIfoAllowance(currencyContract, address, poolUnlimited.isPendingTx)\r\n\r\n  const setPendingTx = (status: boolean) =>\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [PoolIds.poolUnlimited]: {\r\n        ...prevState.poolUnlimited,\r\n        isPendingTx: status,\r\n      },\r\n    }))\r\n\r\n  const setIsClaimed = () => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [PoolIds.poolUnlimited]: {\r\n        ...prevState.poolUnlimited,\r\n        hasClaimed: true,\r\n      },\r\n    }))\r\n  }\r\n\r\n  const fetchIfoData = useCallback(async () => {\r\n    const ifoCalls = ['getOfferingAmount', 'userInfo', 'getRefundingAmount'].map((method) => ({\r\n      address,\r\n      name: method,\r\n      params: [account],\r\n    }))\r\n\r\n    const [offeringAmount, userInfoResponse, refundingAmount] = await multicallv2(ifoV1Abi, ifoCalls)\r\n    const parsedUserInfo: UserInfo = userInfoResponse\r\n      ? {\r\n          amount: new BigNumber(userInfoResponse.amount.toString()),\r\n          claimed: userInfoResponse.claimed,\r\n        }\r\n      : { amount: BIG_ZERO, claimed: false }\r\n\r\n    setState((prevState) => ({\r\n      isInitialized: true,\r\n      [PoolIds.poolUnlimited]: {\r\n        ...prevState.poolUnlimited,\r\n        amountTokenCommittedInLP: parsedUserInfo.amount,\r\n        hasClaimed: parsedUserInfo.claimed,\r\n        offeringAmountInToken: offeringAmount ? new BigNumber(offeringAmount[0].toString()) : BIG_ZERO,\r\n        refundingAmountInLP: refundingAmount ? new BigNumber(refundingAmount[0].toString()) : BIG_ZERO,\r\n      },\r\n    }))\r\n  }, [account, address])\r\n\r\n  const resetIfoData = useCallback(() => {\r\n    setState(initialState)\r\n  }, [])\r\n\r\n  return { ...state, allowance, contract, setPendingTx, setIsClaimed, fetchIfoData, resetIfoData }\r\n}\r\n\r\nexport default useGetWalletIfoData\r\n","import React from 'react'\r\nimport useGetPublicIfoV1Data from 'views/Ifos/hooks/v1/useGetPublicIfoData'\r\nimport useGetWalletIfoV1Data from 'views/Ifos/hooks/v1/useGetWalletIfoData'\r\nimport { Ifo } from 'config/constants/types'\r\nimport IfoFoldableCard from './IfoFoldableCard'\r\n\r\ninterface Props {\r\n  ifo: Ifo\r\n}\r\n\r\nconst IfoCardV1Data: React.FC<Props> = ({ ifo }) => {\r\n  const publicIfoData = useGetPublicIfoV1Data(ifo)\r\n  const walletIfoData = useGetWalletIfoV1Data(ifo)\r\n\r\n  return <IfoFoldableCard ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n}\r\n\r\nexport default IfoCardV1Data\r\n","import { useState, useCallback } from 'react'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport BigNumber from 'bignumber.js'\r\nimport { Ifo, PoolIds } from 'config/constants/types'\r\nimport { useERC20, useIfoV2Contract } from 'hooks/useContract'\r\nimport { multicallv2 } from 'utils/multicall'\r\nimport ifoV2Abi from 'config/abi/ifoV2.json'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport useIfoAllowance from '../useIfoAllowance'\r\nimport { WalletIfoState, WalletIfoData } from '../../types'\r\n\r\nconst initialState = {\r\n  isInitialized: false,\r\n  poolBasic: {\r\n    amountTokenCommittedInLP: BIG_ZERO,\r\n    offeringAmountInToken: BIG_ZERO,\r\n    refundingAmountInLP: BIG_ZERO,\r\n    taxAmountInLP: BIG_ZERO,\r\n    hasClaimed: false,\r\n    isPendingTx: false,\r\n  },\r\n  poolUnlimited: {\r\n    amountTokenCommittedInLP: BIG_ZERO,\r\n    offeringAmountInToken: BIG_ZERO,\r\n    refundingAmountInLP: BIG_ZERO,\r\n    taxAmountInLP: BIG_ZERO,\r\n    hasClaimed: false,\r\n    isPendingTx: false,\r\n  },\r\n}\r\n\r\n/**\r\n * Gets all data from an IFO related to a wallet\r\n */\r\nconst useGetWalletIfoData = (ifo: Ifo): WalletIfoData => {\r\n  const [state, setState] = useState<WalletIfoState>(initialState)\r\n\r\n  const { address, currency } = ifo\r\n\r\n  const { account } = useWeb3React()\r\n  const contract = useIfoV2Contract(address)\r\n  const currencyContract = useERC20(currency.address)\r\n  const allowance = useIfoAllowance(currencyContract, address)\r\n\r\n  const setPendingTx = (status: boolean, poolId: PoolIds) =>\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [poolId]: {\r\n        ...prevState[poolId],\r\n        isPendingTx: status,\r\n      },\r\n    }))\r\n\r\n  const setIsClaimed = (poolId: PoolIds) => {\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      [poolId]: {\r\n        ...prevState[poolId],\r\n        hasClaimed: true,\r\n      },\r\n    }))\r\n  }\r\n\r\n  const fetchIfoData = useCallback(async () => {\r\n    const ifoCalls = ['viewUserInfo', 'viewUserOfferingAndRefundingAmountsForPools'].map((method) => ({\r\n      address,\r\n      name: method,\r\n      params: [account, [0, 1]],\r\n    }))\r\n\r\n    const [userInfo, amounts] = await multicallv2(ifoV2Abi, ifoCalls)\r\n\r\n    setState((prevState) => ({\r\n      ...prevState,\r\n      isInitialized: true,\r\n      poolBasic: {\r\n        ...prevState.poolBasic,\r\n        amountTokenCommittedInLP: new BigNumber(userInfo[0][0].toString()),\r\n        offeringAmountInToken: new BigNumber(amounts[0][0][0].toString()),\r\n        refundingAmountInLP: new BigNumber(amounts[0][0][1].toString()),\r\n        taxAmountInLP: new BigNumber(amounts[0][0][2].toString()),\r\n        hasClaimed: userInfo[1][0],\r\n      },\r\n      poolUnlimited: {\r\n        ...prevState.poolUnlimited,\r\n        amountTokenCommittedInLP: new BigNumber(userInfo[0][1].toString()),\r\n        offeringAmountInToken: new BigNumber(amounts[0][1][0].toString()),\r\n        refundingAmountInLP: new BigNumber(amounts[0][1][1].toString()),\r\n        taxAmountInLP: new BigNumber(amounts[0][1][2].toString()),\r\n        hasClaimed: userInfo[1][1],\r\n      },\r\n    }))\r\n  }, [account, address])\r\n\r\n  const resetIfoData = useCallback(() => {\r\n    setState({ ...initialState })\r\n  }, [])\r\n\r\n  return { ...state, allowance, contract, setPendingTx, setIsClaimed, fetchIfoData, resetIfoData }\r\n}\r\n\r\nexport default useGetWalletIfoData\r\n","import React from 'react'\r\nimport useGetPublicIfoV2Data from 'views/Ifos/hooks/v2/useGetPublicIfoData'\r\nimport useGetWalletIfoV2Data from 'views/Ifos/hooks/v2/useGetWalletIfoData'\r\nimport { Ifo } from 'config/constants/types'\r\nimport IfoFoldableCard from './IfoFoldableCard'\r\n\r\ninterface Props {\r\n  ifo: Ifo\r\n}\r\n\r\nconst IfoCardV2Data: React.FC<Props> = ({ ifo }) => {\r\n  const publicIfoData = useGetPublicIfoV2Data(ifo)\r\n  const walletIfoData = useGetWalletIfoV2Data(ifo)\r\n\r\n  return <IfoFoldableCard ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n}\r\n\r\nexport default IfoCardV2Data\r\n","import React from 'react'\r\nimport useGetPublicIfoV2Data from 'views/Ifos/hooks/v2/useGetPublicIfoData'\r\nimport useGetWalletIfoV3Data from 'views/Ifos/hooks/v3/useGetWalletIfoData'\r\nimport { Ifo } from 'config/constants/types'\r\nimport IfoFoldableCard from './IfoFoldableCard'\r\n\r\ninterface Props {\r\n  ifo: Ifo\r\n}\r\n\r\nconst IfoCardV3Data: React.FC<Props> = ({ ifo }) => {\r\n  // TODO: v3 contract\r\n  const publicIfoData = useGetPublicIfoV2Data(ifo)\r\n  const walletIfoData = useGetWalletIfoV3Data(ifo)\r\n\r\n  return <IfoFoldableCard ifo={ifo} publicIfoData={publicIfoData} walletIfoData={walletIfoData} />\r\n}\r\n\r\nexport default IfoCardV3Data\r\n","import { ifosConfig } from 'config/constants'\r\nimport { Ifo } from 'config/constants/types'\r\nimport React from 'react'\r\nimport IfoCardV1Data from './components/IfoCardV1Data'\r\nimport IfoCardV2Data from './components/IfoCardV2Data'\r\nimport IfoCardV3Data from './components/IfoCardV3Data'\r\nimport IfoLayout from './components/IfoLayout'\r\n\r\nconst inactiveIfo: Ifo[] = ifosConfig.filter((ifo) => !ifo.isActive)\r\n\r\nconst PastIfo = () => {\r\n  return (\r\n    <IfoLayout maxWidth=\"736px\" m=\"auto\" width=\"100%\" id=\"past-ifos\" py={['24px', '24px', '40px']}>\r\n      {inactiveIfo.map((ifo) => {\r\n        switch (ifo.version) {\r\n          case 1:\r\n            return <IfoCardV1Data key={ifo.id} ifo={ifo} />\r\n          case 2:\r\n            return <IfoCardV2Data key={ifo.id} ifo={ifo} />\r\n          case 3:\r\n            return <IfoCardV3Data key={ifo.id} ifo={ifo} />\r\n          default:\r\n            return null\r\n        }\r\n      })}\r\n    </IfoLayout>\r\n  )\r\n}\r\n\r\nexport default PastIfo\r\n","import { SubMenuItems } from '@pancakeswap/uikit'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport Container from 'components/Layout/Container'\r\nimport { useTranslation } from 'contexts/Localization'\r\nimport React from 'react'\r\nimport { Route, useRouteMatch } from 'react-router-dom'\r\nimport { useFetchIfoPool, useFetchPublicPoolsData, useFetchUserPools } from 'state/pools/hooks'\r\nimport Hero from './components/Hero'\r\nimport CurrentIfo from './CurrentIfo'\r\nimport PastIfo from './PastIfo'\r\n\r\nconst Ifos = () => {\r\n  const { t } = useTranslation()\r\n  const { path, isExact } = useRouteMatch()\r\n  const { account } = useWeb3React()\r\n\r\n  useFetchIfoPool()\r\n  // TODO: should be refactored to only fetch one pool we need\r\n  useFetchPublicPoolsData()\r\n  useFetchUserPools(account)\r\n\r\n  return (\r\n    <>\r\n      <SubMenuItems\r\n        items={[\r\n          {\r\n            label: t('Latest'),\r\n            href: '/ifo',\r\n          },\r\n          {\r\n            label: t('Finished'),\r\n            href: '/ifo/history',\r\n          },\r\n        ]}\r\n        activeItem={isExact ? '/ifo' : '/ifo/history'}\r\n      />\r\n      <Hero />\r\n      <Container>\r\n        <Route exact path={`${path}`}>\r\n          <CurrentIfo />\r\n        </Route>\r\n        <Route path={`${path}/history`}>\r\n          <PastIfo />\r\n        </Route>\r\n      </Container>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Ifos\r\n","import { useEffect, useMemo } from 'react'\r\nimport BigNumber from 'bignumber.js'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { useSelector } from 'react-redux'\r\nimport { useAppDispatch } from 'state'\r\nimport { simpleRpcProvider } from 'utils/providers'\r\nimport useRefresh from 'hooks/useRefresh'\r\nimport { BIG_ZERO } from 'utils/bigNumber'\r\nimport { getAprData } from 'views/Pools/helpers'\r\nimport {\r\n  fetchPoolsPublicDataAsync,\r\n  fetchPoolsUserDataAsync,\r\n  fetchCakeVaultPublicData,\r\n  fetchCakeVaultUserData,\r\n  fetchCakeVaultFees,\r\n  fetchPoolsStakingLimitsAsync,\r\n  fetchIfoPoolFees,\r\n  fetchIfoPoolPublicData,\r\n  fetchIfoPoolUserAndCredit,\r\n  initialPoolVaultState,\r\n} from '.'\r\nimport { State, DeserializedPool, VaultKey } from '../types'\r\nimport { transformPool } from './helpers'\r\n\r\nexport const useFetchPublicPoolsData = () => {\r\n  const dispatch = useAppDispatch()\r\n  const { slowRefresh } = useRefresh()\r\n\r\n  useEffect(() => {\r\n    const fetchPoolsPublicData = async () => {\r\n      const blockNumber = await simpleRpcProvider.getBlockNumber()\r\n      dispatch(fetchPoolsPublicDataAsync(blockNumber))\r\n    }\r\n\r\n    fetchPoolsPublicData()\r\n    dispatch(fetchPoolsStakingLimitsAsync())\r\n  }, [dispatch, slowRefresh])\r\n}\r\n\r\nexport const useFetchUserPools = (account) => {\r\n  const { fastRefresh } = useRefresh()\r\n  const dispatch = useAppDispatch()\r\n  useEffect(() => {\r\n    if (account) {\r\n      dispatch(fetchPoolsUserDataAsync(account))\r\n    }\r\n  }, [account, dispatch, fastRefresh])\r\n}\r\n\r\nexport const usePools = (): { pools: DeserializedPool[]; userDataLoaded: boolean } => {\r\n  const { pools, userDataLoaded } = useSelector((state: State) => ({\r\n    pools: state.pools.data,\r\n    userDataLoaded: state.pools.userDataLoaded,\r\n  }))\r\n  return { pools: pools.map(transformPool), userDataLoaded }\r\n}\r\n\r\nexport const usePool = (sousId: number): { pool: DeserializedPool; userDataLoaded: boolean } => {\r\n  const { pool, userDataLoaded } = useSelector((state: State) => ({\r\n    pool: state.pools.data.find((p) => p.sousId === sousId),\r\n    userDataLoaded: state.pools.userDataLoaded,\r\n  }))\r\n  return { pool: transformPool(pool), userDataLoaded }\r\n}\r\n\r\nexport const useFetchCakeVault = () => {\r\n  const { account } = useWeb3React()\r\n  const { fastRefresh } = useRefresh()\r\n  const dispatch = useAppDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchCakeVaultPublicData())\r\n  }, [dispatch, fastRefresh])\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchCakeVaultUserData({ account }))\r\n  }, [dispatch, fastRefresh, account])\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchCakeVaultFees())\r\n  }, [dispatch])\r\n}\r\n\r\nexport const useFetchIfoPool = () => {\r\n  const { account } = useWeb3React()\r\n  const { fastRefresh } = useRefresh()\r\n  const dispatch = useAppDispatch()\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchIfoPoolPublicData())\r\n  }, [dispatch, fastRefresh])\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchIfoPoolUserAndCredit({ account }))\r\n  }, [dispatch, fastRefresh, account])\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchIfoPoolFees())\r\n  }, [dispatch])\r\n}\r\n\r\nexport const useCakeVault = () => {\r\n  return useVaultPoolByKey(VaultKey.CakeVault)\r\n}\r\n\r\nexport const useVaultPools = () => {\r\n  return {\r\n    [VaultKey.CakeVault]: useVaultPoolByKey(VaultKey.CakeVault),\r\n    [VaultKey.IfoPool]: useVaultPoolByKey(VaultKey.IfoPool),\r\n  }\r\n}\r\n\r\nexport const useVaultPoolByKey = (key: VaultKey) => {\r\n  const {\r\n    totalShares: totalSharesAsString,\r\n    pricePerFullShare: pricePerFullShareAsString,\r\n    totalCakeInVault: totalCakeInVaultAsString,\r\n    estimatedCakeBountyReward: estimatedCakeBountyRewardAsString,\r\n    totalPendingCakeHarvest: totalPendingCakeHarvestAsString,\r\n    fees: { performanceFee, callFee, withdrawalFee, withdrawalFeePeriod },\r\n    userData: {\r\n      isLoading,\r\n      userShares: userSharesAsString,\r\n      cakeAtLastUserAction: cakeAtLastUserActionAsString,\r\n      lastDepositedTime,\r\n      lastUserActionTime,\r\n    },\r\n  } = useSelector((state: State) => (key ? state.pools[key] : initialPoolVaultState))\r\n\r\n  const estimatedCakeBountyReward = useMemo(() => {\r\n    return new BigNumber(estimatedCakeBountyRewardAsString)\r\n  }, [estimatedCakeBountyRewardAsString])\r\n\r\n  const totalPendingCakeHarvest = useMemo(() => {\r\n    return new BigNumber(totalPendingCakeHarvestAsString)\r\n  }, [totalPendingCakeHarvestAsString])\r\n\r\n  const totalShares = useMemo(() => {\r\n    return new BigNumber(totalSharesAsString)\r\n  }, [totalSharesAsString])\r\n\r\n  const pricePerFullShare = useMemo(() => {\r\n    return new BigNumber(pricePerFullShareAsString)\r\n  }, [pricePerFullShareAsString])\r\n\r\n  const totalCakeInVault = useMemo(() => {\r\n    return new BigNumber(totalCakeInVaultAsString)\r\n  }, [totalCakeInVaultAsString])\r\n\r\n  const userShares = useMemo(() => {\r\n    return new BigNumber(userSharesAsString)\r\n  }, [userSharesAsString])\r\n\r\n  const cakeAtLastUserAction = useMemo(() => {\r\n    return new BigNumber(cakeAtLastUserActionAsString)\r\n  }, [cakeAtLastUserActionAsString])\r\n\r\n  const performanceFeeAsDecimal = performanceFee && performanceFee / 100\r\n\r\n  return {\r\n    totalShares,\r\n    pricePerFullShare,\r\n    totalCakeInVault,\r\n    estimatedCakeBountyReward,\r\n    totalPendingCakeHarvest,\r\n    fees: {\r\n      performanceFeeAsDecimal,\r\n      performanceFee,\r\n      callFee,\r\n      withdrawalFee,\r\n      withdrawalFeePeriod,\r\n    },\r\n    userData: {\r\n      isLoading,\r\n      userShares,\r\n      cakeAtLastUserAction,\r\n      lastDepositedTime,\r\n      lastUserActionTime,\r\n    },\r\n  }\r\n}\r\n\r\nexport const useIfoPoolVault = () => {\r\n  return useVaultPoolByKey(VaultKey.IfoPool)\r\n}\r\n\r\nexport const useIfoPooStartBlock = () => {\r\n  return useSelector((state: State) => state.pools.ifoPool.creditStartBlock)\r\n}\r\n\r\nexport const useIfoPoolCredit = () => {\r\n  const creditAsString = useSelector((state: State) => state.pools.ifoPool.userData?.credit ?? BIG_ZERO)\r\n  const credit = useMemo(() => {\r\n    return new BigNumber(creditAsString)\r\n  }, [creditAsString])\r\n\r\n  return credit\r\n}\r\n\r\nexport const useIfoWithApr = () => {\r\n  const {\r\n    fees: { performanceFeeAsDecimal },\r\n  } = useIfoPoolVault()\r\n  const { pool: poolZero, userDataLoaded } = usePool(0)\r\n\r\n  const ifoPoolWithApr = useMemo(() => {\r\n    const ifoPool = { ...poolZero }\r\n    ifoPool.vaultKey = VaultKey.IfoPool\r\n    ifoPool.apr = getAprData(ifoPool, performanceFeeAsDecimal).apr\r\n    ifoPool.rawApr = poolZero.apr\r\n    return ifoPool\r\n  }, [performanceFeeAsDecimal, poolZero])\r\n\r\n  return {\r\n    pool: ifoPoolWithApr,\r\n    userDataLoaded,\r\n  }\r\n}\r\n","import { useEffect, useReducer, useRef } from 'react'\r\nimport { noop } from 'lodash'\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { ethers } from 'ethers'\r\nimport useToast from 'hooks/useToast'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ntype LoadingState = 'idle' | 'loading' | 'success' | 'fail'\r\n\r\ntype Action =\r\n  | { type: 'requires_approval' }\r\n  | { type: 'approve_sending' }\r\n  | { type: 'approve_receipt' }\r\n  | { type: 'approve_error' }\r\n  | { type: 'confirm_sending' }\r\n  | { type: 'confirm_receipt' }\r\n  | { type: 'confirm_error' }\r\n\r\ninterface State {\r\n  approvalState: LoadingState\r\n  confirmState: LoadingState\r\n}\r\n\r\nconst initialState: State = {\r\n  approvalState: 'idle',\r\n  confirmState: 'idle',\r\n}\r\n\r\nconst reducer = (state: State, actions: Action): State => {\r\n  switch (actions.type) {\r\n    case 'requires_approval':\r\n      return {\r\n        ...state,\r\n        approvalState: 'success',\r\n      }\r\n    case 'approve_sending':\r\n      return {\r\n        ...state,\r\n        approvalState: 'loading',\r\n      }\r\n    case 'approve_receipt':\r\n      return {\r\n        ...state,\r\n        approvalState: 'success',\r\n      }\r\n    case 'approve_error':\r\n      return {\r\n        ...state,\r\n        approvalState: 'fail',\r\n      }\r\n    case 'confirm_sending':\r\n      return {\r\n        ...state,\r\n        confirmState: 'loading',\r\n      }\r\n    case 'confirm_receipt':\r\n      return {\r\n        ...state,\r\n        confirmState: 'success',\r\n      }\r\n    case 'confirm_error':\r\n      return {\r\n        ...state,\r\n        confirmState: 'fail',\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\ninterface OnSuccessProps {\r\n  state: State\r\n  receipt: ethers.providers.TransactionReceipt\r\n}\r\n\r\ninterface ApproveConfirmTransaction {\r\n  onApprove: () => Promise<ethers.providers.TransactionResponse>\r\n  onConfirm: (params?) => Promise<ethers.providers.TransactionResponse>\r\n  onRequiresApproval?: () => Promise<boolean>\r\n  onSuccess: ({ state, receipt }: OnSuccessProps) => void\r\n  onApproveSuccess?: ({ state, receipt }: OnSuccessProps) => void\r\n}\r\n\r\nconst useApproveConfirmTransaction = ({\r\n  onApprove,\r\n  onConfirm,\r\n  onRequiresApproval,\r\n  onSuccess = noop,\r\n  onApproveSuccess = noop,\r\n}: ApproveConfirmTransaction) => {\r\n  const { t } = useTranslation()\r\n  const { account } = useWeb3React()\r\n  const [state, dispatch] = useReducer(reducer, initialState)\r\n  const handlePreApprove = useRef(onRequiresApproval)\r\n  const { toastError } = useToast()\r\n\r\n  // Check if approval is necessary, re-check if account changes\r\n  useEffect(() => {\r\n    if (account && handlePreApprove.current) {\r\n      handlePreApprove.current().then((result) => {\r\n        if (result) {\r\n          dispatch({ type: 'requires_approval' })\r\n        }\r\n      })\r\n    }\r\n  }, [account, handlePreApprove, dispatch])\r\n\r\n  return {\r\n    isApproving: state.approvalState === 'loading',\r\n    isApproved: state.approvalState === 'success',\r\n    isConfirming: state.confirmState === 'loading',\r\n    isConfirmed: state.confirmState === 'success',\r\n    hasApproveFailed: state.approvalState === 'fail',\r\n    hasConfirmFailed: state.confirmState === 'fail',\r\n    handleApprove: async () => {\r\n      try {\r\n        const tx = await onApprove()\r\n        dispatch({ type: 'approve_sending' })\r\n        const receipt = await tx.wait()\r\n        if (receipt.status) {\r\n          dispatch({ type: 'approve_receipt' })\r\n          onApproveSuccess({ state, receipt })\r\n        }\r\n      } catch (error) {\r\n        dispatch({ type: 'approve_error' })\r\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      }\r\n    },\r\n    handleConfirm: async (params = {}) => {\r\n      dispatch({ type: 'confirm_sending' })\r\n      try {\r\n        const tx = await onConfirm(params)\r\n        const receipt = await tx.wait()\r\n        if (receipt.status) {\r\n          dispatch({ type: 'confirm_receipt' })\r\n          onSuccess({ state, receipt })\r\n        }\r\n      } catch (error) {\r\n        dispatch({ type: 'confirm_error' })\r\n        toastError(t('Error'), t('Please try again. Confirm the transaction and make sure you are paying enough gas!'))\r\n      }\r\n    },\r\n  }\r\n}\r\n\r\nexport default useApproveConfirmTransaction\r\n","const MINUTE_IN_SECONDS = 60\r\nconst HOUR_IN_SECONDS = 3600\r\nconst DAY_IN_SECONDS = 86400\r\nconst MONTH_IN_SECONDS = 2629800\r\nconst YEAR_IN_SECONDS = 31557600\r\n\r\n/**\r\n * Format number of seconds into year, month, day, hour, minute, seconds\r\n *\r\n * @param seconds\r\n */\r\nconst getTimePeriods = (seconds: number) => {\r\n  let delta = Math.abs(seconds)\r\n  const timeLeft = {\r\n    years: 0,\r\n    months: 0,\r\n    days: 0,\r\n    hours: 0,\r\n    minutes: 0,\r\n    seconds: 0,\r\n  }\r\n\r\n  if (delta >= YEAR_IN_SECONDS) {\r\n    timeLeft.years = Math.floor(delta / YEAR_IN_SECONDS)\r\n    delta -= timeLeft.years * YEAR_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= MONTH_IN_SECONDS) {\r\n    timeLeft.months = Math.floor(delta / MONTH_IN_SECONDS)\r\n    delta -= timeLeft.months * MONTH_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= DAY_IN_SECONDS) {\r\n    timeLeft.days = Math.floor(delta / DAY_IN_SECONDS)\r\n    delta -= timeLeft.days * DAY_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= HOUR_IN_SECONDS) {\r\n    timeLeft.hours = Math.floor(delta / HOUR_IN_SECONDS)\r\n    delta -= timeLeft.hours * HOUR_IN_SECONDS\r\n  }\r\n\r\n  if (delta >= MINUTE_IN_SECONDS) {\r\n    timeLeft.minutes = Math.floor(delta / MINUTE_IN_SECONDS)\r\n    delta -= timeLeft.minutes * MINUTE_IN_SECONDS\r\n  }\r\n\r\n  timeLeft.seconds = delta\r\n\r\n  return timeLeft\r\n}\r\n\r\nexport default getTimePeriods\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { ChevronRightIcon, Button as UIKitButton, AutoRenewIcon, ChevronDownIcon, Box, Flex } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\nexport enum ButtonArrangement {\r\n  ROW = 'row',\r\n  SEQUENTIAL = 'sequential',\r\n}\r\n\r\ninterface ApproveConfirmButtonsProps {\r\n  isApproveDisabled: boolean\r\n  isApproving: boolean\r\n  isConfirming: boolean\r\n  isConfirmDisabled: boolean\r\n  onApprove: () => void\r\n  onConfirm: () => void\r\n  buttonArrangement?: ButtonArrangement\r\n  confirmLabel?: string\r\n  confirmId?: string\r\n}\r\n\r\nconst StyledApproveConfirmButtonRow = styled.div`\r\n  align-items: center;\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  justify-content: center;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    grid-template-columns: 1fr 24px 1fr;\r\n  }\r\n`\r\n\r\nconst Button = styled(UIKitButton)`\r\n  width: 100%;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    min-width: 160px;\r\n  }\r\n`\r\n\r\nconst iconAttrs = { width: '24px', color: 'textDisabled' }\r\n\r\nconst ChevronRight = styled(ChevronRightIcon).attrs(iconAttrs)`\r\n  display: none;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    display: block;\r\n  }\r\n`\r\n\r\nconst ChevronBottom = styled(ChevronDownIcon).attrs(iconAttrs)`\r\n  display: block;\r\n\r\n  ${({ theme }) => theme.mediaQueries.md} {\r\n    display: none;\r\n  }\r\n`\r\n\r\nconst spinnerIcon = <AutoRenewIcon spin color=\"currentColor\" />\r\n\r\nconst ApproveConfirmButtons: React.FC<ApproveConfirmButtonsProps> = ({\r\n  isApproveDisabled,\r\n  isApproving,\r\n  isConfirming,\r\n  isConfirmDisabled,\r\n  onApprove,\r\n  onConfirm,\r\n  buttonArrangement = ButtonArrangement.ROW,\r\n  confirmLabel,\r\n  confirmId,\r\n}) => {\r\n  const { t } = useTranslation()\r\n  const confirmButtonText = confirmLabel ?? t('Confirm')\r\n\r\n  const ApproveConfirmRow = () => {\r\n    return (\r\n      <StyledApproveConfirmButtonRow>\r\n        <Box>\r\n          <Button\r\n            disabled={isApproveDisabled}\r\n            onClick={onApprove}\r\n            endIcon={isApproving ? spinnerIcon : undefined}\r\n            isLoading={isApproving}\r\n          >\r\n            {isApproving ? t('Enabling') : t('Enable')}\r\n          </Button>\r\n        </Box>\r\n        <Flex justifyContent=\"center\">\r\n          <ChevronRight />\r\n          <ChevronBottom />\r\n        </Flex>\r\n        <Box>\r\n          <Button\r\n            id={confirmId}\r\n            onClick={onConfirm}\r\n            disabled={isConfirmDisabled}\r\n            isLoading={isConfirming}\r\n            endIcon={isConfirming ? spinnerIcon : undefined}\r\n          >\r\n            {isConfirming ? t('Confirming') : confirmButtonText}\r\n          </Button>\r\n        </Box>\r\n      </StyledApproveConfirmButtonRow>\r\n    )\r\n  }\r\n\r\n  const ApproveConfirmSequential = () => {\r\n    return (\r\n      <>\r\n        {isApproveDisabled ? (\r\n          <Box>\r\n            <Button\r\n              id={confirmId}\r\n              onClick={onConfirm}\r\n              disabled={isConfirmDisabled}\r\n              isLoading={isConfirming}\r\n              endIcon={isConfirming ? spinnerIcon : undefined}\r\n            >\r\n              {isConfirming ? t('Confirming') : confirmButtonText}\r\n            </Button>\r\n          </Box>\r\n        ) : (\r\n          <Box>\r\n            <Button onClick={onApprove} endIcon={isApproving ? spinnerIcon : undefined} isLoading={isApproving}>\r\n              {isApproving ? t('Enabling') : t('Enable')}\r\n            </Button>\r\n          </Box>\r\n        )}\r\n      </>\r\n    )\r\n  }\r\n\r\n  return buttonArrangement === ButtonArrangement.ROW ? ApproveConfirmRow() : ApproveConfirmSequential()\r\n}\r\n\r\nexport default ApproveConfirmButtons\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport { ExpandableLabel, Flex, FlexProps, Text } from '@pancakeswap/uikit'\r\nimport { useTranslation } from 'contexts/Localization'\r\n\r\ninterface FoldableTextProps extends FlexProps {\r\n  title?: string\r\n}\r\n\r\nconst Wrapper = styled(Flex)`\r\n  cursor: pointer;\r\n`\r\n\r\nconst StyledExpandableLabelWrapper = styled(Flex)`\r\n  button {\r\n    align-items: center;\r\n    justify-content: flex-start;\r\n  }\r\n`\r\n\r\nconst StyledChildrenFlex = styled(Flex)<{ isExpanded?: boolean }>`\r\n  overflow: hidden;\r\n  height: ${({ isExpanded }) => (isExpanded ? '100%' : '0px')};\r\n  padding-bottom: ${({ isExpanded }) => (isExpanded ? '16px' : '0px')};\r\n  border-bottom: 1px solid ${({ theme }) => theme.colors.inputSecondary};\r\n`\r\n\r\nconst FoldableText: React.FC<FoldableTextProps> = ({ title, children, ...props }) => {\r\n  const { t } = useTranslation()\r\n  const [isExpanded, setIsExpanded] = useState(false)\r\n\r\n  return (\r\n    <Wrapper {...props} flexDirection=\"column\" onClick={() => setIsExpanded(!isExpanded)}>\r\n      <Flex justifyContent=\"space-between\" alignItems=\"center\" pb=\"16px\">\r\n        <Text fontWeight=\"bold\">{title}</Text>\r\n        <StyledExpandableLabelWrapper>\r\n          <ExpandableLabel expanded={isExpanded} onClick={() => setIsExpanded(!isExpanded)}>\r\n            {isExpanded ? t('Hide') : t('Details')}\r\n          </ExpandableLabel>\r\n        </StyledExpandableLabelWrapper>\r\n      </Flex>\r\n      <StyledChildrenFlex isExpanded={isExpanded} flexDirection=\"column\">\r\n        {children}\r\n      </StyledChildrenFlex>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default FoldableText\r\n"],"sourceRoot":""}